-- MySQL dump 10.13  Distrib 5.1.37, for debian-linux-gnu (i486)
--
-- Host: localhost    Database: blog
-- ------------------------------------------------------
-- Server version	5.1.37-1ubuntu5.4

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `articles`
--

DROP TABLE IF EXISTS `articles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `articles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(64) NOT NULL,
  `slug` varchar(64) DEFAULT NULL,
  `header` longtext,
  `content` longtext,
  `created` datetime DEFAULT NULL,
  `meta_keys` varchar(192) DEFAULT NULL,
  `meta_description` varchar(255) DEFAULT NULL,
  `updated` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `articles_slug_uniq` (`slug`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `articles`
--

LOCK TABLES `articles` WRITE;
/*!40000 ALTER TABLE `articles` DISABLE KEYS */;
INSERT INTO `articles` (`id`, `title`, `slug`, `header`, `content`, `created`, `meta_keys`, `meta_description`, `updated`) VALUES (1,'Doctrine 2 on Zend framework','doctrine-2-on-zend-framework','<p>This article describes how to connect Doctrine 2 with Zend Framework.</p>\r\n	<p>Main implementation stuff:</p>\r\n	<ul>\r\n	    <li>Bootstrap Doctrine allowing multi-driver support for meta data</li>\r\n	    <li>Configure namespaces and loaders for CLI support</li>\r\n	    <li>Extensive and simple implementation for any usage</li>\r\n	</ul>','<p>Update <strong>2010-12-18</strong></p>\r\n<ul>\r\n    <li>Renamed vendor Symfony Components to Component</li>\r\n    <li>Removed some duplicate code and fixed naming</li>\r\n</ul>\r\n\r\n<p>First of all required libraries and file structure:</p>\r\n<ul>\r\n	<li>Install and configure the standard Zend application, CLI: <strong>zf create project myapp</strong>. If its a mist for you, read tutorial</li>\r\n	<li>Download and place Doctrine - <a href=\"http://www.doctrine-project.org/projects/orm/download\" target=\"new\">ORM</a>, it should contain also DBAL, Common and required Symfony component packages, place them in <strong>/myapp/library/Doctrine</strong> directory</li>\r\n	<li>Download or checkout <a href=\"http://github.com/doctrine/migrations\" target=\"new\">migrations</a> package, place it in /Doctrine/DBAL/</li>\r\n	<li>If you would like to use other driver than Annotation, you can create Mapping folder under configs directory</li>\r\n	<li><strong>Migration</strong> directory should also by created in /application/configs/</li>\r\n	<li>Create Entity and Proxy folders in application directory</li>\r\n</ul>\r\n<p>Notice list:</p>\r\n<ul>\r\n	<li>This implementation is based on <strong>Doctrine 2 RC2</strong> version</li>\r\n	<li>Last update date: <strong>2010-12-18</strong></li>\r\n</ul>\r\n<p>The file structure should look like this now:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/myapp\r\n    /application\r\n        /configs\r\n            /Mapping\r\n            /Migration\r\n            application.ini\r\n        /Entity\r\n        /modules\r\n        /Proxy\r\n        Bootstrap.php\r\n    /library\r\n        /Doctrine\r\n            /Common\r\n            /DBAL\r\n            	/Migrations\r\n            	...\r\n            /ORM\r\n            /Symfony\r\n        /Zend /*if not in include path*/\r\n    /public\r\n...\r\n</pre>\r\n<p>Next, will use yaml mapping for our entities in this example, create a <strong>User</strong> entity in Yaml mapping format.</p>\r\n<pre class=\"brush: php\">\r\n---\r\n# FILE /myapp/application/configs/Mapping/Entity.User.dcm.yml\r\nEntity\\User:\r\n  type: entity\r\n  table: users\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    password:\r\n      type: string\r\n      length: 32\r\n    username:\r\n      type: string\r\n      length: 128\r\n  oneToOne:\r\n    role:\r\n      targetEntity: Entity\\Role\r\n      inversedBy: users\r\n      joinColumn:\r\n        name: role_id\r\n        referencedColumnName: id\r\n  indexes:\r\n    search_idx:\r\n      columns: username\r\n</pre>\r\n<p>The other one is <strong>Role</strong> Entity. Location <strong>/myapp/application/configs/Mapping/</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\n# FILE /myapp/application/configs/Mapping/Entity.Role.dcm.yml\r\nEntity\\Role:\r\n  type: entity\r\n  table: roles\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    name:\r\n      type: string\r\n      length: 50\r\n      unique: true\r\n  oneToMany:\r\n    users:\r\n      targetEntity: Entity\\User\r\n      mappedBy: role\r\n</pre>\r\n<p>Before we start using cli to create our tables and Entities, we need to modify the <strong>/myapp/configs/application.ini</strong></p>\r\n<pre class=\"brush: php\">\r\n[production]\r\n; here goes some standard configuration\r\nphpSettings.display_startup_errors = 0\r\nphpSettings.display_errors = 0\r\n\r\nbootstrap.path = APPLICATION_PATH \"/Bootstrap.php\"\r\nbootstrap.class = \"Bootstrap\"\r\n\r\n; we will use the module for the good practise\r\nresources.frontController.moduleDirectory = APPLICATION_PATH \"/modules\"\r\nresources.frontController.moduleDefault = \"default\"\r\n\r\n; layout if needed\r\nresources.layout.layout = \"layout\"\r\nresources.view[] = \r\n; -------------------------------------\r\n; Here fallows Doctrine 2 Configuration\r\n; -------------------------------------\r\n \r\n; Database configuration\r\ndbal.driver = \"pdo_mysql\"\r\ndbal.host = \"127.0.0.1\"\r\ndbal.user = \"root\"\r\ndbal.password = \"secret\"\r\ndbal.dbname = \"doctrine2\"\r\n \r\n; location for Entity proxies and namespace\r\norm.proxy.path = APPLICATION_PATH \"/Proxy\"\r\norm.proxy.namespace = \"Proxy\"\r\n \r\n; ----------------------------------------------------\r\n; Multi driver configuration for our database metadata\r\n; ----------------------------------------------------\r\n \r\n; first is the yaml driver to read the mapping from User.yml\r\norm.driver.mainYamlDriver.type = \"Yaml\"\r\norm.driver.mainYamlDriver.path[] = APPLICATION_PATH \"/configs/Mapping\"\r\norm.driver.mainYamlDriver.namespace = \"Entity\"\r\n \r\n; second is the annotation driver for example for mapping extension Entities\r\n; notice: that the namespace should differ and the location specified to look\r\n; for Entity metadata should exist\r\n;orm.driver.extensionDriver.type = \"Annotation\"\r\n;orm.driver.extensionDriver.path[] = APPLICATION_PATH \"/../library/DoctrineExtensions/Versionable/Entity\"\r\n;orm.driver.extensionDriver.namespace = \"DoctrineExtensions\"\r\n \r\n; later use APC for instance\r\norm.cache.metadata = \"Array\"\r\norm.cache.query = \"Array\"\r\n\r\n[staging : production]\r\n\r\n[cli : production]\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\n \r\n[testing : production]\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\n \r\n[development : production]\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\nresources.frontController.params.displayExceptions = 1\r\n</pre>\r\n\r\n<p>Modify the <strong>/myapp/application/Boostrap.php</strong> and add doctrine boot</p>\r\n<pre class=\"brush: php\">\r\nclass Bootstrap extends Zend_Application_Bootstrap_Bootstrap\r\n{\r\n    protected function _initDoctrine()\r\n    {\r\n        // load the doctrine class loader for Doctrine library\r\n        require \'Doctrine/Common/ClassLoader.php\';\r\n        $classLoader = new Doctrine\\Common\\ClassLoader(\'Doctrine\');\r\n        $classLoader->register();\r\n        // load the doctrine class loader for Symfony library components\r\n        $classLoader = new \\Doctrine\\Common\\ClassLoader(\'Symfony\', \'Doctrine\');\r\n        $classLoader->register();\r\n        // load the doctrine class loader for Entity autoloading\r\n        $classLoader = new \\Doctrine\\Common\\ClassLoader(\r\n            \'Entity\', \r\n            APPLICATION_PATH\r\n        );\r\n        $classLoader->register();\r\n        // read ini configuration\r\n        $settings = $this->getOption(\'orm\');\r\n \r\n        // load proxy configuration settings\r\n        $config = new Doctrine\\ORM\\Configuration;\r\n        $config->setProxyDir($settings[\'proxy\'][\'path\']);\r\n        $config->setProxyNamespace($settings[\'proxy\'][\'namespace\']);\r\n        $config->setAutoGenerateProxyClasses((APPLICATION_ENV == \"development\"));\r\n        // load metadata drivers\r\n        $drivers = $settings[\'driver\'];\r\n        $chainDriverImpl = new Doctrine\\ORM\\Mapping\\Driver\\DriverChain();\r\n        foreach ($drivers as $driver) {\r\n            if ($driver[\'type\'] == \'Annotation\') {\r\n                $driverImpl = $config->newDefaultAnnotationDriver($driver[\'path\']);\r\n            } else {\r\n                $driverClassName = \'Doctrine\\ORM\\Mapping\\Driver\\\\\' . $driver[\'type\'] . \'Driver\';\r\n                $driverImpl = new $driverClassName($driver[\'path\']);\r\n            }\r\n            $chainDriverImpl->addDriver($driverImpl, $driver[\'namespace\']);\r\n        }\r\n        $config->setMetadataDriverImpl($chainDriverImpl);\r\n        // Set up caches\r\n        $cacheMetadataClassName = \'Doctrine\\Common\\Cache\\\\\' . $settings[\'cache\'][\'metadata\'] . \'Cache\';\r\n        $cache = new $cacheMetadataClassName();\r\n        $config->setMetadataCacheImpl($cache);\r\n        if ($settings[\'cache\'][\'metadata\'] != $settings[\'cache\'][\'query\']) {\r\n            $cacheQueryClassName = \'Doctrine\\Common\\Cache\\\\\' . $settings[\'cache\'][\'query\'] . \'Cache\';\r\n            $cache = new $cacheQueryClassName();\r\n        }\r\n        $config->setQueryCacheImpl($cache);\r\n \r\n        // event manager if needed\r\n        $evm = new Doctrine\\Common\\EventManager();\r\n        // boot entity manager\r\n        $em = Doctrine\\ORM\\EntityManager::create(\r\n            $this->getOption(\'dbal\'), \r\n            $config, \r\n            $evm\r\n        );\r\n        // store entity manager in registry\r\n        Zend_Registry::set(\'em\', $em);\r\n        return $em;\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>The metadata and database is the best to create through Doctrine CLI. Create the <strong>/myapp/scripts/</strong> directory\r\nand add the <strong>doctrine.php</strong> file in it, which will boostrap the CLI</p>\r\n<pre class=\"brush: php\">\r\n/**\r\n * FILE: /myapp/scripts/doctrine.php\r\n * Doctrine 2 CLI script\r\n */\r\n \r\ndefine(\'APPLICATION_ENV\', \'cli\');\r\ndefine(\'APPLICATION_PATH\', realpath(dirname(__FILE__) . \'/../application\'));\r\n \r\nset_include_path(implode(PATH_SEPARATOR, array(\r\n    realpath(APPLICATION_PATH . \'/../library\'),\r\n    get_include_path(),\r\n)));\r\n \r\nrequire_once \'Zend/Application.php\';\r\n \r\n// Create application, bootstrap, and run\r\n$application = new Zend_Application(\r\n    APPLICATION_ENV,\r\n    APPLICATION_PATH . \'/configs/application.ini\'\r\n);\r\n\r\n$application->getBootstrap()->bootstrap(\'doctrine\');\r\n$em = Zend_Registry::get(\'em\');\r\n\r\n// comment if migrations are not used\r\n$classLoader = new Doctrine\\Common\\ClassLoader(\'Doctrine\\DBAL\\Migrations\', \'Doctrine/DBAL\');\r\n$classLoader->register();\r\n\r\n$helpers = array(\r\n    \'db\' => new \\Doctrine\\DBAL\\Tools\\Console\\Helper\\ConnectionHelper($em->getConnection()),\r\n    \'em\' => new \\Doctrine\\ORM\\Tools\\Console\\Helper\\EntityManagerHelper($em),\r\n    \'dialog\' => new \\Symfony\\Component\\Console\\Helper\\DialogHelper(),\r\n);\r\n\r\n$cli = new \\Symfony\\Component\\Console\\Application(\r\n    \'Doctrine Command Line Interface\', \r\n    Doctrine\\ORM\\Version::VERSION\r\n);\r\n$cli->setCatchExceptions(true);\r\n$helperSet = $cli->getHelperSet();\r\nforeach ($helpers as $name => $helper) {\r\n    $helperSet->set($helper, $name);\r\n}\r\n\r\n$cli->addCommands(array(\r\n    // DBAL Commands\r\n    new \\Doctrine\\DBAL\\Tools\\Console\\Command\\RunSqlCommand(),\r\n    new \\Doctrine\\DBAL\\Tools\\Console\\Command\\ImportCommand(),\r\n\r\n    // ORM Commands\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ClearCache\\MetadataCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ClearCache\\ResultCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ClearCache\\QueryCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\SchemaTool\\CreateCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\SchemaTool\\UpdateCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\SchemaTool\\DropCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\EnsureProductionSettingsCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ConvertDoctrine1SchemaCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\GenerateRepositoriesCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\GenerateEntitiesCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\GenerateProxiesCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ConvertMappingCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\RunDqlCommand(),\r\n    new \\Doctrine\\ORM\\Tools\\Console\\Command\\ValidateSchemaCommand(),\r\n    \r\n    // Migrations Commands, remove if not needed\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\DiffCommand(),\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\ExecuteCommand(),\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\GenerateCommand(),\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\MigrateCommand(),\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\StatusCommand(),\r\n    new \\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\VersionCommand(),\r\n));\r\n$cli->run();\r\n</pre>\r\n<p>If you use migrations create ../myapp/scripts/migrations.yml for migration configuration:</p>\r\n<pre class=\"brush: php\">\r\n---\r\nname: Doctrine Migrations\r\nmigrations_namespace: DoctrineMigration\r\ntable_name: ext_migration_versions\r\nmigrations_directory: ../application/configs/Migration\r\n</pre>\r\n<p>Create the shell or batch script(windows) to run it through PHP cli</p>\r\n<p><strong>/myapp/scripts/doctrine.bat</strong> dont forget to modify the <strong>php.exe</strong> path and the <strong>script</strong> location if it difers</p>\r\n<pre class=\"brush: php\">\r\n@echo off\r\necho Running Doctrine CLI.\r\n\"C:\\php\\php.exe\" -f doctrine.php %1 %2 %3 %4 %5 %6 %7 %8 %9\r\n</pre>\r\n<p>For linux users</p>\r\n<p><strong>/myapp/scripts/doctrine.sh</strong> dont forget to modify the <strong>php bin</strong> path if it difers, and run <strong>chmod +x</strong></p>\r\n<pre class=\"brush: php\">\r\n#!/usr/bin/env php\r\nchdir(dirname(__FILE__));\r\ninclude(\'doctrine.php\');\r\n</pre>\r\n<p>Now lets go to the Shell or Command Prompt, go to <strong>/myapp/scripts/</strong> and run these commands:</p>\r\n<p><strong>Notice:</strong> that the last argument(1, 2 commands) is the location of your application</p>\r\n<p><strong>Notice:</strong> before running the third command, database must be created, empty and entities must be created also[first command]</p>\r\n<ul>\r\n	<li>doctrine orm:generate-entities ../application</li>\r\n	<li>doctrine orm:generate-proxies ../application/Proxy</li>\r\n	<li>if you do not use migrations, run create schema: <em>doctrine orm:schema-tool:create</em></li>\r\n	<li>doctrine migrations:diff</li>\r\n	<li>doctrine migrations:migrate</li>\r\n</ul>\r\n<p>After running first command the Entities should be created in the <strong>/application/Entity</strong> directory, \r\nunless you specified another. After running the second would create proxies for the lazy loading.\r\nThen if you used migrations, 3 command would create migration from the entities found and 4 command would migrate to these changes.\r\n</p>\r\n\r\n<p>By this point, we should have everything in place. Lets play around a bit. First, if you have not created\r\nindex controller, create it and modify a bit to test our new stuff, file: <strong>/myapp/application/modules/default/controllers/IndexController.php</strong></p>\r\n<pre class=\"brush: php\">\r\nclass IndexController extends Zend_Controller_Action\r\n{\r\n    protected $_em;\r\n\r\n    public function init()\r\n    {\r\n        $this->_em = Zend_Registry::get(\'em\');\r\n    }\r\n    \r\n    public function indexAction()\r\n    {\r\n        $user = $this->_em->getRepository(\'Entity\\User\')->find(1);\r\n        if (!$user) {\r\n        	// create groups and user only once\r\n            $this->populate();\r\n            $user = $this->_em->getRepository(\'Entity\\User\')->find(1);\r\n        }\r\n        $this->view->user = $user;\r\n    }\r\n    \r\n    public function populate()\r\n    {\r\n        // create Roles\r\n        $guestRole = new Entity\\Role;\r\n        $guestRole->setName(\'guest\');\r\n        $this->_em->persist($guestRole);\r\n        \r\n        $adminRole = new Entity\\Role;\r\n        $adminRole->setName(\'admin\');\r\n        $this->_em->persist($adminRole);\r\n        \r\n        $memberRole = new Entity\\Role;\r\n        $memberRole->setName(\'member\');\r\n        $this->_em->persist($memberRole);\r\n        \r\n        // create users\r\n        $user = new Entity\\User;\r\n        $user->setUsername(\'Master\');\r\n        $user->setPassword(\'secret\');\r\n        $user->setRole($adminRole);\r\n        $this->_em->persist($user);\r\n        \r\n        $this->_em->flush();\r\n    }\r\n}\r\n</pre>\r\n<p>Now if you run index action few groups will be created and an user, which is passed to the view: <strong>/application/modules/default/view/index/index.phtml</strong></p>\r\n<pre class=\"brush: php\">\r\nhello &lt;php? echo $this->user->getUsername(); ?&gt;\r\n</pre>\r\n\r\n<p>Also probably layout is required, create:</p>\r\n<pre class=\"brush: php\">\r\n&lt;!-- FILE: ../myapp/modules/default/views/scripts/layout.phtml -->\r\n&lt;!DOCTYPE html>\r\n&lt;html>\r\n&lt;head>\r\n&lt;/head>\r\n&lt;body>\r\n	&lt;div id=\"content\">\r\n    	&lt;?php echo $this->layout()->content; ?&gt\r\n    &lt;/div>\r\n&lt;/body>\r\n&lt;/html>\r\n</pre>\r\n\r\n<p>If something went wrong or you cannot understand some parts of code, you can <a href=\"/files/myapp.rar\">download</a> the\r\napplication which was made in this example. <strong>Notice:</strong>\r\nthat it will require Zend library in the /myapp/library folder if you do not have it in the include path. Also you will need to adjust the database credentials.</p>\r\n\r\n<p>Thats it. Now you can easily add another features and enjoy the Doctrine 2 on Zend framework</p>\r\n','2010-07-15 22:22:24','doctrine2, doctrine, zend, framework, integrate, boostrap, configuration','How to integrate doctrine2 on zend framework','2010-12-19 00:13:53'),(2,'Build php-5.3.0 - php-5.3.4-dev on Ubuntu server','build-php-5-3-0-php-5-3-4-dev-on-ubuntu-server','<p>This article contains a PHP build script and a quick tutorial\r\non how to compile and setup php-5.3.x version into your server</p>\r\n<p>Steps:</p>\r\n<ul>\r\n    <li>Downloading sources</li>\r\n    <li>Making a configure script</li>\r\n    <li>Building and deploying</li>\r\n</ul>','<p><strong>Notice list:</strong></p>\r\n<ul>\r\n    <li>The PHP was compiled on Ubuntu server 9.10 (Karmic Koala) linux version</li>\r\n    <li>Tested compilation on <strong>PHP-5.3.1, PHP-5.3.2, PHP-5.3.4-dev</strong> versions</li>\r\n    <li>Build script does not contain additional PDO drivers like PostgreSql, MssSql. If you need it search an information on how to include them</li>\r\n    <li>It is possible that I missed to include some library in case if I had it before</li>\r\n    <li>Last update date: <strong>2010-08-16</strong></li>\r\n</ul>\r\n\r\n<p>First of all we need to download the sources of PHP:</p>\r\n<ul>\r\n	<li>Go to <a href=\"http://php.net/releases/index.php\">PHP releases</a> take the sources of php 5.3.x version, better stable and make sure it is thread safe, uless you know what you are doing..</li>\r\n	<li>Here I use the root user, because most operations will require privileges</li>\r\n	<li>Download and then extract (tar xzvf php-5.3.x.tar.gz) into /root/ directory or somethere else..</li>\r\n	<li>No we will need some additional libraries and the development tools before we begin</li>\r\n</ul>\r\n\r\n<p>Run these commands to install tools:</p>\r\n<pre class=\"brush: php\">\r\napt-get install checkinstall\r\n\r\napt-get install apache2 apache2-mpm-prefork apache2-prefork-dev apache2-utils apache2.2-common\r\n\r\napt-get install mysql-client mysql-client-5.1 mysql-common mysql-server mysql-server-5.1 mysql-server-core-5.1\r\n\r\napt-get install apache2-threaded-dev\r\n\r\napt-get install libtidy-dev curl libcurl4-openssl-dev libcurl3 libcurl3-gnutls zlib1g zlib1g-dev libxslt1-dev libzip-dev libzip1 libxml2 libsnmp-base libsnmp15 libxml2-dev libsnmp-dev libjpeg62 libjpeg62-dev libpng12-0 libpng12-dev zlib1g zlib1g-dev libfreetype6 libfreetype6-dev libbz2-dev libxaw7-dev libmcrypt-dev libmcrypt4\r\n</pre>\r\n<p>Next, we will need to make a build script, run <strong>cd php-5.3.x && vi build_php</strong> and insert the configuration script:</p>\r\n<pre class=\"brush: php\">\r\n./configure \\\r\n--with-apxs2=/usr/bin/apxs2 \\\r\n--with-mysql=/usr \\\r\n--with-mysqli=/usr/bin/mysql_config \\\r\n--with-tidy=/usr \\\r\n--with-curl=/usr/bin \\\r\n--with-openssl \\\r\n--with-openssl-dir=/usr \\\r\n--with-kerberos=/usr \\\r\n--with-zlib-dir=/usr \\\r\n--with-xpm-dir=/usr \\\r\n--with-pdo-mysql=/usr \\\r\n--with-xsl=/usr \\\r\n--with-xmlrpc \\\r\n--with-iconv-dir=/usr \\\r\n--with-snmp=/usr \\\r\n--enable-exif \\\r\n--enable-cli \\\r\n--enable-calendar \\\r\n--with-bz2=/usr \\\r\n--with-mcrypt=/usr \\\r\n--with-mhash \\\r\n--with-gd \\\r\n--with-jpeg-dir=/usr \\\r\n--with-png-dir=/usr \\\r\n--with-zlib-dir=/usr \\\r\n--with-freetype-dir=/usr \\\r\n--with-imap \\\r\n--with-imap-ssl \\\r\n--enable-zend-multibyte \\\r\n--enable-mbstring \\\r\n--enable-mbregex \\\r\n--enable-soap \\\r\n--enable-sockets \\\r\n--enable-sysvmsg \\\r\n--enable-sysvsem \\\r\n--enable-sysvshm \\\r\n--enable-zip \\\r\n--enable-ftp \\\r\n--with-pear \\\r\n--disable-debug\r\n</pre>\r\n<p>The build script contains usual tools, like ssl, imap, mbstring, soap..</p>\r\n<p>Next make this script executable: <strong>chmod +x build_php</strong></p>\r\n<p>Now run the <strong>./build_php</strong> to configure our PHP</p>\r\n<p>It can take few minutes, if there will be no errors then it went quite easy and we are allmost done, if there were errors.. then its even more interesting :)</p>\r\n<p>Ok if you succeeded with configuration lets make the php lib, run:</p>\r\n<pre class=\"brush: php\">\r\nmake\r\n</pre>\r\n<p>That can take long, better take a cup of coffee, maybe two if you had problems with configuration</p>\r\n<p>If you have not finished your coffee and want to wait much longer, then you can run tests:</p>\r\n<pre class=\"brush: php\">\r\nmake test\r\n</pre>\r\n<p>Now if the job is done, and make did not throw a fatal error, congrats! you got it!</p>\r\n<p>Now few easy steps to use <strong>Your New PHP</strong>:</p>\r\n<p>Create the new apache module: <strong>vi /etc/apache2/mods-available/php53x.load</strong> and place code to load your php library</p>\r\n<pre class=\"brush: php\">\r\nLoadModule php5_module /root/src/php-5.3.x/libs/libphp5.so\r\n</pre>\r\n<p>Now we will need to configure this module <strong>nano /etc/apache2/mods-available/php53x.conf</strong> and place the code:</p>\r\n<pre class=\"brush: php\">\r\n<IfModule mod_php5.c>\r\n  AddType application/x-httpd-php .php .phtml .php3\r\n  AddType application/x-httpd-php-source .phps\r\n  PHPIniDir /root/src/php-5.3.x/libs\r\n</IfModule>\r\n</pre>\r\n<p><strong>Note:</strong> that we configured to load php.ini from specific directory</p>\r\n<p>And at last and least, disable old php module and enable new. Restart apache after that:</p>\r\n<pre class=\"brush: php\">\r\na2dismod php5\r\n\r\na2enmod php53x\r\n\r\n/etc/init.d/apache2 restart\r\n</pre>\r\n<p>Thats it! You should run the phpInfo(); and enjoy the result :)</p>\r\n','2010-08-16 22:26:47','php5, compile, build, create, ubuntu, linux, php5.3','How to compile php 5.3.x on Ubuntu linux','2010-09-25 17:52:49'),(3,'Translatable behavior extension for Doctrine 2','translatable-behavior-extension-for-doctrine-2','<p><strong>Translatable</strong> behavior offers a very handy solution for translating specific record fields\r\nin diferent languages. Further more, it loads the translations automatically for a locale\r\ncurrently used, which can be set to <strong>Translatable Listener</strong> on it`s initialization or later\r\nfor other cases through the <strong>Entity</strong> itself</p>\r\n\r\n<p>Features:</p>\r\n\r\n<ul>\r\n<li>Automatic storage of translations in database</li>\r\n<li>ORM and ODM support using same listener -Automatic translation of Entity or\r\nDocument fields then loaded</li>\r\n<li>ORM query can use <strong>hint</strong> to translate all records without issuing additional queries</li>\r\n<li>Can be nested with other behaviors</li>\r\n<li>Annotation and Yaml mapping support for extensions</li>\r\n\r\n</ul>','<p>Update <strong>2011-04-16</strong></p>\r\n\r\n<ul>\r\n<li>Made an ORM query <strong>hint</strong> to hook into any select type query, which will join the translations\r\nand let you <strong>filter, order or search</strong> by translated fields directly. It also will translate\r\nall selected <strong>collections or simple components</strong> without issuing additional queries. It also\r\nsupports translation fallbacks</li>\r\n\r\n<li>For performance reasons, translation fallbacks are disabled by default</li>\r\n</ul>\r\n\r\n<p>Update <strong>2011-04-04</strong></p>\r\n\r\n<ul>\r\n<li>Made single listener, one instance can be used for any object manager\r\nand any number of them</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n\r\n<ul>\r\n\r\n<li>You can <a href=\"http://gediminasm.org/test\" title=\"Test extensions on this blog\">test live</a> on this blog </li>\r\n<li>Public <a href=\"http://github.com/l3pp4rd/DoctrineExtensions\" title=\"Translatable extension on Github\">Translatable repository</a> is available on github</li>\r\n<li>Using other extensions on the same Entity fields may result in unexpected way</li>\r\n<li>May inpact your application performace since it does an additional query for translation</li>\r\n<li>Last update date: <strong>2011-04-16</strong></li>\r\n\r\n</ul>\r\n\r\n<p><strong>Portability:</strong></p>\r\n<ul>\r\n	<li><strong>Translatable</strong> is now available as <a href=\"http://github.com/stof/DoctrineExtensionsBundle\" target=\"new\">Bundle</a>\r\n	ported to <strong>Symfony 2</strong> by (<strong>Christophe Coevoet</strong>), together with all other extensions\r\n	</li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Translatable</strong> behavior</p>\r\n<p>Content:</p>\r\n\r\n<ul>\r\n<li><a href=\"#including-extension\">Including</a> the extension</li>\r\n<li><a href=\"#event-listener\">Attaching</a> the <strong>Translatable Listener</strong></li>\r\n\r\n<li>Entity <a href=\"#entity\">example</a></li>\r\n<li>Document <a href=\"#document\">example</a></li>\r\n<li><a href=\"#yaml\">Yaml</a> mapping example</li>\r\n<li>Basic usage <a href=\"#basic-examples\">examples</a></li>\r\n<li>Using ORM query <a href=\"#orm-query-hint\">hint</a></li>\r\n<li>Advanced usage <a href=\"#advanced-examples\">examples</a></li>\r\n\r\n</ul>\r\n\r\n\r\n<h2>Setup and autoloading</h2>\r\n<p>If you using the source from github repository, initial directory structure for\r\nthe extension library should look like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/DoctrineExtensions\r\n    /lib\r\n        /Gedmo\r\n        	/Exception\r\n        	/Mapping\r\n            /Sluggable\r\n            /Timestampable\r\n            /Translatable\r\n            /Tree\r\n    /tests\r\n        ...\r\n...\r\n</pre>\r\n<p>First of all we need to setup the autoloading of extensions:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register();\r\n</pre>\r\n\r\n<p id=\"including-extension\">This behavior requires an additional metadata path to be specified in order to have a translation\r\ntable and translation Entity or Document available. To configure it correctly you need to add new annotation\r\ndriver into driver chain with a specific location and namespace</p>\r\n\r\n<h3>Translation metadata Annotation driver mapped into driver chain:</h3>\r\n\r\n<pre class=\"brush: php\">\r\n$chainDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\DriverChain();\r\n$yourDefaultDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\YamlDriver(\'/yml/mapping/files\');\r\n$translatableDriverImpl = $doctrineOrmConfig->newDefaultAnnotationDriver(\r\n    \'/path/to/library/DoctrineExtensions/lib/Gedmo/Translatable/Entity\' // Document for ODM\r\n);\r\n$chainDriverImpl->addDriver($yourDefaultDriverImpl, \'Entity\');\r\n$chainDriverImpl->addDriver($translatableDriverImpl, \'Gedmo\\Translatable\');\r\n$doctrineOrmConfig->setMetadataDriverImpl($chainDriverImpl);\r\n</pre>\r\n\r\n<p><strong>Notice:</strong> there can be many annotation drivers in driver chain</p>\r\n<p><strong>Notice:</strong> Translation Entity or Document is required for storing all translations.\r\nIf you need a translation table per single Entity or Document, we will cover how to setup it later</p>\r\n\r\n<h3 id=\"event-listener\">Attaching the Translation Listener to the event manager</h3>\r\n\r\n<p>To attach the <strong>Translation Listener</strong> to your event system and to set the translation locale\r\nto be used in global scope for all Entities or Documents:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n// ORM and ODM\r\n$translatableListener = new \\Gedmo\\Translatable\\TranslationListener();\r\n\r\n$translatableListener->setTranslatableLocale(\'en_us\');\r\n// in real world app the locale should be loaded from session, example:\r\n// Session::getInstance()->read(\'locale\');\r\n$evm->addEventSubscriber($translatableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<h3>Translatable annotations:</h3>\r\n<ul>\r\n	<li><strong>@gedmo:Translatable</strong> it will <strong>translate</strong> this field</li>\r\n	<li><strong>@gedmo:TranslationEntity(class=\"my\\class\")</strong> it will use this class to store <strong>translations</strong> generated</li>\r\n	<li><strong>@gedmo:Locale or @gedmo:Language</strong> this will identify this column as <strong>locale</strong> or <strong>language</strong>\r\n	used to override the global locale</li>\r\n</ul>\r\n\r\n<h2 id=\"entity\">Translatable Entity example:</h2>\r\n<p><strong>Notice:</strong> that Translatable interface is not necessary, except in cases there\r\nyou need to identify entity as being Translatable. The metadata is loaded only once then\r\ncache is activated</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\nuse Gedmo\\Translatable\\Translatable;\r\n/**\r\n * @Table(name=\"articles\")\r\n * @Entity\r\n */\r\nclass Article implements Translatable\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @Column(name=\"title\", type=\"string\", length=128)\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @Column(name=\"content\", type=\"text\")\r\n     */\r\n    private $content;\r\n\r\n    /**\r\n     * @gedmo:Locale\r\n     * Used locale to override Translation listener`s locale\r\n     * this is not a mapped field of entity metadata, just a simple property\r\n     */\r\n    private $locale;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n\r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function setContent($content)\r\n    {\r\n        $this->content = $content;\r\n    }\r\n\r\n    public function getContent()\r\n    {\r\n        return $this->content;\r\n    }\r\n\r\n    public function setTranslatableLocale($locale)\r\n    {\r\n        $this->locale = $locale;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"document\">Translatable Document example:</h2>\r\n<pre class=\"brush: php\">\r\nnamespace Document;\r\n\r\nuse Gedmo\\Translatable\\Translatable;\r\n/**\r\n * @Document(collection=\"articles\")\r\n */\r\nclass Article implements Translatable\r\n{\r\n    /** @Id */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @String\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @String\r\n     */\r\n    private $content;\r\n\r\n    /**\r\n     * @gedmo:Locale\r\n     * Used locale to override Translation listener`s locale\r\n     * this is not a mapped field of entity metadata, just a simple property\r\n     */\r\n    private $locale;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n\r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function setContent($content)\r\n    {\r\n        $this->content = $content;\r\n    }\r\n\r\n    public function getContent()\r\n    {\r\n        return $this->content;\r\n    }\r\n\r\n    public function setTranslatableLocale($locale)\r\n    {\r\n        $this->locale = $locale;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"yaml\">Yaml mapping example</h2>\r\n\r\n<p>Yaml mapped Article: <strong>/mapping/yaml/Entity.Article.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Article:\r\n  type: entity\r\n  table: articles\r\n  gedmo:\r\n    translation:\r\n      locale: localeField\r\n# using specific personal translation class:\r\n#     entity: Translatable\\Fixture\\CategoryTranslation\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n      gedmo:\r\n        - translatable\r\n    content:\r\n      type: text\r\n      gedmo:\r\n        - translatable\r\n</pre>\r\n\r\n<h2 id=\"basic-examples\">Basic usage examples:</h2>\r\n\r\n<p>Currently a global locale used for translations is \"en_us\" which was\r\nset in <strong>TranslationListener</strong> globaly. To save article with its translations:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$article = new Entity\\Article;\r\n$article->setTitle(\'my title in en\');\r\n$article->setContent(\'my content in en\');\r\n$em->persist($article);\r\n$em->flush();\r\n</pre>\r\n\r\n<p>This inserted an article and inserted the translations for it in \"en_us\" locale</p>\r\n<p>Now lets update our article in diferent locale:</p>\r\n\r\n<pre class=\"brush: php\">\r\n// first load the article\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$article->setTitle(\'my title in de\');\r\n$article->setContent(\'my content in de\');\r\n$article->setTranslatableLocale(\'de_de\'); // change locale\r\n$em->persist($article);\r\n$em->flush();\r\n</pre>\r\n\r\n<p>This updated an article and inserted the translations for it in \"de_de\" locale</p>\r\n<p>To see and load all translations of <strong>Translatable</strong> Entity:</p>\r\n\r\n<pre class=\"brush: php\">\r\n// reload in different language\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$article->setLocale(\'ru_ru\');\r\n$em->refresh($article);\r\n</pre>\r\n\r\n<pre class=\"brush: php\">\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$repository = $em->getRepository(\'Gedmo\\Translatable\\Entity\\Translation\');\r\n$translations = $repository->findTranslations($article);\r\n/* $translations contains:\r\nArray (\r\n    [de_de] => Array\r\n        (\r\n            [title] => my title in de\r\n            [content] => my content in de\r\n        )\r\n\r\n    [en_us] => Array\r\n        (\r\n            [title] => my title in en\r\n            [content] => my content in en\r\n        )\r\n)*/\r\n</pre>\r\n\r\n<p>As far as our global locale is now \"en_us\" and updated article has \"de_de\" values.\r\nLets try to load it and it should be translated in English</p>\r\n\r\n<pre class=\"brush: php\">\r\n$article = $em->getRepository(\'Entity\\Article\')->find(1/* id of article */);\r\necho $article->getTitle();\r\n// prints: \"my title in en\"\r\necho $article->getContent();\r\n// prints: \"my content in en\"\r\n</pre>\r\n\r\n<h2 id=\"orm-query-hint\">Using ORM query hint</h2>\r\n\r\n<p>By default, behind the scenes, when you load a record - translatable hooks into <strong>postLoad</strong>\r\n\r\nevent and issues additional query to translate all fields. Imagine that when you load a collection,\r\nwhen it issues a lot of queries just to translate those fields. Also if you want to hydrate\r\nresult as an <strong>array</strong>, it is not possible to hook any <strong>postLoad</strong> event since it is not an\r\nentity being hydrated. These are the main reason why <strong>TranslationWalker</strong> was born.</p>\r\n\r\n<p><strong>TranslationWalker</strong> uses a query <strong>hint</strong> to hook into any <strong>select type query</strong>,\r\nand when you execute the query, no matter which hydration method you use, it automatically\r\njoins the translations for all fields, so you could use ordering filtering or whatever you\r\nwant on <strong>translations of the fields</strong> instead of original record fields.</p>\r\n\r\n<p>And in result there is only one query for all this happyness.</p>\r\n\r\n<p>If you use translation <a href=\"#advanced-examples\">fallbacks</a> it will be also in the same single\r\nquery and during the hydration process it will replace the empty fields in case if they\r\ndo not have a translation in currently used locale.</p>\r\n\r\n<p>Now enough talking, here is an example:</p>\r\n<pre class=\"brush: php\">\r\n    $dql = \"SELECT a, c, u FROM Article a \"\r\n     . \"LEFT JOIN a.comments c \"\r\n     . \"JOIN c.author u \"\r\n     . \"WHERE a.title LIKE \'%translated_title%\' \"\r\n     . \"ORDER BY a.title\";\r\n\r\n$query = $em-&gt;createQuery($dql);\r\n// set the translation query hint\r\n$query-&gt;setHint(\r\n    \\Doctrine\\ORM\\Query::HINT_CUSTOM_OUTPUT_WALKER,\r\n    \'Gedmo\\\\Translatable\\\\Query\\\\TreeWalker\\\\TranslationWalker\'\r\n);\r\n\r\n$articles = $query-&gt;getResult(); // object hydration\r\n$articles = $query-&gt;getArrayResult(); // array hydration\r\n</pre>\r\n\r\n<p>Theres no need for any words anymore.. right?\r\nI recommend you to use it extensively since it is a way better performance, even in\r\ncases where you need a single object query.</p>\r\n\r\n<p>Notice: Even in <strong>COUNT</strong> select statements translations are joined to leave a\r\npossibility to filter by translated field, if you do not need it, just do not set\r\nthe <strong>hint</strong>. Also take into account that it is not possibble to translate components\r\nin <strong>JOIN WITH</strong> statement, example <code>JOIN a.comments c WITH c.message LIKE \'%will_not_be_translated%\'</code></p>\r\n\r\n<p>Notice: any <strong>find</strong> related method calls cannot hook this hint automagically, we\r\nwill use a different approach when <strong>persister overriding feature</strong> will be\r\navailable in <strong>Doctrine</strong></p>\r\n\r\n<h2 id=\"advanced-examples\">Advanced examples:</h2>\r\n\r\n<h3>Default locale</h3>\r\n\r\n<p>In some cases we need a default translation as a fallback if record does not have\r\na translation on globaly used locale. In that case Translation Listener takes the\r\ncurrent value of Entity. But there is a way to specify a <strong>default locale</strong>\r\nwhich would force Entity to not update it`s field if current locale is not a default</p>\r\n\r\n<p>To set the default locale:</p>\r\n<pre class=\"brush: php\">\r\n$translationListener->setDefaultLocale(\'en_us\');\r\n</pre>\r\n<p>Default locale should be set on the <strong>TranslationListener</strong> initialization\r\nonce, since it can impact your current records if it will be changed.</p>\r\n\r\n<h3>Translation Entity</h3>\r\n\r\n<p>In some cases if there are thousands of records or even more.. we would like to\r\nhave a single table for translations of this Entity in order to increase the performance\r\non translation loading speed. This example will show how to specify a diferent Entity for\r\nyour translations by extending the mapped superclass.</p>\r\n\r\n<p>ArticleTranslation Entity:</p>\r\n\r\n<pre class=\"brush: php\">\r\nnamespace Entity\\Translation;\r\n\r\nuse Gedmo\\Translatable\\Entity\\AbstractTranslation;\r\n\r\n/**\r\n * @Table(name=\"article_translations\", indexes={\r\n *      @index(name=\"article_translation_idx\", columns={\"locale\", \"objectClass\", \"foreign_key\", \"field\"})\r\n * })\r\n * @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\")\r\n */\r\nclass ArticleTranslation extends AbstractTranslation\r\n{\r\n    /**\r\n     * All required columns are mapped through inherited superclass\r\n     */\r\n}\r\n</pre>\r\n\r\n<p><strong>Notice:</strong> We specified the repository class to be used from extension.\r\nIt is handy for specific methods common to the Translation Entity</p>\r\n\r\n<p><strong>Notice:</strong> This Entity will be used instead of default Translation Entity\r\nonly if we specify a class annotation @gedmo:TranslationEntity(class=\"my\\translation\\entity\"):</p>\r\n\r\n<pre class=\"brush: php\">\r\n/**\r\n * @Table(name=\"articles\")\r\n * @Entity\r\n * @gedmo:TranslationEntity(class=\"Entity\\Translation\\ArticleTranslation\")\r\n */\r\nclass Article\r\n{\r\n    // ...\r\n}\r\n</pre>\r\n\r\n<p>Now all translations of Article will be stored and queried from specific table</p>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2010-09-25 22:12:33',NULL,'Translatable extension for Doctrine 2 makes automatic record field translations and their loading depending on language used','2011-04-16 17:01:28'),(4,'Sluggable behavior extension for Doctrine 2','sluggable-behavior-extension-for-doctrine-2','<p><strong>Sluggable</strong> behavior will build the slug of predefined fields on a given field\r\nwhich should store the slug. Also this behavior can be nested with <strong>Translatable</strong>\r\nbehavior to translate the generated slugs into diferent languages.</p>\r\n	<p>Features:</p>\r\n	<ul>\r\n	    <li>Automatic predifined field transformation into slug</li>\r\n	    <li>ORM and ODM support</li>\r\n	    <li>Slugs can be unique and styled</li>\r\n	    <li>Can be nested with other behaviors</li>\r\n	    <li>Annotation and Yaml mapping support for extensions</li>\r\n	</ul>','<p>Update <strong>2011-02-02</strong></p>\r\n<ul>\r\n    <li>Implemented ODM listener</li>\r\n    <li>Fixed an unique slug generation</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-12-23</strong></p>\r\n<ul>\r\n    <li>Full support for unique index on slug field,\r\n    no more exceptions during concurrent flushes.</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-12-14</strong></p>\r\n<ul>\r\n    <li>Implemented extension for additional metadata mapping. Currently these extensions\r\n    supports <strong>annotation</strong> and <strong>yaml</strong> metadata mapping. For\r\n    usage examples read the blog further or check the unit tests and mapping drivers.</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-11-14</strong></p>\r\n<ul>\r\n	<li>In order to share these extensions among other, the extension namespace had to be\r\n	changed and now it is <strong>Gedmo</strong>. All annotations in these extensions now\r\n	have the same namespace and starts with - <strong>@gedmo:</strong>. This allows to use\r\n	many diferent extensions on single application from any source vendors. I hope this\r\n	will be a good practise for other developers..</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-11-13</strong></p>\r\n<ul>\r\n	<li>Changed the annotations for all extensions to match same pattern</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-11-08</strong></p>\r\n<ul>\r\n	<li>The <strong>Sluggable</strong> has changed and now it reads annotations, and the interface is not necessary anymore</li>\r\n	<li>The annotation metadata is properly cached</li>\r\n	<li>Removed the length option, since slug field covers it, added some restrictions to avoid missconfiguration</li>\r\n	<li>Entities are not aggregated anymore, only with annotations</li>\r\n	<li>Since these changes, you need to checkout latest ORM at master branch. If your ORM is older than 2010-11-05 also update you Doctrine 2 Common library</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n<ul>\r\n    <li>You can <a href=\"/test\" title=\"Test extensions\">test live</a> on this blog</li>\r\n    <li>Public <a href=\"http://github.com/l3pp4rd/DoctrineExtensions\" title=\"Sluggable extension on Github\">Sluggable repository</a> is available on github</li>\r\n    <li>Last update date: <strong>2011-02-02</strong></li>\r\n</ul>\r\n\r\n<p><strong>Portability:</strong></p>\r\n<ul>\r\n	<li><strong>Sluggable</strong> is now available as <a href=\"http://github.com/stof/DoctrineExtensionsBundle\" target=\"new\">Bundle</a>\r\n	ported to <strong>Symfony 2</strong> by (<strong>Christophe Coevoet</strong>), together with all other extensions\r\n	</li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Sluggable</strong> behavior</p>\r\n<p>Content:</p>\r\n<ul>\r\n    <li><a href=\"#including-extension\">Including</a> the extension</li>\r\n    <li><a href=\"#event-listener\">Attaching</a> the <strong>Sluggable Listener</strong></li>\r\n    <li>Entity <a href=\"#entity\">example</a></li>\r\n    <li>Document <a href=\"#document\">example</a></li>\r\n    <li><a href=\"#yaml\">Yaml</a> mapping example</li>\r\n    <li>Basic usage <a href=\"#basic-examples\">examples</a></li>\r\n    <li>Advanced usage <a href=\"#advanced-examples\">examples</a></li>\r\n</ul>\r\n\r\n<h2 id=\"including-extension\">Setup and autoloading</h2>\r\n<p>If you using the source from github repository, initial directory structure for \r\nthe extension library should look like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/DoctrineExtensions\r\n    /lib\r\n        /Gedmo\r\n        	/Exception\r\n        	/Mapping\r\n            /Sluggable\r\n            /Timestampable\r\n            /Translatable\r\n            /Tree\r\n    /tests\r\n        ...\r\n...\r\n</pre>\r\n<p>First of all we need to setup the autoloading of extensions:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register();\r\n</pre>\r\n\r\n<h3 id=\"event-listener\">Attaching the Sluggable Listener to the event manager</h3>\r\n\r\n<p>To attach the <strong>Sluggable Listener</strong> to your event system:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n// ORM\r\n$sluggableListener = new \\Gedmo\\Sluggable\\SluggableListener();\r\n// ODM\r\n$sluggableListener = new \\Gedmo\\Sluggable\\ODM\\MongoDB\\SluggableListener();\r\n\r\n$evm->addEventSubscriber($sluggableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<h2 id=\"entity\">Sluggable Entity example:</h2>\r\n\r\n<h3>Sluggable annotations:</h3>\r\n<ul>\r\n	<li><strong>@gedmo:Sluggable</strong> it will include this field into <strong>slug</strong> generation</li>\r\n	<li><strong>@gedmo:Slug</strong> it will use this column to store <strong>slug</strong> generated</li>\r\n</ul>\r\n\r\n<p><strong>Notice:</strong> that Sluggable interface is not necessary, except in cases there\r\nyou need to identify entity as being Sluggable. The metadata is loaded only once then\r\ncache is activated</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Table(name=\"articles\")\r\n * @Entity\r\n */\r\nclass Article\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Sluggable\r\n     * @Column(name=\"title\", type=\"string\", length=64)\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:Sluggable\r\n     * @Column(name=\"code\", type=\"string\", length=16)\r\n     */\r\n    private $code;\r\n    \r\n    /**\r\n     * @gedmo:Slug\r\n     * @Column(name=\"slug\", type=\"string\", length=128, unique=true)\r\n     */\r\n    private $slug;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function setCode($code)\r\n    {\r\n        $this->code = $code;\r\n    }\r\n\r\n    public function getCode()\r\n    {\r\n        return $this->code;\r\n    }\r\n    \r\n    public function getSlug()\r\n    {\r\n        return $this->slug;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"document\">Sluggable Document example:</h2>\r\n<pre class=\"brush: php\">\r\nnamespace Document;\r\n\r\n/** \r\n * @Document(collection=\"articles\")\r\n */\r\nclass Article\r\n{\r\n    /** @Id */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Sluggable\r\n     * @String\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:Sluggable\r\n     * @String\r\n     */\r\n    private $code;\r\n    \r\n    /**\r\n     * @gedmo:Slug\r\n     * @String\r\n     */\r\n    private $slug;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function setCode($code)\r\n    {\r\n        $this->code = $code;\r\n    }\r\n\r\n    public function getCode()\r\n    {\r\n        return $this->code;\r\n    }\r\n    \r\n    public function getSlug()\r\n    {\r\n        return $this->slug;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"yaml\">Yaml mapping example</h2>\r\n\r\n<p>Yaml mapped Article: <strong>/mapping/yaml/Entity.Article.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Article:\r\n  type: entity\r\n  table: articles\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n      gedmo:\r\n        - sluggable\r\n    code:\r\n      type: string\r\n      length: 16\r\n      gedmo:\r\n        - sluggable\r\n    slug:\r\n      type: string\r\n      length: 128\r\n      gedmo:\r\n        slug:\r\n          separator: _\r\n          style: camel\r\n# or simply:\r\n#       - slug\r\n  indexes:\r\n    search_idx:\r\n      columns: slug\r\n</pre>\r\n\r\n<h2 id=\"basic-examples\">Basic usage examples:</h2>\r\n\r\n<h3>To save <strong>Article</strong> and generate slug simply use:</h3>\r\n\r\n<pre class=\"brush: php\">\r\n$article = new Article();\r\n$article->setTitle(\'the title\');\r\n$article->setCode(\'my code\');    \r\n$this->em->persist($article);\r\n$this->em->flush();\r\n\r\necho $article->getSlug();\r\n// prints: the-title-my-code\r\n</pre>\r\n\r\n<h3>Some other configuration options:</h3>\r\n<ul>\r\n	<li><strong>updatable</strong> (optional, default=true) - <strong>true</strong> to update the slug on sluggable field changes, <strong>false</strong> - otherwise</li>\r\n	<li><strong>unique</strong> (optional, default=true) - <strong>true</strong> if slug should be unique and if identical it will be prefixed, <strong>false</strong> - otherwise</li>\r\n	<li><strong>separator</strong> (optional, default=\"-\") - separator which will separate words in slug</li>\r\n	<li><strong>style</strong> (optional, default=\"default\") - <strong>\"default\"</strong> all letters will be lowercase, <strong>\"camel\"</strong> - first word letter will be uppercase</li>\r\n</ul>\r\n<pre class=\"brush: php\">\r\nclass Article\r\n{\r\n    // ...\r\n    /**\r\n     * @gedmo:Slug(style=\"camel\", separator=\"_\", updatable=false, unique=false)\r\n     * @Column(name=\"slug\", type=\"string\", length=128, unique=true)\r\n     */\r\n    private $slug;\r\n    // ...\r\n}\r\n</pre>\r\n\r\n<p>And now test the result:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$article = new Article();\r\n$article->setTitle(\'the title\');\r\n$article->setCode(\'my code\');    \r\n$this->em->persist($article);\r\n$this->em->flush();\r\n\r\necho $article->getSlug();\r\n// prints: The_Title_My_Code\r\n</pre>\r\n\r\n<h2 id=\"advanced-examples\">Advanced examples:</h2>\r\n\r\n<h3>Using TranslationListener to translate our slug</h3>\r\n\r\n<p>If you want to attach <strong>TranslationListener</strong> also add it to EventManager after\r\nthe <strong>SluggableListener</strong>. It is important because slug must be generated first\r\nbefore the creation of it`s translation.</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n$sluggableListener = new \\Gedmo\\Sluggable\\SluggableListener();\r\n$evm->addEventSubscriber($sluggableListener);\r\n$translatableListener = new \\Gedmo\\Translatable\\TranslationListener();\r\n$translatableListener->setTranslatableLocale(\'en_us\');\r\n$evm->addEventSubscriber($translatableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<p>And the Entity should look like:</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Table(name=\"articles\")\r\n * @Entity\r\n */\r\nclass Article\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @gedmo:Sluggable\r\n     * @Column(name=\"title\", type=\"string\", length=64)\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @gedmo:Sluggable\r\n     * @Column(name=\"code\", type=\"string\", length=16)\r\n     */\r\n    private $code;\r\n    \r\n    /**\r\n     * @gedmo:Translatable\r\n     * @gedmo:Slug\r\n     * @Column(name=\"slug\", type=\"string\", length=128, unique=true)\r\n     */\r\n    private $slug;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function setCode($code)\r\n    {\r\n        $this->code = $code;\r\n    }\r\n\r\n    public function getCode()\r\n    {\r\n        return $this->code;\r\n    }\r\n    \r\n    public function getSlug()\r\n    {\r\n        return $this->slug;\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Now the generated slug will be translated by Translatable behavior</p>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2010-09-26 12:43:59',NULL,'Sluggable extension for Doctrine 2 makes automatic record field transformations into url friendly names','2011-02-02 01:51:53'),(5,'Smarty 3 extension for Zend Framework','smarty-3-extension-for-zend-framework','<p><strong>Smarty 3</strong> extension is easy to integrate and with full compatibility\r\n	of view and layout templates which supports all standard features like modules and view\r\n	rendering in ajax, json, xml. All helpers with Smarty 3 are working nicely without any\r\n	intervention.</p>\r\n	<p>Features:</p>\r\n	<ul>\r\n	    <li>Layout and view rendering by standard rules</li>\r\n	    <li>Static template path for each module</li>\r\n	    <li>All helper support including ajax, json, xml contexts</li>\r\n	</ul>','<p>Update <strong>2010-10-30</strong></p>\r\n<ul>\r\n	<li>Added support for partials using smarty view, clone of view was updated</li>\r\n	<li>Removed dependency on config storage on bootstrap</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n<ul>\r\n    <li>You can download full aplication <a href=\"http://gediminasm.org/files/smarty.rar\" title=\"Smarty 3 Zend application\">sources here</a>.\r\n    Notice: that Zend library must be in your include path or /library directory.</li>\r\n    <li>Last update date: <strong>2010-10-30</strong></li>\r\n    <li>This extension will only work with <strong>Smarty 3</strong> version</li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Smarty 3</strong> extension</p>\r\n<p>Content:</p>\r\n<ul>\r\n    <li><a href=\"#including-smarty\">Preparing</a> the smarty library</li>\r\n    <li>Setting up the application <a href=\"#ini\">configuration</a></li>\r\n    <li>Smarty 3 view <a href=\"#boot\">bootstrap</a></li>\r\n    <li>Seeing it in <a href=\"#action\">action</a></li>\r\n</ul>\r\n\r\n<h2 id=\"including-smarty\">Downloading Smarty 3</h2>\r\n<p>First of all we will need to download Smarty 3:</p>\r\n<ul>\r\n	<li>Go to the smarty <a href=\"http://www.smarty.net/download.php\">downloads</a></li>\r\n	<li>Select and download the latest smarty 3 release</li>\r\n	<li>Extract it and copy contents of directory <b>libs</b> into <b>/myapp/library/Smarty/</b></li>\r\n</ul>\r\n<p>After doing that your application structure should look something like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/myapp\r\n    /application\r\n        /configs\r\n            application.ini\r\n        /modules\r\n        Bootstrap.php\r\n    /library\r\n        /Smarty\r\n            /plugins\r\n            /sysplugins\r\n            /debug.tpl\r\n            /Smarty.class.php\r\n    /public\r\n...\r\n</pre>\r\n\r\n<h2 id=\"ini\">Setting up the application.ini configuration</h2>\r\n\r\n<p>For good practise we will use modules. Your basic configuration can look like:</p>\r\n\r\n<pre class=\"brush: php\">\r\n[production]\r\nphpSettings.display_startup_errors = 0\r\nphpSettings.display_errors = 0\r\n\r\nbootstrap.path = APPLICATION_PATH \"/Bootstrap.php\"\r\nbootstrap.class = \"Bootstrap\"\r\n\r\nresources.frontController.moduleDirectory = APPLICATION_PATH \"/modules\"\r\nresources.frontController.moduleDefault = \"default\"\r\n\r\nresources.layout.layout = \"layout\"\r\nresources.view[] =\r\n\r\n; --- Autoloading Prefixes ---\r\n\r\nautoloaderNamespaces.extension[] = \"Ext_\"\r\n\r\n; --- Smarty ---\r\n\r\nsmarty.caching = 1\r\nsmarty.cache_lifetime = 14400 ; 4 hours\r\nsmarty.template_dir = APPLICATION_PATH \"/templates/\"\r\nsmarty.compile_dir = APPLICATION_PATH \"/tmp/smarty_compile/\"\r\nsmarty.config_dir = \"\"\r\nsmarty.cache_dir = APPLICATION_PATH \"/tmp/smarty_cache/\"\r\nsmarty.left_delimiter = \"{\"\r\nsmarty.right_delimiter = \"}\"\r\n\r\n[staging : production]\r\n\r\n[testing : production]\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\n\r\n[development : production]\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\nresources.frontController.params.displayExceptions = 1\r\n\r\nsmarty.caching = 0\r\n</pre>\r\n\r\n<p>This configuration will enable the layout and set the default smarty settings.\r\nAlso you will require to add /tmp directory in your application catalog. The prefix\r\nautoloader was configured also, which should be available in /library directory.</p>\r\n\r\n<p>After some modifications you should have structure like:</p>\r\n\r\n<pre class=\"brush: php\">\r\n...\r\n/myapp\r\n    /application\r\n        /configs\r\n            application.ini\r\n        /modules\r\n        	/default\r\n        		/controllers\r\n        			...\r\n        	    /views\r\n        	    	...\r\n        /tmp\r\n        Bootstrap.php\r\n    /library\r\n        /Smarty\r\n            /plugins\r\n            /sysplugins\r\n            /debug.tpl\r\n            /Smarty.class.php\r\n        /Ext\r\n    /public\r\n...\r\n</pre>\r\n\r\n<h2 id=\"view\">Now the most important: Smarty View class</h2>\r\n\r\n<p>I won`t go into details about Zend View and it`s functionality, but to have\r\nour template engine we will need to create our View class which will no how\r\nto assign variables to smarty and how to render the templates. So in your\r\nlibrary extension /Ext which has prefix autoloader, create the directory <strong>View</strong>\r\nwhich will contain file Smarty.php</p>\r\n\r\n<pre class=\"brush: php\">\r\n/**\r\n * Smarty template engine integration into Zend Framework\r\n * Some ideas borrowed from http://devzone.zend.com/article/120\r\n */\r\n\r\nclass Ext_View_Smarty extends Zend_View_Abstract\r\n{\r\n    /**\r\n     * Instance of Smarty\r\n     * @var Smarty\r\n     */\r\n    protected $_smarty = null;\r\n    \r\n    /**\r\n     * Template explicitly set to render in this view\r\n     * @var string \r\n     */\r\n    protected $_customTemplate = \'\';\r\n    \r\n    /**\r\n     * Smarty config\r\n     * @var array\r\n     */\r\n    private $_config = null;\r\n\r\n    /**\r\n     * Class definition and constructor\r\n     *\r\n     * Let\'s start with the class definition and the constructor part. My class Travello_View_Smarty is extending the Zend_View_Abstract class. In the constructor the parent constructor from Zend_View_Abstract is called first. After that a Smarty object is instantiated, configured and stored in a private attribute.\r\n     * Please note that I use a configuration object from the object store to get the configuration data for Smarty. \r\n     * \r\n     * @param array $smartyConfig\r\n     * @param array $config\r\n     */\r\n	public function __construct($smartyConfig, $config = array())\r\n    {\r\n    	$this->_config = $smartyConfig;\r\n        parent::__construct($config);        \r\n        $this->_loadSmarty();\r\n    }\r\n\r\n    /**\r\n     * Return the template engine object\r\n     *\r\n     * @return Smarty\r\n     */\r\n    public function getEngine()\r\n    {\r\n        return $this->_smarty;\r\n    }\r\n    \r\n    /**\r\n     * Implement _run() method\r\n     *\r\n     * The method _run() is the only method that needs to be implemented in any subclass of Zend_View_Abstract. It is called automatically within the render() method. My implementation just uses the display() method from Smarty to generate and output the template.\r\n     *\r\n     * @param string $template\r\n     */\r\n    protected function _run()\r\n    {\r\n        $file = func_num_args() > 0 && file_exists(func_get_arg(0)) ? func_get_arg(0) : \'\';\r\n        if ($this->_customTemplate || $file) {\r\n            $template = $this->_customTemplate;\r\n            if (!$template) {\r\n                $template = $file;\r\n            }\r\n\r\n            $this->_smarty->display($template);\r\n        } else {\r\n            throw new Zend_View_Exception(\'Cannot render view without any template being assigned or file does not exist\');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Overwrite assign() method\r\n     *\r\n     * The next part is an overwrite of the assign() method from Zend_View_Abstract, which works in a similar way. The big difference is that the values are assigned to the Smarty object and not to the $this->_vars variables array of Zend_View_Abstract.\r\n     *\r\n     * @param string|array $var\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function assign($var, $value = null)\r\n    {\r\n        if (is_string($var)) {\r\n            $this->_smarty->assign($var, $value);\r\n        } elseif (is_array($var)) {\r\n            foreach ($var as $key => $value) {\r\n                $this->assign($key, $value);\r\n            }\r\n        } else {\r\n            throw new Zend_View_Exception(\'assign() expects a string or array, got \'.gettype($var));\r\n        }\r\n        return $this;\r\n    }\r\n\r\n    /**\r\n     * Overwrite escape() method\r\n     *\r\n     * The next part is an overwrite of the escape() method from Zend_View_Abstract. It works both for string and array values and also uses the escape() method from the Zend_View_Abstract. The advantage of this is that I don\'t have to care about each value of an array to get properly escaped.\r\n     *\r\n     * @param mixed $var\r\n     * @return mixed\r\n     */\r\n    public function escape($var)\r\n    {\r\n        if (is_string($var)) {\r\n            return parent::escape($var);\r\n        } elseif (is_array($var)) {\r\n            foreach ($var as $key => $val) {\r\n                $var[$key] = $this->escape($val);\r\n            }\r\n        }\r\n        return $var;\r\n    }\r\n\r\n    /**\r\n     * Print the output\r\n     *\r\n     * The next method output() is a wrapper on the render() method from Zend_View_Abstract. It just sets some headers before printing the output.\r\n     *\r\n     * @param <type> $name\r\n     */\r\n    public function output($name)\r\n    {\r\n        header(\"Expires: Mon, 26 Jul 1997 05:00:00 GMT\");\r\n        header(\"Cache-Control: no-cache\");\r\n        header(\"Pragma: no-cache\");\r\n        header(\"Cache-Control: post-check=0, pre-check=0\", false);\r\n\r\n        print parent::render($name);\r\n    }\r\n\r\n    /**\r\n     * Use Smarty caching\r\n     *\r\n     * The last two methods were created to simply integrate the Smarty caching mechanism in the View class. With the first one you can check for cached template and with the second one you can set the caching on or of.\r\n     *\r\n     * @param string $template\r\n     * @return bool\r\n     */\r\n    public function isCached($template)\r\n    {\r\n        return $this->_smarty->is_cached($template);\r\n    }\r\n\r\n    /**\r\n     * Enable/disable caching\r\n     *\r\n     * @param bool $caching\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function setCaching($caching)\r\n    {\r\n        $this->_smarty->caching = $caching;\r\n        return $this;\r\n    }\r\n\r\n    /**\r\n     * Template getter (return file path)\r\n     * @return string\r\n     */\r\n    public function getTemplate()\r\n    {\r\n        return $this->_customTemplate;\r\n    }\r\n\r\n    /**\r\n     * Template filename setter\r\n     * @param string\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function setTemplate($tpl)\r\n    {\r\n        $this->_customTemplate = $tpl;\r\n        return $this;\r\n    }\r\n\r\n    /**\r\n     * Magic setter for Zend_View compatibility. Performs assign()\r\n     *\r\n     * @param string $key\r\n     * @param mixed $val\r\n     */\r\n    public function __set($key, $val)\r\n    {\r\n        $this->assign($key, $val);\r\n    }\r\n\r\n\r\n    /**\r\n     * Magic getter for Zend_View compatibility. Retrieves template var\r\n     *\r\n     * @param string $key\r\n     * @return mixed\r\n     */\r\n    public function __get($key)\r\n    {\r\n        return $this->_smarty->getTemplateVars($key);\r\n    }\r\n    \r\n    /**\r\n     * Magic getter for Zend_View compatibility. Removes template var\r\n     * \r\n     * @see View/Zend_View_Abstract::__unset()\r\n     * @param string $key\r\n     */\r\n    public function __unset($key)\r\n    {\r\n        $this->_smarty->clearAssign($key);\r\n    }\r\n    \r\n    /**\r\n     * Allows testing with empty() and isset() to work\r\n     * Zend_View compatibility. Checks template var for existance\r\n     *\r\n     * @param string $key\r\n     * @return boolean\r\n     */\r\n    public function __isset($key)\r\n    {\r\n        return (null !== $this->_smarty->getTemplateVars($key));\r\n    }\r\n\r\n    /**\r\n     * Zend_View compatibility. Retrieves all template vars\r\n     * \r\n     * @see Zend_View_Abstract::getVars()\r\n     * @return array\r\n     */\r\n	public function getVars()\r\n    {\r\n        return $this->_smarty->getTemplateVars();\r\n    }\r\n    \r\n    /**\r\n     * Updates Smarty\'s template_dir field with new value\r\n     *\r\n     * @param string $dir\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function setTemplateDir($dir)\r\n    {\r\n        $this->_smarty->setTemplateDir($dir);\r\n        return $this;\r\n    }\r\n    \r\n    /**\r\n     * Adds another Smarty template_dir to scan for templates\r\n     *\r\n     * @param string $dir\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function addTemplateDir($dir)\r\n    {\r\n        $this->_smarty->addTemplateDir($dir);\r\n        return $this;\r\n    }\r\n    \r\n    /**\r\n     * Adds another Smarty plugin directory to scan for plugins\r\n     *\r\n     * @param string $dir\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function addPluginDir($dir)\r\n    {\r\n        $this->_smarty->addPluginsDir($dir);\r\n        return $this;\r\n    }\r\n    \r\n    /**\r\n     * Zend_View compatibility. Removes all template vars\r\n     * \r\n     * @see View/Zend_View_Abstract::clearVars()\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function clearVars()\r\n    {\r\n        $this->_smarty->clearAllAssign();\r\n        $this->assign(\'this\', $this);\r\n        return $this;\r\n    }\r\n    \r\n    /**\r\n     * Zend_View compatibility. Add the templates dir\r\n     * \r\n     * @see View/Zend_View_Abstract::addBasePath()\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function addBasePath($path, $classPrefix = \'Zend_View\')\r\n    {\r\n        parent::addBasePath($path, $classPrefix);\r\n        $this->addScriptPath($path . \'/templates\');\r\n        $this->addTemplateDir($path . \'/templates/static\');\r\n        return $this;\r\n    }\r\n    \r\n    /**\r\n     * Zend_View compatibility. Set the templates dir instead of scripts\r\n     * \r\n     * @see View/Zend_View_Abstract::setBasePath()\r\n     * @return Ext_View_Smarty\r\n     */\r\n    public function setBasePath($path, $classPrefix = \'Zend_View\')\r\n    {\r\n        parent::setBasePath($path, $classPrefix);\r\n        $this->setScriptPath($path . \'/templates\');\r\n        $this->addTemplateDir($path . \'/templates/static\');\r\n        return $this;\r\n    }\r\n    \r\n	/**\r\n     * Magic clone method, on clone create diferent smarty object\r\n     */\r\n    public function __clone() {\r\n        $this->_loadSmarty();\r\n    }\r\n    \r\n	/**\r\n     * Initializes the smarty and populates config params\r\n     * \r\n     * @throws Zend_View_Exception\r\n     * @return void\r\n     */\r\n    private function _loadSmarty()\r\n    {\r\n        if (!class_exists(\'Smarty\', true)) {\r\n            require_once \'Smarty/Smarty.class.php\';\r\n        }\r\n        \r\n        $this->_smarty = new Smarty();\r\n\r\n        if ($this->_config === null) {\r\n            throw new Zend_View_Exception(\"Could not locate Smarty config - node \'smarty\' not found\");\r\n        }\r\n\r\n        $this->_smarty->caching = $this->_config[\'caching\'];\r\n        $this->_smarty->cache_lifetime = $this->_config[\'cache_lifetime\'];\r\n        $this->_smarty->template_dir = $this->_config[\'template_dir\'];\r\n        $this->_smarty->compile_dir = $this->_config[\'compile_dir\'];\r\n        $this->_smarty->config_dir = $this->_config[\'config_dir\'];\r\n        $this->_smarty->cache_dir = $this->_config[\'cache_dir\'];\r\n        $this->_smarty->left_delimiter = $this->_config[\'left_delimiter\'];\r\n        $this->_smarty->right_delimiter = $this->_config[\'right_delimiter\'];\r\n        $this->assign(\'this\', $this);\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Now the /library directory looks like:</p>\r\n\r\n<pre class=\"brush: php\">\r\n...\r\n/myapp\r\n    ...\r\n    /library\r\n        /Smarty\r\n            /plugins\r\n            /sysplugins\r\n            /debug.tpl\r\n            /Smarty.class.php\r\n        /Ext\r\n        	/View\r\n        		Smarty.php\r\n    /public\r\n...\r\n</pre>\r\n\r\n<h2 id=\"boot\">Bootsraping the Smarty 3 view:</h2>\r\n\r\n<p>Basically we need to bootstrap the view using our new Smarty view\r\nand set the layout and script suffixes. Also we need to give this view to\r\nthe ViewRenderer helper. So lets modify our /application/Bootstrap.php file:</p>\r\n\r\n<pre class=\"brush: php\">\r\nclass Bootstrap extends Zend_Application_Bootstrap_Bootstrap\r\n{\r\n	/**\r\n     * Bootstrap Smarty view\r\n     */\r\n	protected function _initView()\r\n    {\r\n        // initialize smarty view\r\n        $view = new Ext_View_Smarty($this->getOption(\'smarty\'));\r\n        // setup viewRenderer with suffix and view\r\n        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(\'ViewRenderer\');\r\n        $viewRenderer->setViewSuffix(\'tpl\');\r\n        $viewRenderer->setView($view);\r\n        \r\n        // ensure we have layout bootstraped\r\n        $this->bootstrap(\'layout\');\r\n        // set the tpl suffix to layout also\r\n        $layout = Zend_Layout::getMvcInstance();\r\n        $layout->setViewSuffix(\'tpl\');\r\n        \r\n        return $view;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"action\">Seeing it in action:</h2>\r\n\r\n<p>Now generally all hard work is done and everything else should work as it should..</p>\r\n<p>To see what good do we have lets put some templates on our modules to check if\r\neverything is in place and working. First lets have a look at our default module structure:</p>\r\n\r\n<pre class=\"brush: php\">\r\n...\r\n/myapp\r\n    /application\r\n        /configs\r\n            application.ini\r\n        /modules\r\n        	/default\r\n        		/controllers\r\n        			IndexController.php\r\n        			ErrorController.php\r\n        	    /views\r\n        	    	/templates\r\n        	    		/error\r\n        	    			error.tpl\r\n        	    	    /index\r\n        	    	    	index.tpl\r\n        	    	    /static\r\n        	    	    	header.tpl\r\n        	    	    layout.tpl\r\n        Bootstrap.php\r\n...\r\n</pre>\r\n\r\n<p>Slighly change the index controller:</p>\r\n\r\n<pre class=\"brush: php\">\r\n&lt;?php\r\nclass IndexController extends Zend_Controller_Action\r\n{\r\n    public function indexAction()\r\n    {\r\n        $this->view->hello = \'Hello Smarty 3\';\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Create the templates/index/index.tpl</p>\r\n\r\n<pre class=\"brush: php\">\r\n<p>{$hello}</p>\r\n<p>dont forget to visit &lt;a href=\"http://www.gediminasm.org\">my blog</a&gt; for updates</p>\r\n<p>&lt;a href=\"{$this->url([\'controller\' => \'index\', \'action\' => \'index\'])}\"&gt;home&lt;/a&gt;</p>\r\n</pre>\r\n\r\n<p>Create the templates/error/error.tpl</p>\r\n\r\n<pre class=\"brush: php\">\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\r\n  <title>Zend Framework Default Application</title>\r\n</head>\r\n<body>\r\n  <h1>An error occurred</h1>\r\n  <h2>{$this->message}</h2>\r\n\r\n  {if $this->exception}\r\n\r\n  <h3>Exception information:</h3>\r\n  <p>\r\n      <b>Message:</b> {$this->exception->getMessage()}\r\n  </p>\r\n\r\n  <h3>Stack trace:</h3>\r\n  <pre>{$this->exception->getTraceAsString()}\r\n  </pre>\r\n\r\n  <h3>Request Parameters:</h3>\r\n  <pre>{var_export($this->request->getParams(), true)}\r\n  </pre>\r\n  {/if}\r\n\r\n</body>\r\n</html>\r\n</pre>\r\n\r\n<p>Create the templates/layout.tpl</p>\r\n\r\n<pre class=\"brush: php\">\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body>\r\n	<div id=\"header\">\r\n		{include file=\"header.tpl\"}\r\n	</div>\r\n	{$this->layout()->content}\r\n</body>\r\n</html>\r\n</pre>\r\n\r\n<p>Create the templates/static/header.tpl</p>\r\n\r\n<pre class=\"brush: php\">\r\nthis is header\r\n</pre>\r\n\r\n<p>Now if everything is properly configured you should see everything as expected</p>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2010-10-13 20:21:39',NULL,'Smarty 3 extension for Zend framework, with full: layout and view template support','2010-10-30 20:25:29'),(6,'Tree - Nestedset behavior extension for Doctrine 2','tree-nestedset-behavior-extension-for-doctrine-2','<p><strong>Tree</strong> nested behavior will implement the standard Nested Set behavior\r\n	on your Entity. Also this behavior can be nested with <strong>Translatable</strong>\r\n    and <strong>Sluggable</strong> behaviors to translate the generated slugs into diferent languages\r\n    of your tree nodes.</p>\r\n	<p>Features:</p>\r\n	<ul>\r\n		<li>Support for multiple roots</li>\r\n	    <li>No need for other managers, implementation is through event listener</li>\r\n	    <li>Synchronization of left, right values is automatic</li>\r\n	    <li>Can support concurrent flush with many entities being persisted and updated</li>\r\n	    <li>Can be nested with other extensions</li>\r\n	    <li>Entities are not aggregated since <strong>Tree</strong> reads specific annotations</li>\r\n	    <li>Annotation and Yaml mapping support for extensions</li>\r\n	</ul>','<p>Thanks for contribution to:</p>\r\n<ul>\r\n    <li><strong><a href=\"http://github.com/everzet\" target=\"new\">everzet</a> Kudryashov Konstantin</strong> for TreeLevel implementation</li>\r\n    <li><strong><a href=\"http://github.com/stof\" target=\"new\">stof</a> Christophe Coevoet</strong> for getTreeLeafs function</li>\r\n</ul>\r\n\r\n<p>Update <strong>2011-02-08</strong></p>\r\n<ul>\r\n	<li>Refactored to support multiple roots</li>\r\n	<li>Changed the repository name, relevant to strategy used</li>\r\n	<li>New <a href=\"#annotations\">annotations</a> were added</li>\r\n</ul>\r\n\r\n<p>Update <strong>2011-02-02</strong></p>\r\n<ul>\r\n    <li>Refactored the Tree to the ability on supporting diferent tree models</li>\r\n    <li>Changed the repository location in order to support future updates</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-12-23</strong></p>\r\n<ul>\r\n    <li>Optimized for concurrent updates, changed some yaml mapping definitions</li>\r\n    <li>Table inheritance mapping now is fully supported by tree repository functions</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-12-14</strong></p>\r\n<ul>\r\n    <li>Implemented extension for additional metadata mapping. Currently these extensions\r\n    supports <strong>annotation</strong> and <strong>yaml</strong> metadata mapping. For\r\n    usage examples read the blog further or check the unit tests and mapping drivers.</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n<ul>\r\n	<li>You can <a href=\"/test\" title=\"Test extensions\">test tree live</a> on this blog</li>\r\n    <li>Public <a href=\"http://github.com/l3pp4rd/DoctrineExtensions\" title=\"Tree extension on Github\">Tree repository</a> is available on github</li>\r\n    <li>Last update date: <strong>2011-02-08</strong></li>\r\n</ul>\r\n\r\n<p><strong>Portability:</strong></p>\r\n<ul>\r\n	<li><strong>Tree</strong> is now available as <a href=\"http://github.com/stof/DoctrineExtensionsBundle\" target=\"new\">Bundle</a>\r\n	ported to <strong>Symfony 2</strong> by <strong>Christophe Coevoet</strong>, together with all other extensions\r\n	</li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Tree</strong> behavior</p>\r\n<p>Content:</p>\r\n<ul>\r\n    <li><a href=\"#including-extension\">Including</a> the extension</li>\r\n    <li><a href=\"#event-listener\">Attaching</a> the <strong>Tree Listener</strong></li>\r\n    <li>Entity <a href=\"#entity\">example</a></li>\r\n    <li><a href=\"#yaml\">Yaml</a> mapping example</li>\r\n    <li>Basic usage <a href=\"#basic-examples\">examples</a></li>\r\n    <li>Advanced usage <a href=\"#advanced-examples\">examples</a></li>\r\n</ul>\r\n\r\n<h2 id=\"including-extension\">Setup and autoloading</h2>\r\n<p>If you using the source from github repository, initial directory structure for \r\nthe extension library should look like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/DoctrineExtensions\r\n    /lib\r\n        /Gedmo\r\n            /Sluggable\r\n            /Timestampable\r\n            /Translatable\r\n            /Tree\r\n    /tests\r\n        ...\r\n...\r\n</pre>\r\n<p>First of all we need to setup the autoloading of extensions:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register();\r\n</pre>\r\n\r\n<h3 id=\"event-listener\">Attaching the Tree Listener to the event manager</h3>\r\n\r\n<p>To attach the <strong>Tree Listener</strong> to your event system:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n$treeListener = new \\Gedmo\\Tree\\TreeListener();\r\n$evm->addEventSubscriber($treeListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<h2 id=\"entity\">Tree Entity example:</h2>\r\n<p><strong>Notice:</strong> that Node interface is not necessary, except in cases there\r\nyou need to identify entity as being Tree Node. The metadata is loaded only once then\r\ncache is activated</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @gedmo:Tree(type=\"nested\")\r\n * @Table(name=\"categories\")\r\n * use repository for handy tree functions\r\n * @Entity(repositoryClass=\"Gedmo\\Tree\\Entity\\Repository\\NestedTreeRepository\")\r\n */\r\nclass Category\r\n{\r\n    /**\r\n     * @Column(name=\"id\", type=\"integer\")\r\n     * @Id\r\n     * @GeneratedValue\r\n     */\r\n    private $id;\r\n\r\n    /**\r\n     * @Column(name=\"title\", type=\"string\", length=64)\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:TreeLeft\r\n     * @Column(name=\"lft\", type=\"integer\")\r\n     */\r\n    private $lft;\r\n    \r\n    /**\r\n     * @gedmo:TreeLevel\r\n     * @Column(name=\"lvl\", type=\"integer\")\r\n     */\r\n    private $lvl;\r\n    \r\n    /**\r\n     * @gedmo:TreeRight\r\n     * @Column(name=\"rgt\", type=\"integer\")\r\n     */\r\n    private $rgt;\r\n    \r\n    /**\r\n     * @gedmo:TreeRoot\r\n     * @Column(name=\"root\", type=\"integer\")\r\n     */\r\n    private $root;\r\n    \r\n    /**\r\n     * @gedmo:TreeParent\r\n     * @ManyToOne(targetEntity=\"Category\", inversedBy=\"children\")\r\n     */\r\n    private $parent;\r\n    \r\n    /**\r\n     * @OneToMany(targetEntity=\"Category\", mappedBy=\"parent\")\r\n     * @OrderBy({\"lft\" = \"ASC\"})\r\n     */\r\n    private $children;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n    \r\n    public function setParent(Category $parent)\r\n    {\r\n    	$this->parent = $parent;	\r\n    }\r\n    \r\n	public function getParent()\r\n    {\r\n    	return $this->parent;	\r\n    }\r\n}\r\n</pre>\r\n\r\n<h3 id=\"annotations\">Tree annotations:</h3>\r\n<ul>\r\n	<li><strong>@gedmo:Tree(type=\"strategy\")</strong> this <strong>class annotation</strong> is used to set the tree strategy by <strong>type</strong> parameter.\r\n	Currently only <strong>nested</strong> strategy is supported</li>\r\n	<li><strong>@gedmo:TreeLeft</strong> it will use this field to store tree <strong>left</strong> value</li>\r\n	<li><strong>@gedmo:TreeRight</strong> it will use this field to store tree <strong>right</strong> value</li>\r\n	<li><strong>@gedmo:TreeParent</strong> this will identify this column as the relation to <strong>parent node</strong></li>\r\n	<li><strong>@gedmo:TreeLevel</strong> it will use this field to store tree<strong>level</strong></li>\r\n	<li><strong>@gedmo:TreeRoot</strong> it will use this field to store tree<strong>root</strong> id value</li>\r\n</ul>\r\n\r\n<h2 id=\"yaml\">Yaml mapping example</h2>\r\n\r\n<p>Yaml mapped Category: <strong>/mapping/yaml/Entity.Category.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Category:\r\n  type: entity\r\n  table: categories\r\n  gedmo:\r\n    tree:\r\n      type: nested\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n    lft:\r\n      type: integer\r\n      gedmo:\r\n        - treeLeft\r\n    rgt:\r\n      type: integer\r\n      gedmo:\r\n        - treeRight\r\n    root:\r\n      type: integer\r\n      gedmo:\r\n        - treeRoot\r\n    lvl:\r\n      type: integer\r\n      gedmo:\r\n        - treeLevel\r\n  manyToOne:\r\n    parent:\r\n      targetEntity: Entity\\Category\r\n      inversedBy: children\r\n      gedmo:\r\n        - treeParent\r\n  oneToMany:\r\n    children:\r\n      targetEntity: Entity\\Category\r\n      mappedBy: parent\r\n</pre>\r\n\r\n<h2 id=\"basic-examples\">Basic usage examples:</h2>\r\n\r\n<h3>To save some <strong>Categories</strong> and generate tree:</h3>\r\n\r\n<pre class=\"brush: php\">\r\n$food = new Category();\r\n$food->setTitle(\'Food\');\r\n\r\n$fruits = new Category();\r\n$fruits->setTitle(\'Fruits\');\r\n$fruits->setParent($food);\r\n\r\n$vegetables = new Category();\r\n$vegetables->setTitle(\'Vegetables\');\r\n$vegetables->setParent($food);\r\n\r\n$carrots = new Category();\r\n$carrots->setTitle(\'Carrots\');\r\n$carrots->setParent($vegetables);\r\n    \r\n$this->em->persist($food);\r\n$this->em->persist($fruits);\r\n$this->em->persist($vegetables);\r\n$this->em->persist($carrots);\r\n$this->em->flush();\r\n</pre>\r\n\r\n<p>The result after flush will generate the tree of food chain:</p>\r\n<pre class=\"brush: php\">\r\n/food (1-8)\r\n    /fruits (2-3)\r\n    /vegetables (4-7)\r\n        /carrots (5-6)\r\n</pre>\r\n\r\n<h3>Using repository functions</h3>\r\n<pre class=\"brush: php\">\r\n$repo = $em->getRepository(\'Entity\\Category\');\r\n\r\n$food = $repo->findOneByTitle(\'Food\');\r\necho $repo->childCount($food);\r\n// prints: 3\r\necho $repo->childCount($food, true/*direct*/);\r\n// prints: 2\r\n$children = $repo->children($food);\r\n// $children contains:\r\n// 3 nodes\r\n$children = $repo->children($food, false, \'title\');\r\n// will sort the children by title\r\n$carrots = $repo->findOneByTitle(\'Carrots\');\r\n$path = $repo->getPath($carrots);\r\n/* $path contains:\r\n   0 => Food\r\n   1 => Vegetables\r\n   2 => Carrots\r\n*/\r\n\r\n// verification and recovery of tree\r\n$repo->verify();\r\n// can return TRUE if tree is valid, or array of errors found on tree\r\n$repo->recover();\r\n$em->clear(); // clear cached nodes\r\n// if tree has errors it will try to fix all tree nodes\r\n\r\n// single node removal\r\n$vegies = $repo->findOneByTitle(\'Vegitables\');\r\n$repo->removeFromTree($vegies);\r\n// it will remove this node from tree and reparent all children\r\n\r\n// reordering the tree\r\n$food = $repo->findOneByTitle(\'Food\');\r\n$repo->reorder($food, \'title\');\r\n// it will reorder all \"Food\" tree node left-right values by the title\r\n</pre>\r\n\r\n<p>Moving up and down the nodes in same level:</p>\r\n\r\n<p>Tree example:</p>\r\n<pre class=\"brush: php\">\r\n/Food\r\n    /Vegitables\r\n        /Onions\r\n        /Carrots\r\n        /Cabbages\r\n        /Potatoes\r\n    /Fruits\r\n</pre>\r\n\r\n<pre class=\"brush: php\">\r\n$repo = $em->getRepository(\'Entity\\Category\');\r\n$carrots = $repo->findOneByTitle(\'Carrots\');\r\n// move it up by one position\r\n$repo->moveUp($carrots, 1);\r\n</pre>\r\n\r\n<p>Tree after moving the Carrots up:</p>\r\n<pre class=\"brush: php\">\r\n/Food\r\n    /Vegitables\r\n        /Carrots &lt;- moved up\r\n        /Onions\r\n        /Cabbages\r\n        /Potatoes\r\n    /Fruits\r\n</pre>\r\n\r\n<pre class=\"brush: php\">\r\n$repo = $em->getRepository(\'Entity\\Category\');\r\n$carrots = $repo->findOneByTitle(\'Carrots\');\r\n// move it down to the end\r\n$repo->moveDown($carrots, true);\r\n</pre>\r\n\r\n<p>Tree after moving the Carrots down:</p>\r\n<pre class=\"brush: php\">\r\n/Food\r\n    /Vegitables\r\n        /Onions\r\n        /Cabbages\r\n        /Potatoes\r\n        /Carrots &lt;- moved down to the end\r\n    /Fruits\r\n</pre>\r\n\r\n<p><strong>Notice:</strong> tree repository functions like: <strong>reorder, verify</strong>. \r\nWill require to clear the cache of Entity Manager because left-right values will differ.\r\nSo after that use $em->clear(); if you will continue using the nodes after these operations.\r\nAfter using <strong>moveUp, moveDown</strong> it is also recommended to refresh the node\r\nusing $em->refresh($node);</p>\r\n\r\n<h3>If you need a repository for your TreeNode Entity simply extend it</h3>\r\n<pre class=\"brush: php\">\r\nnamespace Entity\\Repository;\r\n\r\nuse Gedmo\\Tree\\Entity\\Repository\\NestedTreeRepository;\r\n    \r\nclass CategoryRepository extends NestedTreeRepository\r\n{\r\n    // your code here\r\n}\r\n\r\n// and then on your entity link to this repository\r\n\r\n/**\r\n * @gedmo:Tree(type=\"nested\")\r\n * @Entity(repositoryClass=\"Entity\\Repository\\CategoryRepository\")\r\n */\r\nclass Category implements Node\r\n{\r\n	//...\r\n}\r\n</pre>\r\n\r\n<h2 id=\"advanced-examples\">Advanced examples:</h2>\r\n\r\n<h3>Nesting Translatatable and Sluggable extensions</h3>\r\n\r\n<p>If you want to attach <strong>TranslationListener</strong> also add it to EventManager after\r\nthe <strong>SluggableListener</strong> and <strong>TreeListener</strong>. It is important because slug must be generated first\r\nbefore the creation of it`s translation.</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n$treeListener = new \\Gedmo\\Tree\\TreeListener();\r\n$evm->addEventSubscriber($treeListener);\r\n$sluggableListener = new \\Gedmo\\Sluggable\\SluggableListener();\r\n$evm->addEventSubscriber($sluggableListener);\r\n$translatableListener = new \\Gedmo\\Translatable\\TranslationListener();\r\n$translatableListener->setTranslatableLocale(\'en_us\');\r\n$evm->addEventSubscriber($translatableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<p>And the Entity should look like:</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @gedmo:Tree(type=\"nested\")\r\n * @Entity(repositoryClass=\"Gedmo\\Tree\\Entity\\Repository\\NestedTreeRepository\")\r\n */\r\nclass Category\r\n{\r\n    /**\r\n     * @Column(name=\"id\", type=\"integer\")\r\n     * @Id\r\n     * @GeneratedValue\r\n     */\r\n    private $id;\r\n\r\n    /**\r\n     * @gedmo:Translatable\r\n     * @gedmo:Sluggable\r\n     * @Column(name=\"title\", type=\"string\", length=64)\r\n     */\r\n    private $title;\r\n\r\n    /**\r\n     * @gedmo:TreeLeft\r\n     * @Column(name=\"lft\", type=\"integer\")\r\n     */\r\n    private $lft;\r\n    \r\n    /**\r\n     * @gedmo:TreeRight\r\n     * @Column(name=\"rgt\", type=\"integer\")\r\n     */\r\n    private $rgt;\r\n    \r\n    /**\r\n     * @gedmo:TreeLevel\r\n     * @Column(name=\"lvl\", type=\"integer\")\r\n     */\r\n    private $lvl;\r\n    \r\n    /**\r\n     * @gedmo:TreeParent\r\n     * @ManyToOne(targetEntity=\"Category\", inversedBy=\"children\")\r\n     */\r\n    private $parent;\r\n    \r\n    /**\r\n     * @OneToMany(targetEntity=\"Category\", mappedBy=\"parent\")\r\n     */\r\n    private $children;\r\n    \r\n    /**\r\n     * @gedmo:Translatable\r\n     * @gedmo:Slug\r\n     * @Column(name=\"slug\", type=\"string\", length=128)\r\n     */\r\n    private $slug;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n	public function getSlug()\r\n    {\r\n        return $this->slug;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n    \r\n    public function setParent(Category $parent)\r\n    {\r\n    	$this->parent = $parent;	\r\n    }\r\n    \r\n	public function getParent()\r\n    {\r\n    	return $this->parent;	\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Yaml mapped Category: <strong>/mapping/yaml/Entity.Category.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Category:\r\n  type: entity\r\n  table: categories\r\n  gedmo:\r\n    tree:\r\n      type: nested\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n      gedmo:\r\n        - translatable\r\n        - sluggable\r\n    lft:\r\n      type: integer\r\n      gedmo:\r\n        - treeLeft\r\n    rgt:\r\n      type: integer\r\n      gedmo:\r\n        - treeRight\r\n    lvl:\r\n      type: integer\r\n      gedmo:\r\n        - treeLevel\r\n    slug:\r\n      type: string\r\n      length: 128\r\n      gedmo:\r\n        - translatable\r\n        - slug\r\n  manyToOne:\r\n    parent:\r\n      targetEntity: Entity\\Category\r\n      inversedBy: children\r\n      gedmo:\r\n        - treeParent\r\n  oneToMany:\r\n    children:\r\n      targetEntity: Entity\\Category\r\n      mappedBy: parent\r\n</pre>\r\n\r\n<p><strong>Notice:</strong> that using dql without object hydration, the nodes will not be\r\ntranslated. Because the postLoad event never will be triggered</p>\r\n\r\n<p>Now the generated treenode slug will be translated by Translatable behavior</p>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2010-10-24 12:18:52',NULL,'Tree - Nestedset extension for Doctrine 2 makes tree implementation on entities','2011-02-08 22:29:16'),(7,'Timestampable behavior extension for Doctrine 2','timestampable-behavior-extension-for-doctrine-2','<p><strong>Timestampable</strong> behavior will automate the update of date fields\r\n	on your Entities or Documents. It works through annotations and can update fields on creation, update or\r\n	even on specific property value change.</p>\r\n	<p>Features:</p>\r\n	<ul>\r\n	    <li>Automatic predifined date field update on creation, update and even on record property changes</li>\r\n	    <li>ORM and ODM support</li>\r\n	    <li>Specific annotations for properties, and no interface required</li>\r\n	    <li>Can react to specific property or relation changes to specific value</li>\r\n	    <li>Can be nested with other behaviors</li>\r\n	    <li>Annotation and Yaml mapping support for extensions</li>\r\n	</ul>','<p>Update <strong>2011-02-02</strong></p>\r\n<ul>\r\n    <li>Implemented ODM listener</li>\r\n    <li>Allowed to force value manually in such cases like migrations</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-12-14</strong></p>\r\n<ul>\r\n    <li>Implemented extension for additional metadata mapping. Currently these extensions\r\n    supports <strong>annotation</strong> and <strong>yaml</strong> metadata mapping. For\r\n    usage examples read the blog further or check the unit tests and mapping drivers.</li>\r\n</ul>\r\n\r\n<p>Update <strong>2010-11-14</strong></p>\r\n<ul>\r\n	<li>In order to share these extensions among other, the extension namespace had to be\r\n	changed and now it is <strong>Gedmo</strong>. All annotations in these extensions now\r\n	have the same namespace and starts with - <strong>@gedmo:</strong>. This allows to use\r\n	many diferent extensions on single application from any source vendors. I hope this\r\n	will be a good practise for other developers..</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n<ul>\r\n    <li>Public <a href=\"http://github.com/l3pp4rd/DoctrineExtensions\" title=\"Timestampable extension on Github\">Timestampable repository</a> is available on github</li>\r\n    <li>Last update date: <strong>2011-02-02</strong></li>\r\n</ul>\r\n\r\n<p><strong>Portability:</strong></p>\r\n<ul>\r\n	<li><strong>Timestampable</strong> is now available as <a href=\"http://github.com/stof/DoctrineExtensionsBundle\" target=\"new\">Bundle</a>\r\n	ported to <strong>Symfony 2</strong> by (<strong>Christophe Coevoet</strong>), together with all other extensions\r\n	</li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Timestampable</strong> behavior</p>\r\n<p>Content:</p>\r\n<ul>\r\n    <li><a href=\"#including-extension\">Including</a> the extension</li>\r\n    <li><a href=\"#event-listener\">Attaching</a> the <strong>Timestampable Listener</strong></li>\r\n    <li>Entity <a href=\"#entity\">example</a></li>\r\n    <li>Document <a href=\"#document\">example</a></li>\r\n    <li><a href=\"#yaml\">Yaml</a> mapping example</li>\r\n    <li>Advanced usage <a href=\"#advanced-examples\">examples</a></li>\r\n</ul>\r\n\r\n<h2 id=\"including-extension\">Setup and autoloading</h2>\r\n<p>If you using the source from github repository, initial directory structure for \r\nthe extension library should look like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/DoctrineExtensions\r\n    /lib\r\n        /Gedmo\r\n        	/Exception\r\n        	/Mapping\r\n            /Sluggable\r\n            /Timestampable\r\n            /Translatable\r\n            /Tree\r\n    /tests\r\n        ...\r\n...\r\n</pre>\r\n<p>First of all we need to setup the autoloading of extensions:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register();\r\n</pre>\r\n\r\n<h3 id=\"event-listener\">Attaching the Timestampable Listener to the event manager</h3>\r\n\r\n<p>To attach the <strong>Timestampable Listener</strong> to your event system:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n// ORM\r\n$timestampableListener = new \\Gedmo\\Timestampable\\TimestampableListener();\r\n// ODM\r\n$timestampableListener = new \\Gedmo\\Timestampable\\ODM\\MongoDB\\TimestampableListener();\r\n\r\n$evm->addEventSubscriber($timestampableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<h2 id=\"entity\">Timestampable Entity example:</h2>\r\n\r\n<h3>Timestampable annotations:</h3>\r\n<ul>\r\n	<li><strong>@gedmo:Timestampable</strong> this annotation tells that this column is timestampable\r\n	by default it updates this column on update. If column is not date, datetime or time type it will trigger an exception.\r\n	Bellow are listed available options:</li>\r\n</ul>\r\n\r\n<p>Available configuration options:</p>\r\n<ul>\r\n	<li><strong>on</strong> - is main option and can be <strong>create, update, change</strong> this tells then it should be updated</li>\r\n	<li><strong>field</strong> - only valid if <strong>on=\"change\"</strong> is specified, tracks property for changes</li>\r\n	<li><strong>value</strong> - only valid if <strong>on=\"change\"</strong> is specified, if tracked field has this <strong>value</strong> then it updates timestamp</li>\r\n</ul>\r\n\r\n<p><strong>Notice:</strong> that Timestampable interface is not necessary, except in cases there\r\nyou need to identify entity as being Timestampable. The metadata is loaded only once then\r\ncache is activated</p>\r\n\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Entity\r\n */\r\nclass Article\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @Column(type=\"string\", length=128)\r\n     */\r\n    private $title;\r\n    \r\n    /**\r\n     * @var datetime $created\r\n     * \r\n     * @gedmo:Timestampable(on=\"create\")\r\n     * @Column(type=\"date\")\r\n     */\r\n    private $created;\r\n    \r\n    /**\r\n     * @var datetime $updated\r\n     *\r\n     * @Column(type=\"datetime\")\r\n     * @gedmo:Timestampable(on=\"update\")\r\n     */\r\n    private $updated;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n    \r\n    public function getCreated()\r\n    {\r\n        return $this->created;\r\n    }\r\n    \r\n    public function getUpdated()\r\n    {\r\n        return $this->updated;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"document\">Timestampable Document example:</h2>\r\n\r\n<pre class=\"brush: php\">\r\nnamespace Document;\r\n\r\n/** \r\n * @Document(collection=\"articles\")\r\n */\r\nclass Article\r\n{\r\n    /** @Id */\r\n    private $id;\r\n\r\n    /**\r\n     * @String\r\n     */\r\n    private $title;\r\n    \r\n    /**\r\n     * @var timestamp $created\r\n     * \r\n     * @Timestamp\r\n     * @gedmo:Timestampable(on=\"create\")\r\n     */\r\n    private $created;\r\n    \r\n    /**\r\n     * @var date $updated\r\n     *\r\n     * @Date\r\n     * @gedmo:Timestampable\r\n     */\r\n    private $updated;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n    \r\n    public function getCreated()\r\n    {\r\n        return $this->created;\r\n    }\r\n    \r\n    public function getUpdated()\r\n    {\r\n        return $this->updated;\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Now on update and creation these annotated fields will be automatically updated</p>\r\n\r\n<h2 id=\"yaml\">Yaml mapping example</h2>\r\n\r\n<p>Yaml mapped Article: <strong>/mapping/yaml/Entity.Article.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Article:\r\n  type: entity\r\n  table: articles\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n    created:\r\n      type: date\r\n      gedmo:\r\n        timestampable:\r\n          on: create\r\n    updated:\r\n      type: datetime\r\n      gedmo:\r\n        timestampable:\r\n          on: update\r\n</pre>\r\n\r\n<h2 id=\"advanced-examples\">Advanced examples:</h2>\r\n\r\n<h3>Using dependency of property changes</h3>\r\n\r\n<p>Add another entity which would represent Article Type:</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Entity\r\n */\r\nclass Type\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @Column(type=\"string\", length=128)\r\n     */\r\n    private $title;\r\n    \r\n    /**\r\n     * @OneToMany(targetEntity=\"Article\", mappedBy=\"type\")\r\n     */\r\n    private $articles;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Now update the Article Entity to reflect published date on Type change:</p>\r\n\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Entity\r\n */\r\nclass Article\r\n{\r\n    /** @Id @GeneratedValue @Column(type=\"integer\") */\r\n    private $id;\r\n\r\n    /**\r\n     * @Column(type=\"string\", length=128)\r\n     */\r\n    private $title;\r\n    \r\n    /**\r\n     * @var datetime $created\r\n     * \r\n     * @gedmo:Timestampable(on=\"create\")\r\n     * @Column(type=\"date\")\r\n     */\r\n    private $created;\r\n    \r\n    /**\r\n     * @var datetime $updated\r\n     *\r\n     * @Column(type=\"datetime\")\r\n     * @gedmo:Timestampable(on=\"update\")\r\n     */\r\n    private $updated;\r\n    \r\n    /**\r\n     * @ManyToOne(targetEntity=\"Type\", inversedBy=\"articles\")\r\n     */\r\n    private $type;\r\n\r\n	/**\r\n     * @var datetime $published\r\n     *\r\n     * @Column(type=\"datetime\", nullable=true)\r\n     * @gedmo:Timestampable(on=\"change\", field=\"type.title\", value=\"Published\")\r\n     */\r\n    private $published;\r\n\r\n	public function setType($type)\r\n    {\r\n        $this->type = $type;\r\n    }\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n    \r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n    \r\n    public function getCreated()\r\n    {\r\n        return $this->created;\r\n    }\r\n    \r\n    public function getUpdated()\r\n    {\r\n        return $this->updated;\r\n    }\r\n    \r\n    public function getPublished()\r\n    {\r\n        return $this->published;\r\n    }\r\n}\r\n</pre>\r\n\r\n<p>Yaml mapped Article: <strong>/mapping/yaml/Entity.Article.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Article:\r\n  type: entity\r\n  table: articles\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n    created:\r\n      type: date\r\n      gedmo:\r\n        timestampable:\r\n          on: create\r\n    updated:\r\n      type: datetime\r\n      gedmo:\r\n        timestampable:\r\n          on: update\r\n    published:\r\n      type: datetime\r\n      gedmo:\r\n        timestampable:\r\n          on: change\r\n          field: type.title\r\n          value: Published\r\n  manyToOne:\r\n    type:\r\n      targetEntity: Entity\\Type\r\n      inversedBy: articles\r\n</pre>\r\n\r\n<p>Now few operations to get it all done:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$article = new Article;\r\n$article->setTitle(\'My Article\');\r\n\r\n$em->persist($article);\r\n$em->flush();\r\n// article: $created, $updated were set\r\n\r\n$type = new Type;\r\n$type->setTitle(\'Published\');\r\n\r\n$article = $em->getRepository(\'Entity\\Article\')->findByTitle(\'My Article\');\r\n$article->setType($type);\r\n\r\n$em->persist($article);\r\n$em->persist($type);\r\n$em->flush();\r\n// article: $published, $updated were set\r\n\r\n$article->getPublished()->format(\'Y-m-d\'); // the date article type changed to published\r\n</pre>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2010-11-04 21:10:53',NULL,'Timestampable extension for Doctrine 2 helps automate update of dates','2011-02-02 01:42:12'),(8,'Loggable behavioral extension for Doctrine2','loggable-behavioral-extension-for-doctrine2','<p><strong>Loggable</strong> behavior tracks your record changes and is able to\r\n    manage versions.</p>\r\n	<p>Features:</p>\r\n	<ul>\r\n	    <li>Automatic storage of log entries in database</li>\r\n	    <li>ORM and ODM support</li>\r\n	    <li>Can be nested with other behaviors</li>\r\n	    <li>Objects can be reverted to previous versions</li>\r\n	    <li>Annotation and Yaml mapping support for extensions</li>\r\n	</ul>','<p>Thanks to:</p>\r\n<ul>\r\n	<li><strong><a href=\"http://github.com/gordonslondon\" target=\"new\">gordonslondon</a> - Boussekeyt Jules</strong> for core of this extension</li>\r\n</ul>\r\n\r\n<p><strong>Notice list:</strong></p>\r\n<ul>\r\n    <li>Public <a href=\"http://github.com/l3pp4rd/DoctrineExtensions\" title=\"Loggable extension on Github\">Loggable repository</a> is available on github</li>\r\n    <li>Last update date: <strong>2011-03-08</strong></li>\r\n</ul>\r\n\r\n<p>This article will cover the basic installation and functionality of <strong>Loggable</strong> behavior</p>\r\n<p>Content:</p>\r\n<ul>\r\n    <li><a href=\"#including-extension\">Including</a> the extension</li>\r\n    <li><a href=\"#event-listener\">Attaching</a> the <strong>Loggable Listener</strong></li>\r\n    <li>Entity <a href=\"#entity\">example</a></li>\r\n    <li>Document <a href=\"#document\">example</a></li>\r\n    <li><a href=\"#yaml\">Yaml</a> mapping example</li>\r\n    <li>Basic usage <a href=\"#basic-examples\">examples</a></li>\r\n</ul>\r\n\r\n<h2>Setup and autoloading</h2>\r\n<p>If you using the source from github repository, initial directory structure for \r\nthe extension library should look like this:</p>\r\n<pre class=\"brush: php\">\r\n...\r\n/DoctrineExtensions\r\n    /lib\r\n        /Gedmo\r\n        	/Exception\r\n            /Loggable\r\n        	/Mapping\r\n            /Sluggable\r\n            /Timestampable\r\n            /Translatable\r\n            /Tree\r\n    /tests\r\n        ...\r\n...\r\n</pre>\r\n<p>First of all we need to setup the autoloading of extensions:</p>\r\n\r\n<pre class=\"brush: php\">\r\n$classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register();\r\n</pre>\r\n\r\n<p id=\"including-extension\">This behavior requires an additional metadata path to be specified in order to have a logEntry\r\ntable for log entries. To configure it correctly you need to add new annotation\r\ndriver into driver chain with a specific location and namespace</p>\r\n\r\n<h3>Loggable metadata Annotation driver mapped into driver chain:</h3>\r\n\r\n<pre class=\"brush: php\">\r\n$chainDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\DriverChain();\r\n$yourDefaultDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\YamlDriver(\'/yml/mapping/files\');\r\n$loggableDriverImpl = $doctrineOrmConfig->newDefaultAnnotationDriver(\r\n    \'/path/to/library/DoctrineExtensions/lib/Gedmo/Loggable/Entity\' // Document for ODM\r\n);\r\n$chainDriverImpl->addDriver($yourDefaultDriverImpl, \'Entity\');\r\n$chainDriverImpl->addDriver($loggableDriverImpl, \'Gedmo\\Loggable\');\r\n$doctrineOrmConfig->setMetadataDriverImpl($chainDriverImpl);\r\n</pre>\r\n\r\n<p><strong>Notice:</strong> there can be many annotation drivers in driver chain</p>\r\n<p><strong>Notice:</strong> Loggable Entity or Document is required for storing all logs.\r\nIf you need a log entry table per single Entity or Document, we will cover how to setup it later</p>\r\n\r\n<h3 id=\"event-listener\">Attaching the Loggable Listener to the event manager</h3>\r\n\r\n<pre class=\"brush: php\">\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n// ORM\r\n$loggableListener = new \\Gedmo\\Loggable\\LoggableListener();\r\n// ODM\r\n$loggableListener = new \\Gedmo\\Loggable\\ODM\\MongoDB\\LoggableListener();\r\n\r\n$loggableListener->setUsername(\'currently_loggedin_user\');\r\n// in real world app the username should be loaded from session, example:\r\n// Session::getInstance()->read(\'user\')->getUsername();\r\n$evm->addEventSubscriber($loggableListener);\r\n// now this event manager should be passed to entity manager constructor\r\n</pre>\r\n\r\n<h3>Loggable annotations:</h3>\r\n<ul>\r\n	<li><strong>@gedmo:Loggable(logEntryClass=\"my\\class\")</strong> this class annotation will use store logs to optionaly specified <strong>logEntryClass</strong></li>\r\n</ul>\r\n\r\n<h2 id=\"entity\">Loggable Entity example:</h2>\r\n<p><strong>Notice:</strong> that Loggable interface is not necessary, except in cases there\r\nyou need to identify entity as being Loggable. The metadata is loaded only once when\r\ncache is active</p>\r\n<pre class=\"brush: php\">\r\nnamespace Entity;\r\n\r\n/**\r\n * @Entity\r\n * @gedmo:Loggable\r\n */\r\nclass Article\r\n{\r\n    /**\r\n     * @Column(name=\"id\", type=\"integer\")\r\n     * @Id\r\n     * @GeneratedValue(strategy=\"IDENTITY\")\r\n     */\r\n    private $id;\r\n\r\n    /**\r\n     * @Column(name=\"title\", type=\"string\", length=8)\r\n     */\r\n    private $title;\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n\r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"document\">Loggable Document example:</h2>\r\n<pre class=\"brush: php\">\r\nnamespace Document;\r\n\r\n/**\r\n * @Document(collection=\"articles\")\r\n * @gedmo:Loggable\r\n */\r\nclass Article\r\n{\r\n    /** @Id */\r\n    private $id;\r\n\r\n    /**\r\n     * @String\r\n     */\r\n    private $title;\r\n\r\n    public function __toString()\r\n    {\r\n        return $this->title;\r\n    }\r\n\r\n    public function getId()\r\n    {\r\n        return $this->id;\r\n    }\r\n\r\n    public function setTitle($title)\r\n    {\r\n        $this->title = $title;\r\n    }\r\n\r\n    public function getTitle()\r\n    {\r\n        return $this->title;\r\n    }\r\n}\r\n</pre>\r\n\r\n<h2 id=\"yaml\">Yaml mapping example</h2>\r\n\r\n<p>Yaml mapped Article: <strong>/mapping/yaml/Entity.Article.dcm.yml</strong></p>\r\n<pre class=\"brush: php\">\r\n---\r\nEntity\\Article:\r\n  type: entity\r\n  table: articles\r\n  gedmo:\r\n    loggable:\r\n# using specific personal LogEntryClass class: \r\n      logEntryClass: My\\LogEntry\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 64\r\n    content:\r\n      type: text\r\n</pre>\r\n\r\n<h2 id=\"basic-examples\">Basic usage examples:</h2>\r\n\r\n<pre class=\"brush: php\">\r\n$article = new Entity\\Article;\r\n$article->setTitle(\'my title\');\r\n$em->persist($article);\r\n$em->flush();\r\n</pre>\r\n\r\n<p>This inserted an article and inserted the logEntry for it, which contains\r\nall new changeset. In case if there is <strong>OneToOne or ManyToOne</strong> relation,\r\nit will store only identifier of that object to avoid storing proxies</p>\r\n<p>Now lets update our article:</p>\r\n\r\n<pre class=\"brush: php\">\r\n// first load the article\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$article->setTitle(\'my new title\');\r\n$em->persist($article);\r\n$em->flush();\r\n</pre>\r\n\r\n<p>This updated an article and inserted the logEntry for update action with new changeset</p>\r\n<p>Now lets revert it to previous version:</p>\r\n\r\n<pre class=\"brush: php\">\r\n// first check our log entries\r\n$repo = $em->getRepository(\'Gedmo\\Loggable\\Entity\\LogEntry\'); // we use default log entry class\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$logs = $repo->getLogEntries($article);\r\n/* $logs contains 2 logEntries */\r\n// lets revert to first version\r\n$repo->revert($article, 1/*version*/);\r\n// notice article is not persisted yet, you need to persist and flush it\r\necho $article->getTitle(); // prints \"my title\"\r\n$em->persist($article);\r\n$em->flush();\r\n// if article had changed relation, it would be reverted also. \r\n</pre>\r\n\r\n<p>Easy like that, any sugestions on improvements are very welcome</p>','2011-03-08 10:29:44',NULL,'Loggable extension for Doctrine2 tracks record changes and version management','2011-03-16 17:23:51');
/*!40000 ALTER TABLE `articles` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `comments`
--

DROP TABLE IF EXISTS `comments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `article_id` int(11) DEFAULT NULL,
  `author` varchar(128) DEFAULT NULL,
  `subject` varchar(128) NOT NULL,
  `slug` varchar(64) DEFAULT NULL,
  `content` longtext,
  `created` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `comments_slug_uniq` (`slug`),
  KEY `article_id` (`article_id`),
  CONSTRAINT `comments_ibfk_1` FOREIGN KEY (`article_id`) REFERENCES `articles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=436 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `comments`
--

LOCK TABLES `comments` WRITE;
/*!40000 ALTER TABLE `comments` DISABLE KEYS */;
INSERT INTO `comments` (`id`, `article_id`, `author`, `subject`, `slug`, `content`, `created`) VALUES (1,3,'Peter Marko','Thanks',NULL,'Very well done. Thanks for sharing. I have tested that and it work prefect for me.','2010-10-19 11:39:48'),(2,3,'Gediminas','Re: Thanks',NULL,'<blockquote><p>\r\n        Very well done. Thanks for sharing. I have tested that and it work prefect for me.    </p></blockquote>\r\nThanks, I`m glad that it suits your needs, if you find any bug or make an improvement on your individual usage, please note','2010-10-21 09:27:19'),(3,2,'Marijus','Compiling 5.2 on Ubuntu 10.10 (Maverick)',NULL,'I\'ve just compiled php-5.2.13 on Ubuntu 10.10 and here\'s what I had to modify from the above instructions:\r\n\r\n1) \"pre-requisites\" - It seems, that apache2-mpm-prefork and apache2-threaded-dev are alternatives as the latter has removed the first one. This doesn\'t hurt so it\'s OK this way, but I think the first one could possible be skipped without any loss.\r\n\r\n2) I had problems with IMAP, and on the web I found that I have either to disable it or to recompile IMAP manually, so I decided to go with the first option as I personally don\'t see much of the value added in it. (i.e. I removed lines --with-imap and --with-imap-ss from build_php )\r\n\r\n3) mhash was also causing problems as ./configure was unable to locate mhash.h. Here there were the same two options: drop it or compile it. Here I went with the second one, Grabbed a copy from http://sourceforge.net/projects/mhash/ , and did the usual drill - ./configure && make && make install - this fixed the problem.\r\n\r\n`make test` still got me 27 failed tests, but I suppose I can live with that.\r\n\r\nGood luck to all of you following this :)','2010-10-25 10:33:00'),(4,3,'Jeremy Brown (@notmessenger)','Very nice',NULL,'I have just implemented this code into our new base architecture that is to become the 2.0 version of our web application and so far this is working wonderfully.  We are using it in just a test implementation at the moment, but doubt we\'ll run into any problems as we begin to use it more.  Very nice job and and thanks for sharing this!\r\n\r\nFor others considering using this code: it was very easy to setup and even easier to use.  It took me about 20 minutes to completely integrate this with our current setup, which is composed of a dependency injection container, existing Entities and the cli tool to create our schemas.','2010-10-29 00:24:54'),(5,2,'Gediminas','Re: Compiling 5.2 on Ubuntu 10.10 (Maverick)',NULL,'This was meant on compilation for PHP 5.3 as article header says. Anyway I`m glad that you worked it out\r\n\r\n1) that`s not a big issue, since it does not install unneeded packages\r\n2) --with-kerberos=/usr \\ is not necessary in this case also\r\n3) older PHP versions have problems mentioned with mhash, again compilation is for PHP 5.3.x','2010-11-08 23:03:35'),(6,4,'Florian','MongoDB ODM Sluggable listener',NULL,'Hi,\r\n\r\nAs this extension has no real dependency with ORM or ODM, couldn\'t we have a generic implementation, in order to use it with Mongo ODM ?\r\n\r\nI\'m interested in implementing this. I\'ll try to pull request my work on it when it will be done.\r\n\r\nCheers!\r\n','2010-11-10 11:05:07'),(7,4,'Gediminas','Hi Florian',NULL,'I haven`t worked with ODM yet, and do not know how to make them friendly. So if you will find a fine solution I will be glad to merge these changes ','2010-11-10 14:40:31'),(8,4,'Florian','MongoDB ODM Sluggable listener',NULL,'Ok, I\'ll  try to get some inspiration with other abstract impl, as in DoctrineUserBundle.\r\n\r\n\r\nBy the way, did you know your work has been integrated in Symfony2 ? https://github.com/stof/DoctrineExtensionsBundle\r\n\r\nAnd finally, Keep up the Good work!\r\n','2010-11-10 18:19:36'),(9,4,'Gediminas','Re:',NULL,'No I haven`t noticed before that extensions are being moved to bundle. Thats very nice, I was planning to do it. I see that it is being implemented well and I\'m glad for it.\r\nGood luck with your idea, and thanks for noticing on extension bundle.','2010-11-11 09:48:44'),(10,3,'stof','Integration with Symfony2',NULL,'As Symfony2 adds a namespace on DoctrineORM Mapping the Translation entity is not detected with this Framework. So I developed a DoctrineExtensionsBundle to redefine the entity with the needed namespace on entity. The bundle is available on http://github.com/stof/DoctrineExtensionsBundle\r\n\r\nNote that the bundle register automaticly all four DoctrineExtensions listener when you register it which make it easy to use.','2010-11-12 22:05:36'),(11,1,'Bart','Bad link',NULL,'Thank you. Great and helpful article. \r\nSource link download don\'t work.','2010-11-12 23:29:29'),(12,1,'Bart','Link found',NULL,'I found correct link:\r\nhttp://www.gediminasm.org/files/myapp.rar\r\n:)\r\nAnd one your blog error: when I add comment and after try add next comment then see error.','2010-11-12 23:40:56'),(13,1,'Gediminas','Re: Link found',NULL,'Thanks for noticing fixed both..\r\n','2010-11-13 19:45:33'),(14,3,'olagato','Great work',NULL,'Really helpful... thank you very much for sharing.','2010-11-13 20:41:16'),(15,5,'Rimas','a',NULL,'in class Ext_View_Smarty \r\nline 67 68 you have replace code:\r\n$cache_id = md5($_SERVER[\'REQUEST_URI\']); \r\n$this->_smarty->display($template, $cache_id);\r\n\r\nthis replacement fix cache problems in different module','2010-11-24 12:28:16'),(16,5,'Gediminas','Re:Rimas',NULL,'Thanks for noticing, in near future I will find time to fix it','2010-11-25 09:42:00'),(17,1,'heterhoe','error',NULL,'Warning: Unexpected character in input: \'\\\' (ASCII=92) state=1 in F:\\workspaces\\HeWe\\application\\Bootstrap.php on line 30\r\n\r\nParse error: syntax error, unexpected T_STRING in F:\\workspaces\\HeWe\\application\\Bootstrap.php on line 30\r\n\r\nline 30 is:\r\n$classLoader = new Doctrine\\Common\\ClassLoader(\'Doctrine\')\r\n\r\nwhat is wrong?','2010-12-01 14:01:54'),(18,1,'Gediminas','Re: error',NULL,'you need PHP 5.3 >\r\nerror says that it does not recognize namespace character :)','2010-12-01 16:58:23'),(19,1,'Orhan saglam','Typo in  * FILE: /myapp/scripts/doctrine.php',NULL,'In /myapp/scripts/doctrine.php at\r\nline 30 should be \r\n$cli = new \\Symfony\\Component\\Console\\Application(\r\n    \'Doctrine Command Line Interface\',\r\n    Doctrine\\Common\\Version::VERSION\r\n);\r\nNotice: Components should be Component in class name.','2010-12-08 19:02:09'),(20,7,'Nikolay Georgiev','Yaml implementation',NULL,'First I want to thank you for the great work. \r\nMy question is: How can we implement this with yaml mapping, because I want to generate my entities.','2010-12-08 22:52:23'),(21,7,'Gediminas','Re: Yaml implementation',NULL,'Hi, thanks. Currently yaml mapping is not implemented, but I plan in future to implement it. Probably month or so if noone will contribute before that. ','2010-12-09 17:20:42'),(22,1,'Gediminas','Re: Typo in  * FILE: /myapp/scripts/doctrine.php',NULL,'Hi, thanks for noticing, I will update that soon.','2010-12-09 17:22:49'),(23,4,'Nikolay Georgiev','utf8',NULL,'no support for UTF-8.','2010-12-10 22:50:43'),(24,4,'Gediminas','Re: utf8',NULL,'What do you mean by that? Slugs are in general formatted into ASCII. Or is there an issue with <string>mb</strong> string function usage?\r\n<blockquote><p>\r\n        no support for UTF-8.    </p></blockquote>','2010-12-11 16:12:34'),(25,4,'Nikolay Georgiev','Re: Re: utf8',NULL,'try to slug this: Ñ‚Ð¾Ð²Ð° Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾ Ð·Ð°Ð³Ð»Ð°Ð²Ð¸Ðµ.\r\nMy titles are in bulgarian language. I\'ll fix it . \r\nI just want to let you know  about this problem.','2010-12-11 21:14:36'),(26,4,'','Re: Re: Re: utf8',NULL,'It is hard to support Unicode in php yet. If you will get over it, it would be nice if you could contribute. by the way, the YAML is now supported. I got a lot of requests for that','2010-12-14 21:18:05'),(27,2,'sheryl villaroman','upgrading 5.3.2 to 5.3.4',NULL,'I followed this tutorial when I upgraded Php from v 5.3.2 to Php v5.3.4, and it worked for me. \r\n\r\nThough I encountered IMAP related error, what I did was to install the following;\r\n\r\napt-get install courier-imap\r\napt-get install courier-authlib-baseapt-get\r\n\r\nI also encountered postfix related problem, then I installed\r\n\r\napt-get install postfix\r\napt-get install mailutils \r\n\r\nI also encountered error; configure: error: utf8_mime2text() has new signature, but U8T_CANONICAL is missing\r\n\r\nI run the command below;\r\n\r\napt-get install libc-client-dev\r\n\r\nand run the php_build again, there\'s no more error displayed.\r\n\r\nI have now Php 5.3.4, but I am looking for the php.ini file because I\'m going to disable the display_errors, but I can\'t find it, where is the new php.ini located?\r\n\r\n','2010-12-22 12:48:31'),(28,2,'Gediminas','Re: upgrading 5.3.2 to 5.3.4',NULL,'You can specify the ini file path on build like:\r\n<strong>--with-config-file-path=PATH</strong>\r\nOr in your module.conf\r\n<strong>PHPIniDir /root/src/php-5.3.x/libs</strong>\r\nlike it is shown in the example','2010-12-22 16:20:21'),(29,2,'sheryl villaroman','php.ini',NULL,'hi! thanks for your reply.\r\n\r\nI am still having a hard time on php.ini, \r\nIn my case I upgraded from php 5.3.2 to 5.3.4, I copied php.ini-production from the root folder php-5.3.4 to PHPIniDir /root/src/php-5.3.5/libs (the path of the new php ini directory on my server) and rename it as php.ini.\r\n\r\nI tried to change the value of some of the directives, I disabled display_errors =Off, increased upload_max_filesize = 50M but it\'s not taking an effect when I check it to phpinfo.','2010-12-23 19:08:00'),(30,2,'Gediminas','Re: php.ini',NULL,'hi, you can try to remove if closure in php_mod.conf:\r\n<strong>&lt;ifmodule mod_php5.c=\"\"&gt;</strong>\r\nor you can try to add a syntax error in this closure to see if it gets read. Or rebuild the php with --with-config-file-path=/phpinidir','2010-12-24 11:25:23'),(31,5,'John','headLink',NULL,'Hi, this is brilliant thank you, although I am having a problem with headLink()->appendStylesheet. Should this still work?','2010-12-28 07:09:23'),(32,6,'szjani','Class Table Inheritance',NULL,'Are you planning to support class table inheritance? I\'m developing a Doctrine2/Zend based MVC and I would like to extend my Role entity (which is a tree) in User and Group entities. When I insert a new user, the listener class refresh left and right values only in user records. (Sorry for my bad english.)','2011-01-03 00:02:47'),(33,6,'Gediminas','Re: Class Table Inheritance',NULL,'Hi, yes inheritance as I thought should be supported by now, maybe some updates changed the behavior. Can you report this on github repository? please include your entity code. I think we could solve that fast. Thanks for your notice','2011-01-03 09:21:57'),(34,5,'Gediminas','Re: headLink',NULL,'Yes, sure it works, lets say on index.tpl you add:\r\n{$this->headLink()->appendStylesheet(\'/css/common.css\')}\r\nAnd on layout.tpl:\r\n{$this->headLink()}\r\n\r\nIt would be more clear if you change $this into $view. Modify the library smarty view class to achieve this.\r\nThe result will be as expected, have fun\r\n<blockquote><p>\r\n        Hi, this is brilliant thank you, although I am having a problem with headLink()->appendStylesheet. Should this still work?    </p></blockquote>','2011-01-03 18:58:05'),(35,2,'Marijus','Re: php.ini',NULL,'Since you can see php info, locating php.ini should not be difficult: phpinfo has these two values printed out \"Loaded Configuration File\" and \"Scan this dir for additional .ini files\" - try checking those.','2011-01-12 14:27:54'),(36,4,'Sito','Bug in SluggableListener',NULL,'Hi,\r\nthere is a little bug in SluggableListener on line 206:\r\n$sameSlugs[] = $list[\'slug\'];\r\nshould be:\r\n$sameSlugs[] = $list[$config[\'slug\']];\r\n\r\nAlso, this condition:\r\nif (preg_match(\"@{$config[\'separator\']}\\d+$@sm\", $generatedSlug, $m)) {\r\n   $i = abs(intval($m[0]));\r\n}\r\nproduces strange slugs for fields ending with numbers.\r\nExample: \"I like number 123\"\r\nFirst slug: \"i-like-number-123\"\r\nSecond slug: \"i-like-number-123-124\"\r\nWithout this lines slugs works just fine.\r\n\r\nThanks for Your work!','2011-01-15 13:31:49'),(37,4,'Gediminas','Re: Bug in SluggableListener',NULL,'Thanks for your notice,\r\nfound one more issue when fixed this, now you can update your repository it should be working as expected.\r\nThanks again for your time detecting it, this helps improve these extensions.','2011-01-16 12:55:32'),(38,5,'Kortex786','Exception while testing',NULL,'Hy,\r\n\r\nI tried exactly what you described, and I get this Exception on Index :\r\nUncaught exception \'Zend_View_Exception\' with message \'script \'error/error.phtml\' not found in path\r\n\r\nIt seems like $viewRenderer->setView($view); did nothing  and the default Zend_view is used !\r\n\r\nCan you help me please ?\r\n','2011-01-27 16:57:04'),(39,5,'Gediminas','Re: Exception while testing',NULL,'Hi\r\nTry using the source code which you can download from notice list, at the top of the article.','2011-01-29 22:50:48'),(40,4,'carlos','slug order',NULL,'Can I set the field order to witch will compose the slug, or is just field order in yaml/annotation file?\r\n\r\nThanks.','2011-02-01 15:11:04'),(41,4,'Gediminas','Re: slug order',NULL,'Hi, if you meant the possibility of ordering by slug field then yes it is possible. On fetching the entity list you can set order annotation on slug field also. If I haven\'t answered your question, please explain it in more detail.\r\nHave fun','2011-02-02 00:11:35'),(42,6,'Kyle Spraggs','Incorrect repository',NULL,'You have the incorrect path listed to the repository. The correct path is:\r\n\r\n@Entity(repositoryClass=\"Gedmo\\Tree\\Repository\\TreeNodeRepository\")\r\n\r\nThanks for the extension!','2011-02-02 20:57:51'),(43,6,'Gediminas','Re: Incorrect repository',NULL,'Hi Kyle,\r\nIf you checkout the latest version, it is changed\r\n\r\nYour welcome','2011-02-03 09:52:41'),(44,3,'Jephred','Don\'t work in selfreferencing ManyToOne relation',NULL,'Works great for me but i have an issue with a self referencing category tree (not your nestedset implementation). For children  @OneToMany the fetched records will be translated but not for parent @ManyToOne. Any idea why?\r\n\r\nThank you for your great work. ','2011-02-08 13:24:25'),(45,3,'Gediminas','Re: Don\'t work in selfreferencing ManyToOne relation',NULL,'Hi Jephred, all tests pass in this case. You can check my newly added <strong>/tests/Tree/TranslatableSluggableTreeTest.php</strong> around line: 115. Try updating the ORM.\r\n\r\nYou\'re welcome','2011-02-08 22:35:16'),(46,4,'Gediminas','Re: utf8',NULL,'Regarding <strong>Nikolay Georgiev</strong> request.\r\n\r\nTransliteration was improved to first check char tables, cyrilic characters should be transformed as expected','2011-02-10 01:04:46'),(47,5,'openbsdiste','output method & *basepath',NULL,'I think that your output method shouldn\'t send headers informations as it has to be done by the layer and not to be hardcoded.\r\n\r\nIn setBasePath and addBasePath, I think that script base path and template base dir shouldn\'t be hardcoded.\r\n\r\nAnyway, those two things are details and you\'ve done a great job.\r\nThank you.\r\n','2011-02-11 11:51:49'),(48,5,'jp','error',NULL,'Fatal error: Call to a member function getDefaultModule() on a non-object in myapp\\library\\Zend\\Application\\Bootstrap\\Bootstrap.php on line 89?\r\n','2011-02-19 13:53:24'),(49,5,'Pavel','Change layout',NULL,'Thank you, great solution!\r\nHow i can change layout for some controllers?','2011-02-24 19:09:00'),(50,6,'heiko','try to use it in symfony sandbox..',NULL,'hi, i can\'t get this in symfony 2 sandbox to work;\r\nFatal error: Uncaught exception \'Gedmo\\Exception\\InvalidMappingException\' with message \'Tree type:  is not available.\' in ... vendor/doctrine-extensions/lib/Gedmo/Tree/Mapping/Driver/Yaml.php on line 74\r\n\r\nthere was a notice before:\r\nNotice: Undefined variable: annot ... line 73\r\n\r\nmy dcm.yml looks like this:\r\n<code>\r\n...\r\ntype: entity\r\n  table: qanal_file\r\n  gedmo:\r\n    tree:\r\n      type: nested\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: IDENTITY\r\n  fields:\r\n    name:\r\n...\r\n</code>\r\nphp app/console doctrine:generate:entities MyBundle didn\'t work either. but after private +protected $id in src/Stof/DoctrineExtensionsBundle/Entity/AbstractTranslation.php i had a Entity file and schema:create worked as well.\r\ndo need to add some extras in somewhere somehow(maybe the eventlistener) ...?\r\n','2011-02-24 20:16:35'),(51,3,'Mark','fatal error',NULL,'Hi,\r\nI need some help with your extension.\r\nI\'m using lattest version doctrine2 from git (same with 2.0.1)\r\n\r\nFatal error: Call to undefined method Doctrine\\ORM\\Event\\LoadClassMetadataEventArgs::getDocumentManager() in /DoctrineExtensions/lib/Gedmo/Translatable/ODM/MongoDB/TranslationListener.php on line 64\r\n\r\nAm I doing something wrong?\r\nLooks like TranslationListener trying to can not existing method.','2011-02-24 23:36:55'),(52,6,'Gediminas','Re: heiko',NULL,'That was a bug indeed in yaml mapping. It is fixed, update your doctrine extension repository','2011-02-25 10:41:38'),(53,3,'Gediminas','Re: fatal error',NULL,'Hi Mark, you are trying to use Document listener for EntityManager.\r\nYou are mixing it. ODM -> ODM\\MongoDB\\TranslationListener -> Documents\r\n\r\nORM -> TranslationListener(which is orm in main package) -> Entities','2011-02-25 16:24:35'),(54,3,'','Re: Re: fatal error',NULL,'Thanx. My bad.\r\n\r\nAny plans to support XML drivers?\r\n\r\n<blockquote><p>\r\n        Hi Mark, you are trying to use Document listener for EntityManager.<br>\r\nYou are mixing it. ODM -> ODM\\MongoDB\\TranslationListener -> Documents<br>\r\n<br>\r\nORM -> TranslationListener(which is orm in main package) -> Entities    </p></blockquote>','2011-02-25 23:39:26'),(55,3,'Gediminas','Re: Re: Re: fatal error',NULL,'XML driver support may require different XSD, in that case it gets complicated. But I can promise you that, these extensions will be improved and supported till there is no better solution :) probably it XML will be available one day','2011-02-27 13:59:15'),(56,5,'Myles','Nice Posting',NULL,'First I would like to thank you for this nice blog it helped me a lot.\r\n\r\nIt works\r\n\r\nBy the way there a missing code in your smarty.php\r\n<?  and please remove </type>\r\n','2011-03-01 17:11:54'),(57,5,'Tom Anderson','Module Names in template paths ',NULL,'I\'ve tried your approach and can\'t find how to include module names in template paths such as default/index/index.tpl  \r\nWithout this it seems I\'m stuck with a flat directory structure.\r\n\r\nAlso, I can\'t figure out how to change the default template paths to something like /skins/default/module/controller/action.tpl','2011-03-07 22:24:52'),(58,3,'Pilot','Error in demo http://www.gediminasm.org/test/index',NULL,'Hello! Thanks for work!\r\nFound error here: added Russian language, then choose russian language, then press View in row of record and get error page \"Active language is: Russian\r\n\r\n    * Show Tree\r\n    * List Categories\r\n    * Add Category\r\n    * Add Language\r\n\r\nNode Path:\r\n\r\nWarning: Invalid argument supplied for foreach() in /var/www/gediminasm.org/application/modules/default/views/scripts/test/view.phtml on line 30\r\n\r\nCurrent record\r\nField 	Value 	Translations\r\nId 	\r\nFatal error: Call to a member function getId() on a non-object in /var/www/gediminasm.org/application/modules/default/views/scripts/test/view.phtml on line 45\"','2011-03-09 04:12:13'),(59,6,'naydav','naydav',NULL,'   /**\r\n     * Tries to recover the tree\r\n     * \r\n     * @todo implement\r\n     * @throws RuntimeException - if something fails in transaction\r\n     * @return void\r\n     */\r\n     public function recover();\r\n\r\nnot implement','2011-03-10 16:13:10'),(60,5,'JvM','Smarty translate and Zend_Translate',NULL,'Hi\r\n\r\nThanks for this great explanation. I know it\'s allready an older topic but hopefully you are able to help. I included the translate block for Smarty: http://www.smarty.net/docs/en/plugins.block.functions.tpl\r\n\r\nDo you know if it is possible to use the Zend_Translate system with this? Instead of using a gettext or whatever there is ;)\r\n\r\nThanks in advance','2011-03-10 23:23:17'),(61,6,'Goofy','Problem â€¦',NULL,'Sorry i cant get your bundle to work i get this error on schema:create :\r\n\r\nPHP Catchable fatal error:  Argument 1 passed to Gedmo\\Mapping\\MappedEventSubscriber::loadMetadataForObjectClass() must be an instance of Doctrine\\Common\\Persistence\\ObjectManager, instance of Doctrine\\ORM\\EntityManager given, called in /home/goofy/web/sfTest/vendor/gedmo-doctrine-extensions/lib/Gedmo/Tree/AbstractTreeListener.php on line 143 and defined in /home/goofy/web/sfTest/vendor/gedmo-doctrine-extensions/lib/Gedmo/Mapping/MappedEventSubscriber.php on line 91\r\n\r\nI dont know if it\'s me (i start to play with sf2) or your code â€¦ ;)\r\n\r\nThanks for ur help â€¦\r\n','2011-03-12 06:04:58'),(62,6,'Goofy','Help please',NULL,'I try to use your bundle but i get this error :\r\n\r\nPHP Catchable fatal error:  Argument 1 passed to Gedmo\\Mapping\\MappedEventSubscriber::loadMetadataForObjectClass() must be an instance of Doctrine\\Common\\Persistence\\ObjectManager, instance of Doctrine\\ORM\\EntityManager given, called in /home/goofy/web/sfTest/vendor/gedmo-doctrine-extensions/lib/Gedmo/Tree/AbstractTreeListener.php on line 143 and defined in /home/goofy/web/sfTest/vendor/gedmo-doctrine-extensions/lib/Gedmo/Mapping/MappedEventSubscriber.php on line 91\r\n\r\nDon\'t understand what i doing wrong ( i start to play with sf2)\r\n\r\nThanks for your help â€¦','2011-03-12 06:07:40'),(63,6,'Gediminas','Re: Help please',NULL,'Hi, you must use latest changes of doctrine orm, checkout the master branch.\r\nIf you used symfony-standard sandbox open your <strong>/bin/vendors.sh</strong> and remove revision tags from:\r\n1) install_git doctrine git://github.com/doctrine/doctrine2.git 2.0.2\r\n2) install_git doctrine-common git://github.com/doctrine/common.git 2.0.1\r\n\r\nin result it should be:\r\n1) install_git doctrine git://github.com/doctrine/doctrine2.git\r\n2) install_git doctrine-common git://github.com/doctrine/common.git\r\n\r\nrun: <strong>./bin/vendors.sh --reinstall</strong>\r\nIt should be working now.','2011-03-12 17:12:43'),(64,6,'Goofy','Re: Re: Help please',NULL,'Thanks but i use Symfony Standard Edition PR7 from official site but there is no /bin in this distribution â€¦\r\n\r\n<blockquote><p>\r\n        Hi, you must use latest changes of doctrine orm, checkout the master branch.<br>\r\nIf you used symfony-standard sandbox open your <strong>/bin/vendors.sh</strong> and remove revision tags from:<br>\r\n1) install_git doctrine git://github.com/doctrine/doctrine2.git 2.0.2<br>\r\n2) install_git doctrine-common git://github.com/doctrine/common.git 2.0.1<br>\r\n<br>\r\nin result it should be:<br>\r\n1) install_git doctrine git://github.com/doctrine/doctrine2.git<br>\r\n2) install_git doctrine-common git://github.com/doctrine/common.git<br>\r\n<br>\r\nIt should be working now.    </p></blockquote>','2011-03-12 17:17:41'),(65,6,'Goofy','Re: Re: Re: Help please',NULL,'ok i get /bin from sandbox git repository make the upgrade and now :\r\n\r\nUncaught exception \'Symfony\\Component\\Config\\Definition\\Exception\\InvalidConfigurationException\' with message \'Unrecognized options \"driver, host, dbname, user, password, logging\" under \"doctrine.dbal\"\' in /home/goofy/web/sfTest/vendor/symfony/src/Symfony/Component/Config/Definition/ArrayNode.php on line 414\r\n\r\n:(','2011-03-12 18:02:30'),(66,6,'Gediminas','Re: Re: Re: Re: Help please',NULL,'in your <strong>app/config/config.yml</strong> doctrine configuration should look like:\r\n\r\n# Doctrine Configuration\r\ndoctrine:\r\n    dbal:\r\n        default_connection: default\r\n        connections:\r\n            default:\r\n                driver: pdo_mysql\r\n                host: localhost\r\n                dbname: mydb\r\n                user: root\r\n                password: secret\r\n                logging: %kernel.debug%\r\n\r\n    orm:\r\n        default_entity_manager: default\r\n        entity_managers:\r\n            default:\r\n                connection: default\r\n                mappings:\r\n                    StofDoctrineExtensionsBundle: ~\r\n        auto_generate_proxy_classes: %kernel.debug%\r\n\r\nAdjust it to your credentials','2011-03-12 18:13:17'),(67,6,'goofy','Re: Re: Re: Re: Re: Help please',NULL,'What a headache :( â€¦\r\n\r\nFatal error:  Class \'Gedmo\\Tree\\TreeListener\' not found in /home/goofy/web/sfTest/app/cache/dev/appDevDebugProjectContainer.php on line 853\r\n\r\nThanks for your help anyway','2011-03-12 18:32:10'),(68,6,'goofy','Re: Re: Re: Re: Re: Re: Help please',NULL,'Sorry i forget to add the gedmo-doctrine-extensions to my updatev /vendor dir â€¦','2011-03-12 18:45:21'),(69,6,'Gediminas','Re: Help please',NULL,' I cannot teach you how to use symfony, probably you havent registered the autoloader, follow readme in StofDoctrineExtensionsBundle. Have fun','2011-03-12 18:47:50'),(70,6,'Goofy','Me again ...',NULL,'SQLSTATE[23000]: Integrity constraint violation: 1048 Column \'root\' cannot be null \r\n\r\nOn print_r after persist lvl rgt et lft are calculated but root stay empty â€¦','2011-03-12 23:47:20'),(71,6,'Gediminas','Re: Me again ...',NULL,'you always can check unit tests, for that kind of thing','2011-03-13 14:57:43'),(72,1,'sam','error',NULL,'php doctrine orm:convert-mapping --from-database yml /path/to/mapping-path-converted-to-yml\r\n\r\nI get a file \"User.dcm.yml\" and the first line is \"User:\"\r\n\r\nI know, this is incorrect, it should be \"Entity.User.dcm.yml\" and \"Entity\\User\" (http://www.doctrine-project.org/docs/orm/2.0/en/\r\nreference/yaml-mapping.html). \r\n\r\nwhat is wrong? ','2011-03-15 04:59:50'),(73,1,'Gediminas','Re: error',NULL,'Yes probably it is a mistake of mine, I will fix that later, thanks for noticing. Try annotation mapping instead if you cant get it to work by now.','2011-03-15 17:41:50'),(74,6,'naydav','How do I specify that the object does not have parents?',NULL,'How do I specify that the object does not have parents?\r\n$ page-> setParent (false); not working\r\nThank you','2011-03-16 18:49:22'),(75,7,'hetsch','Error subscribing to event',NULL,'Hi, thank you a lot for your work, seems to be great extensions. My problem is that i get the following error. (using doctrine 2.0.2)\r\n\r\nCatchable fatal error: Argument 1 passed to Gedmo\\Mapping\\MappedEventSubscriber::loadMetadataForObjectClass() must be an instance of Doctrine\\Common\\Persistence\\ObjectManager, instance of Doctrine\\ORM\\EntityManager given, called in D:\\webroot\\Groundcontrol3\\library\\Gedmo\\Timestampable\\AbstractTimestampableListener.php on line 31 and defined in D:\\webroot\\Groundcontrol3\\library\\Gedmo\\Mapping\\MappedEventSubscriber.php on line 91\r\n\r\nDo you know what the problem might be?\r\n\r\nThx a lot','2011-03-17 21:51:07'),(76,7,'Gediminas','Re: Error subscribing to event',NULL,'Thanks,\r\nYou need to checkout doctrine2 at master branch. Maybe I will revert this requirement soon because a lot of people having this problem','2011-03-18 10:13:04'),(77,7,'hetsch',' Re: Error subscribing to event',NULL,'Million thanks, works perfect!!!','2011-03-19 11:57:18'),(78,1,'sam','Re: Re: error',NULL,'I am more worried\r\n\r\nModify the way you can tell me\r\n\r\n\r\n<blockquote><p>\r\n        Yes probably it is a mistake of mine, I will fix that later, thanks for noticing. Try annotation mapping instead if you cant get it to work by now.    </p></blockquote>\r\n','2011-03-21 05:19:19'),(79,1,'Gediminas','Re: Re: Re: error',NULL,'Thats not a bug, I checked it and in general, when you export your models from the database, it cannot know any namespace of your entities. For that feature to be available everyone would need to follow the naming conventions of tables, in order to recognize namespaces, which I think no one will want.','2011-03-22 16:26:27'),(80,6,'Red Beard','Exception Message',NULL,'Hello, I updated to the latest version of the Doctrine 2, as recommended. \r\n\r\n1) Warehouse\\Entity\\ManagingEntityTest::testCanCreateManagingEntity\r\nGedmo\\Exception\\InvalidMappingException: Unable to find ancestor/parent child relation through ancestor field - [parent] in class - Warehouse\\Entity\\ManagingEntity\r\n\r\n/var/www/workspace/warehouse/library/DoctrineExtensions/Gedmo/Tree/Mapping/Driver/Annotation.php:140\r\n/var/www/workspace/warehouse/library/DoctrineExtensions/Gedmo/Mapping/ExtensionMetadataFactory.php:72\r\n/var/www/workspace/warehouse/library/DoctrineExtensions/Gedmo/Mapping/MappedEventSubscriber.php:94\r\n/var/www/workspace/warehouse/library/DoctrineExtensions/Gedmo/Tree/AbstractTreeListener.php:143\r\n/var/www/workspace/warehouse/library/Doctrine/Common/EventManager.php:64\r\n/var/www/workspace/warehouse/library/Doctrine/ORM/Mapping/ClassMetadataFactory.php:312\r\n/var/www/workspace/warehouse/library/Doctrine/ORM/Mapping/ClassMetadataFactory.php:170\r\n/var/www/workspace/warehouse/library/Doctrine/ORM/Mapping/ClassMetadataFactory.php:124\r\n/var/www/workspace/warehouse/tests/EntityTestCase.php:32\r\n/var/www/workspace/warehouse/tests/library/Warehouse/Entity/ManagingEntityTest.php:17\r\n\r\nAny Suggestions, do you need any other output?\r\n\r\nThanks,\r\n-Red Beard','2011-03-25 17:16:50'),(81,6,'Gediminas','Re: Exception Message',NULL,'Hi, it seems like your $parent property is not mapped as a relation or it is wrong one. It should be similar to:\r\n/**\r\n * @gedmo:TreeParent\r\n * @ManyToOne(targetEntity=\"ManagingEntityTest\")\r\n */\r\nprivate $parent;\r\n\r\nEnsure it is @ManyToOne because one record can have many children','2011-03-25 18:29:48'),(82,5,'Gediminas','Re: Smarty translate and Zend_Translate',NULL,'Hi, I currently do not work with zend anymore, but I have used translations with smarty3 and it worked as it should normally. I mean Zend_Translate. <a href=\"http://dev.mjk.lt/I18nCommand\">here</a> is a tool I used for translation file generation from templates and other files.','2011-03-26 14:58:19'),(83,6,'','Re: Re: Exception Message',NULL,'<blockquote><p>\r\n        Hi, it seems like your $parent property is not mapped as a relation or it is wrong one. It should be similar to:<br>\r\n/**<br>\r\n * @gedmo:TreeParent<br>\r\n * @ManyToOne(targetEntity=\"ManagingEntityTest\")<br>\r\n */<br>\r\nprivate $parent;<br>\r\n<br>\r\nEnsure it is @ManyToOne because one record can have many children    </p></blockquote>\r\n\r\n1) Thank you, that fixed my initial problem\r\n\r\n2) Is there a forum I should be posting questions to?\r\n\r\n3) I have another issue:\r\n\r\nHere is the error, followed by the test code.\r\n\r\nGedmo\\Exception\\UnexpectedValueException: Root cannot be changed manualy, change parent instead\r\n\r\nTEST CODE\r\n        $me = new ManagingEntity();\r\n\r\n        $me->setTitle(self::TEST_TITLE);\r\n\r\n        $met = new ManagingEntityType();\r\n\r\n        $met->description = \"DISTRICT\";\r\n        \r\n        $em = $this->doctrineContainer->getEntityManager();\r\n\r\n        //$em->clear();\r\n\r\n        $em->persist($met);\r\n        $em->flush();\r\n\r\n        $me->managingEntityType = $met->id;\r\n\r\n\r\n        $em->persist($me);\r\n        $em->flush();\r\n\r\n        $mes = $em->createQuery(\"select me from Warehouse\\Entity\\ManagingEntity me\")->execute();\r\n\r\n        //one gets added in the fixture\r\n        $this->assertEquals(1,count($mes));\r\n\r\nIn your example code, I never have to set a root or parent node. I tried setting the parent to null via $me->setParent(null) but I received a different error. Any suggestions?\r\n\r\n','2011-03-28 17:13:18'),(84,6,'Gediminas','Re: Re: Re: Exception Message',NULL,'Hi, there is no forum here yet :) but it looks like it is needed. I\'m porting this blog from Zend to Symfony2 maybe I\'ll do a forum also.\r\nYou could email me, I would respond faster gediminas.morkevicius@gmail.com\r\n\r\nRelated to your issue, I\'ll make some more tests to check if setting the parent works fine. And give you a feedback','2011-03-28 18:26:19'),(85,6,'Gediminas','Re: Red Beard',NULL,'I have added a test case for that, everything works perfect. I\'m sure that it is a problem related to entity refresh. If you persist and flush the tree node. You must $em->clear(); or $em->refresh($flushedNode); before using any value of it. I mentioned it in tutorial, that nested set tree model must issue atomic updates to left and right values in order to synchronize the tree, and my extension just cannot update all in memory nodes because it would be too painful.\r\nI recommend you to $em->clear() after each flush on tree node.\r\nIn your case you can simply initiate the second node after first is flushed. refresh or load the flushed node and set initiated the dependent values.','2011-03-28 18:51:31'),(86,7,'daki','Error subscribing to event',NULL,'Hi, great idea about these extensions, I find them extremely useful.\r\nI have the same problem as hetsch mentioned, any plans on changing this to work with new versions of doctrine?\r\nOr am I doing something wrong?\r\nI\'m using 2.0.3\r\nThanks in advance,\r\nDaki','2011-04-03 00:13:42'),(87,7,'Gediminas','Re: Error subscribing to event',NULL,'Hi, go to http://github.com/doctrine clone or download <strong>doctrine2</strong> and <strong>common</strong> at master branch. Adapt these libraries to your project and it will work.\r\nThese extensions always use latest features of Doctrine2 and already uses Doctrine2.1.','2011-04-03 15:14:09'),(88,7,'Gediminas','Re: Error subscribing to event',NULL,'I have created a branch <strong>doctrine2.0.x</strong> it is compatible with doctrine2.0.x versions. You can simply go to http://github.com/l3pp4rd/DoctrineExtensions/tree/doctrine2.0.x\r\nand download it','2011-04-03 17:46:06'),(89,7,'daki','Re: Re: Error subscribing to event',NULL,'Now this is what I needed, thank you a million sir! \r\nWorks like a charm... I still suck at using GIT and branches etc... I\'m still using SVN so this confused me, thanks for the link and for time to explain and to create all this of course.\r\nRegards,\r\nDaki\r\n<blockquote><p>\r\n        I have created a branch <strong>doctrine2.0.x</strong> it is compatible with doctrine2.0.x versions. You can simply go to http://github.com/l3pp4rd/DoctrineExtensions/tree/doctrine2.0.x<br>\r\nand download it    </p></blockquote>','2011-04-04 10:57:38'),(90,7,'Manu','Re: Re: Error subscribing to event',NULL,'<blockquote><p>\r\n        I have created a branch <strong>doctrine2.0.x</strong> it is compatible with doctrine2.0.x versions. You can simply go to http://github.com/l3pp4rd/DoctrineExtensions/tree/doctrine2.0.x<br>\r\nand download it    </p></blockquote>\r\n\r\nThank you very much !','2011-04-05 22:17:54'),(91,3,'N. Peter','serialized objects',NULL,'Thanks, this is the best translation solution I\'ve ever seen. The only thing I\'m missing is the ability to store serialized (value) objects (column type: object) instead of just strings (column type: string, text).','2011-04-07 17:42:15'),(92,3,'Gediminas','Re: serialized objects',NULL,'It is already possible in master branch of extensions, which requires doctrine from master','2011-04-08 10:12:26'),(93,6,'Goran JuriÄ‡','PHP annotation',NULL,'You should update the PHP annotation example and add \"nullable=true\" to the root element to prevent this error:\r\n\r\n  [Gedmo\\Exception\\InvalidMappingException]                                 \r\n  Tree root field - [root] must be nullable in class - Imp\\Entity\\Category  ','2011-04-10 01:27:56'),(94,3,'Steven Rosato','Setting translations without flush would be nice',NULL,'Hi there, I really like the plugin there, very neat code behind the scenes and I like it how it is easy to use it. However, when used extensively with data fixtures and product internationalization, it becomes quite cumbersome to always switch the locale, update the content and flush the entity manager. Would there be a possible way to easily provide a mechanism where all translation can be given without having to flush the entity manager every time. Flushing the manager in data fixtures become costly with a lot of fixtures.\r\n\r\ni.e of an approach with a single flush regardless of how many translations are given\r\n\r\n$product = new Product();\r\n$product->setDescription(\"A description\");\r\n$product->setLocale(\'fr\');\r\n$product->setDescription(\"Une description\");\r\n\r\n$em->flush()\r\n\r\nTranslatable field would cache the updates and execute the required updates on flush.\r\n\r\nI would like to know your thoughts on that','2011-04-10 19:39:20'),(95,3,'Gediminas','Re: Setting translations without flush would be nice',NULL,'Hi, thanks.\r\nIn my plans for Translatable there are:\r\n1. just what you mentioned, multiple translation persistence.\r\n2. when persister overriding will be available, perhaps doctrine2.1, there will be no more additional query for retrieving translations.\r\n3. create a query walker, which would modify a given query so it could autojoin translations on fields which are translatable. That could require additional work on entity model itself, since translation will require foreign key constraint relation. That also would be helpful for multiple translation persistense','2011-04-11 11:52:47'),(96,6,'Gediminas','Re: PHP annotation',NULL,'Probably next week I will move this blog to symfony2 framework, and together update all articles','2011-04-11 11:55:54'),(97,3,'Conrad','findTranslations from custom repository',NULL,'Thanks for this great extension, it really saves me a lot of time! Keep up the good work :)\r\n\r\nJust wanted to share with you some code to get all translations from a document\'s repository within symfony2:\r\n\r\n[code]\r\n<?php\r\nnamespace Application\\LocationBundle\\Document;\r\n\r\nuse Doctrine\\ODM\\MongoDB\\DocumentRepository;\r\nuse Doctrine\\ODM\\MongoDB\\DocumentManager;\r\n\r\nuse Application\\LocationBundle\\Document\\Country;\r\n\r\nclass CountryRepository extends DocumentRepository\r\n{\r\n    /**\r\n     * Find a Country\'s Translation\r\n     *\r\n     * @param Application\\LocationBundle\\Document\\Country $country\r\n     * @param Doctrine\\DOM\\MongoDB\\DocumentManager $dm\r\n     */\r\n    public function findTranslations(Country $country, DocumentManager $dm)\r\n    {\r\n        $repository = $dm->getRepository(\'StofDoctrineExtensionsBundle:Translation\');\r\n        $translations = $repository->findTranslations($country);\r\n        return $translations;\r\n    }\r\n}\r\n[/code]','2011-04-13 12:06:59'),(98,3,'bart','Gedmo\\Timestampable\\Mapping\\Translatable does not exist.',NULL,'hi,\r\nI have just updated my sf2 project to pr11 with all submodules. When I run anything where translated objects are used, I get this Exception:\r\n\r\n[Semantical Error] Annotation class \r\n\"Gedmo\\Timestampable\\Mapping\\Translatable\" does not exist.\r\n\r\nI checked about hundret times if there is a typo in my annotation, but I didnt find anything. also it worked before the update (version from last monday, april 4th or so). \r\n\r\nDo I need to change my annotation? Or use another Class instead of Gedmo\\Translatable\\Translatable ?\r\n\r\nPlease help.','2011-04-14 13:13:06'),(99,3,'Gediminas','Re: Gedmo\\Timestampable\\Mapping\\Translatable does not exist.',NULL,'Hi, there are 2 branches in gedmo-doctrine-extensions:\r\nmaster - is compatible with doctrine master branch\r\ndoctrine2.0.x - branch is compatible only with doctrine 2.0.x components.\r\nI\'m sure that you are trying to use branch2.0.x on latest doctrine components.\r\nIf you use symfony. go to vendor/gedmo-doctrine-extensions\r\nrun: git checkout master\r\nit should work now','2011-04-14 14:57:59'),(100,3,'bart','Re: Re: Gedmo\\Timestampable\\Mapping\\Translatable does not exist.',NULL,'<blockquote>\r\n<p>\r\nIf you use symfony. go to vendor/gedmo-doctrine-extensions<br>\r\nrun: git checkout master<br>\r\nit should work now    </p>\r\n</blockquote>\r\n\r\nThanks a lot, that was it :) works like charm again :)','2011-04-14 16:16:50'),(101,3,'Geomancer','Small help needed',NULL,'Hi, I am trying to implement this extension in my CI 2 + D2 project, and I can\'t seem to make it work properly.\r\n\r\nI have ironed a lot of issues with my config, and currently I am having this error:\r\n\r\nThere is no column with name \'objectClass\' on table \'article_translations\'.\r\n\r\nIf you have time, would you point me in the correct direction?\r\n\r\nExtra info: I am using Doctrine 2.0.X and the correct extension branch.\r\n\r\nIt may be a problem related with using the Doctrine Schema Tool for creating the tables? I am not using yml.\r\n\r\nThanks in advance','2011-04-25 13:21:02'),(102,3,'Geomancer','Is working now!',NULL,'I have just deleted the ObjectClass parameter and it is working perfectly.\r\n\r\nThanks again form developing this awesome extension!','2011-04-25 13:34:20'),(103,3,'Gediminas','Re: Is working now!',NULL,'Hi, thanks, could you be more precise about an issue you had? maybe there is something to fix in extension side? Where did you had this objectClass parameter?','2011-04-25 13:56:45'),(104,3,'Geomancer','Re: Re: Is working now!',NULL,'<blockquote><p>\r\n        Hi, thanks, could you be more precise about an issue you had? maybe there is something to fix in extension side? Where did you had this objectClass parameter?    </p></blockquote>\r\n\r\nIn this part, I deleted ObjectClass and it worked fine after that. Also changing in to \"object_class\" managed to build the correct index as intended.\r\n\r\n/**\r\n * @Table(name=\"article_translations\", indexes={\r\n *      @index(name=\"article_translation_idx\", columns={\"locale\", \"objectClass\", \"foreign_key\", \"field\"})\r\n * })\r\n * @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\")\r\n */','2011-04-25 15:03:57'),(105,3,'Gediminas','Re: Re: Re: Is working now!',NULL,'yes, indexes must use column names not field names, also you should add unique index for translation, this will boost the usage of query hint for TranslationWalker. for indexes you can check: Gedmo\\Translatable\\Entity\\Translation and just copy the indexes.\r\nHave fun','2011-04-25 15:51:42'),(106,3,'bart','querying with objectId instead of string',NULL,'I recognized a strange behaviour when loading a translatable document: the name is empty. After some diving I found out that the query used to get the translation looks like this:\r\n\r\ndb.Translation.find({ \"foreign_key\": ObjectId(\"4dba886a6e789411160012d3\"), \"locale\": \"en_us\", \"objectClass\": \"Application\\LocationBundle\\Document\\City\" }).sort([ ]);\r\n\r\nBut the actual entry in the database looks like this (from the sf2 profiler):\r\n\r\n\r\n{ \"_id\" : ObjectId(\"4dba88a56e78941116006983\"), \"locale\" : \"en_us\", \"objectClass\" : \"Application\\\\LocationBundle\\\\Document\\\\City\", \"field\" : \"name\", \"foreign_key\" : \"4dba886a6e789411160012d3\", \"content\" : \"Essen\" }\r\n\r\nthe foreign_key used for referencing is only a string - not an objectId.. I hooked up in all repository methods to find out where the id is converted, with not luck :/\r\n\r\nThe other difference is the double backslash in objectClass, but this is probably mapped by doctrine and the only issue is with the foreign_key value..','2011-04-29 16:20:50'),(107,3,'Gediminas','Re: querying with objectId instead of string',NULL,'Hi, thats strange, since all tests pass for translatable in mongodb. Can you tell which mongo odm version you are using exactly. at which commit hash? I will check it this weekend try to reproduce your issue. I think id conversion is done in listener user event adapter for odm so its the core of extensions. It would be convenient if you could provide a unit test case in extensions, but anyway I will check it.','2011-04-29 18:20:00'),(108,3,'bart','Re: Re: querying with objectId instead of string',NULL,'Sorry for the late answer.\r\n<blockquote>Hi, thats strange, since all tests pass for translatable in mongodb</blockquote>\r\nI remember about 2-3 weeks ago everything was working fine.. \r\n<blockquote>. Can you tell which mongo odm version you are using exactly. at which commit hash? </blockquote>\r\nI just updated to one of the latest ones, but wrote my comment before the update (sorry for that): https://github.com/doctrine/mongodb-odm/commit/250c299ba6dada069f198f4fded36e69e5e42b8b\r\n\r\nI dived into the event mapping and recognized that in Gedmo\\Mapping\\Event\\Adapter\\ODM line 65 the id is returned as a mongoid object.. \r\n\r\npersonally, I wouldn\'t mind if the datatype in foreign_key would be a dbref.. then I would \'just\' need to findAndModify all translations..\r\n\r\n//p.s.\r\nUnfortunately my php/pear environment mit phpunit (3.4) is somehow broken and it seems I dont get it repaired => that\'s why I event can\'t run the phpunit tests :/','2011-05-01 15:26:20'),(109,6,'dmitry','Gedmo Exception',NULL,'php app/console doctrine:schema:create\r\n\r\n  [Gedmo\\Exception\\InvalidMappingException]\r\n  Unable to find \'left\' - [lft] as mapped property in entity - Chewbacca\\CoreBundle\\Entity\\Section','2011-05-01 18:06:21'),(110,6,'dmitry','Tree Listener',NULL,'in wich file i need to attach the Tree Listener to your event system?','2011-05-02 13:15:16'),(111,6,'Gediminas','Re: Tree Listener',NULL,'If you use Symfony2 it is done in config.yml if you use plain doctrine2. You should attach the listener just after you create EntityManager or in create function itself. If you attach it latter it is important that metadata would not be requested before attaching. You can check the Doctrine2 on zend tutorial. And use EventManager to attach the listener. Have fun','2011-05-02 15:39:24'),(112,3,'Gediminas','Re: Re: Re: querying with objectId instead of string',NULL,'The relation to foreign_key could be made only if a translation would be personal for a single object. I will consider later on implementing different Translation model for that to be extended.','2011-05-02 15:42:11'),(113,3,'Bart','Re: Re: Re: Re: querying with objectId instead of string',NULL,'<blockquote><p>\r\n        The relation to foreign_key could be made only if a translation would be personal for a single object. I will consider later on implementing different Translation model for that to be extended.    </p></blockquote>\r\nI see, that makes sense :) \r\ndo you have an idea what we could do here?','2011-05-02 18:07:44'),(114,3,'Bart','Re: querying with objectId instead of string',NULL,'For now, I commented lines 64 to 68 out and use only line 67:\r\n$id = $meta->getReflectionProperty($meta->identifier)->getValue($object);\r\n\r\nthe queries seem to be ok and I get my result as expected..\r\nHopefully this doesnt brake somewhere else :)\r\n\r\nCheers','2011-05-04 18:07:12'),(115,3,'Gediminas','Re: Re: querying with objectId instead of string',NULL,'Sorry do not have time to really test the issue, maybe in few days I\'ll fix it to be compatible for all cases.','2011-05-04 18:37:33'),(116,3,'Krzysztof','Table \'doctrine2.ext_translations\' doesn\'t exist',NULL,'I used example from this page to create database schema:\r\n\r\nuse Gedmo\\Translatable\\Translatable;\r\n/**\r\n * @Table(name=\"articles\")\r\n * @Entity..........\r\n.....\r\n\r\nIt creates one table.\r\n\r\nafter execute:\r\n$article = new models\\Article;\r\n$article->setTitle(\'my title in en\');\r\n$article->setContent(\'my content in en\');\r\n$this->em->persist($article);\r\n$this->em->flush();\r\n\r\nERROR:\r\n....1146 Table \'doctrine2.ext_translations\' doesn\'t exist\r\n\r\nI think, I\'m  missing something again','2011-05-06 17:45:02'),(117,3,'Gediminas','Re: Table \'doctrine2.ext_translations\' doesn\'t exist',NULL,'Hi, you do not have the mapping set for translation\r\nif you use symfony2\r\norm:\r\ndefault:\r\nmapping:\r\nStofDoctrineExtensionsBundle: ~\r\n\r\nIf you use plain doctrine, you should add an extra mapping driver: like in this blog post','2011-05-06 18:12:16'),(118,3,'Krzysztof','Re: Re: Table \'doctrine2.ext_translations\' doesn\'t exist',NULL,'Thank you for your reply.\r\nNO.\r\nCodeinteger2 + Doctrine2\r\n...\r\n@gedmo:Translatable(tested) and possibly other extensions are working well. \r\nAnd symfony mapping... I saw a symfony once\r\n','2011-05-06 18:30:30'),(119,3,'','Re: Re: Table \'doctrine2.ext_translations\' doesn\'t exist',NULL,'Sorry to bother, but could you look at the Top of a piece of configuration. I can delete and create a table, but one. And I can not save the record because \"... ext_translations\'does not exist. \"\r\nI can not find a hint anywhere that should arise in result of the creation of db schema.\r\n\r\n\r\n// Set up driver\r\n    $Doctrine_AnnotationReader = new \\Doctrine\\Common\\Annotations\\AnnotationReader($cache);\r\n    $Doctrine_AnnotationReader->setDefaultAnnotationNamespace(\'Doctrine\\ORM\\Mapping\\\\\');\r\n    \r\n    //$driver = new \\Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver($Doctrine_AnnotationReader, APPPATH.\'models\');\r\n    \r\n    //????????? \r\n    \r\n    $chainDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\DriverChain();\r\n	$yourDefaultDriverImpl = new \\Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver($Doctrine_AnnotationReader, APPPATH.\'models\');\r\n	$translatableDriverImpl = $config->newDefaultAnnotationDriver(APPPATH.\'libraries/DoctrineExtensions/lib/Gedmo/Translatable/Entity\');\r\n	$chainDriverImpl->addDriver($yourDefaultDriverImpl, \'models\');\r\n	$chainDriverImpl->addDriver($translatableDriverImpl, \'Gedmo\\Translatable\');\r\n	\r\n	$config->setMetadataDriverImpl($chainDriverImpl);\r\n    \r\n    //?????????','2011-05-06 19:22:06'),(120,3,'Gediminas','Re: Re: Re: Table \'doctrine2.ext_translations\' doesn\'t exist',NULL,'Try to test if it detects the mapping. $em->getClassMetadata(\'Gedmo\\Translatable\\Entity\\Translation\')\r\n\r\nIt looks like your cli version php script does not use the second driver. Try test the metadata on both cli and application. doctrine:orm:schema-create or something similar, should create the ext_translations table if it detects the metadata mapping. You could send me an email or contact me by skype if you are still having issues','2011-05-07 20:52:11'),(121,3,'Symfony2.0 Beta User','Is it wokring with the new Symfony2 Beta ?',NULL,'Is it working with the new Symfony2 Beta1? I tried to install the doctrine extension and the symfony2 stof bundle . But nothing will be stored into the ext_translations table ? I added all the annotations in my Entity file. (as described in the article tutorial) . Where exactly should I enter the following lines in Symfony2: $classLoader = new \\Doctrine\\Common\\ClassLoader(\'Gedmo\', \"/path/to/library/DoctrineExtensions/lib\");\r\n$classLoader->register(); Or will it be automatically added by the Symfony Stof bundle ? thanks for your reply','2011-05-09 17:29:22'),(123,3,'Gediminas','Re: Is it wokring with the new Symfony2 Beta ?',NULL,'For symfont2 integration, documentation on stof bundle covers it fully','2011-05-09 18:18:32'),(124,7,'Murat Ãœ.','Timestample',NULL,'Having same issue writing in here... http://groups.google.com/group/doctrine-user/browse_thread/thread/23fb347a15a97ae\r\n\r\nWhat may i do? ','2011-05-10 00:53:28'),(125,7,'Murat Ãœ.','Timestample',NULL,'Having same issue writing in here... http://groups.google.com/group/doctrine-user/browse_thread/thread/23fb347a15a97ae\r\n\r\nWhat may i do? ','2011-05-10 01:05:23'),(126,7,'Gediminas','Re: Timestample',NULL,'http://gist.github.com/964075 I see you dont even understand how to create entity manager. So do not flood in my blog, and read a doctrine2 tutorial.','2011-05-10 11:06:31'),(127,6,'StÃ©phane K','Minor mistake...',NULL,'Hi,\r\n\r\nThanks a lot for this extension. Works fine for me. Just a little notice : in the code snippet of the \'tree entity example\', the private property \'$parent\' should be replaced, I think, by \'$parent_id\' (the example doesn\'t work without that modification). Thanks again.\r\n\r\nRegards','2011-05-10 16:00:29'),(128,6,'StÃ©phane K','Re: Minor mistake...',NULL,'Sorry for that stupid remark. Everything is fine...\r\n\r\n<blockquote><p>\r\n        Hi,<br>\r\n<br>\r\nThanks a lot for this extension. Works fine for me. Just a little notice : in the code snippet of the \'tree entity example\', the private property \'$parent\' should be replaced, I think, by \'$parent_id\' (the example doesn\'t work without that modification). Thanks again.<br>\r\n<br>\r\nRegards    </p></blockquote>','2011-05-10 16:08:32'),(129,6,'Dmitry','how 2 render',NULL,'What better way to build a html tree?','2011-05-11 00:20:16'),(130,3,'Reto Ryter','Toubles',NULL,'Hello Gediminas\r\n\r\nFirst of all: Good job dude! Keep up the good work.\r\n\r\nI\'m in need of advice:\r\n\r\nI want to save my translations in a different table. So I did as you described it. But I can\'t get it work.\r\n\r\n<?php\r\nnamespace System\\Models\\Translation;\r\n\r\nuse Gedmo\\Translatable\\Entity\\AbstractTranslation;\r\n\r\n/**\r\n * @Table(name=\"contenttype_translations\", indexes={\r\n *      @index(name=\"contenttype_translation_idx\", columns={\"locale\", \"foreign_key\", \"field\"})\r\n * })\r\n * @Entity(repositoryClass=\"System\\Models\\Translation\\ContentTypeTranslation\")\r\n */\r\nclass ContentTypeTranslation extends AbstractTranslation\r\n{\r\n    /**\r\n     * All required columns are mapped through inherited superclass\r\n     */\r\n}\r\n\r\n--------------------------------------------------\r\n\r\nnamespace System\\Models;\r\n\r\n/**\r\n * @Entity\r\n * @Table(name=\"contenttypes\")\r\n * @gedmo:TranslationEntity(class=\"System\\Models\\Translation\\ContentTypeTranslation\")\r\n */\r\n\r\nclass ContentTypes ...\r\n\r\n------------------------------------------------------------------------\r\n\r\n$repository = $this->entityManager->getRepository(\'System\\Models\\Translation\\ContentTypeTranslation\');\r\n        $translations = $repository->findTranslations($test);\r\n\r\n$repository is alway NULL. In addition $repository doesn\'t have the findTranslations method.\r\n\r\nAny help?','2011-05-11 01:20:58'),(131,3,'','Re: Troubles',NULL,'I also get this error \r\n\r\n\r\n No identifier/primary key specified for Entity \'System\\Models\\Translation\\ContentTypeTranslation\'. Every Entity must have an identifier/primary key.\r\n\r\nwhen I leave the ContentTypeTranslation empty. somehow inheritance is not working?','2011-05-11 01:24:15'),(132,3,'Gediminas','Re: Re: Troubles',NULL,'First of all, repository @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\") just like in tutorial.\r\nSecond, do you have mapping driver for Gedmo\\Translatable\\Entity?\r\nThere is no magic here, everything works perfect, its only a matter of your configuration and how you understand it.','2011-05-11 09:02:41'),(133,3,'Reto','Re: Re: Re: Troubles',NULL,'The configuration for my translatable mapping driver was incorrect. Thanks for you ligthning fast answer!\r\n\r\nI appreciate that.\r\n\r\n<blockquote><p>\r\n        First of all, repository @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\") just like in tutorial.<br>\r\nSecond, do you have mapping driver for Gedmo\\Translatable\\Entity?<br>\r\nThere is no magic here, everything works perfect, its only a matter of your configuration and how you understand it.    </p></blockquote>','2011-05-11 09:52:30'),(134,7,'','Re: Re: Timestample',NULL,'<blockquote><p>\r\n        http://gist.github.com/964075 I see you dont even understand how to create entity manager. So do not flood in my blog, and read a doctrine2 tutorial.    </p></blockquote>\r\n\r\nSo easy? I think i am going to cry, i even did not notice it :( Sorry for the food, my network is not stable in Turkey, i thought it did not submit the message.\r\n\r\nThank you very much for the code\r\nGreetings from Turkey','2011-05-11 12:17:36'),(135,6,'psycho','nested set and fixtures',NULL,'Hello. I have problem with loading fixtures to nested set tables.\r\nI get such error:\r\n\r\nSQLSTATE[23000]: Integrity constraint violation: 1048 Column \'lft\' cannot be null \r\n\r\nWhat should i do to avoid this error?','2011-05-11 15:52:31'),(136,1,'Miles','Fatal error',NULL,'I\'ve double checked everything but when i get to \r\ndoctrine migrations:diff\r\ni get the following error:\r\n\r\nRunning Doctrine CLI.\r\nPHP Fatal error:  Call to undefined method Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\DiffCommand::getApplication() in [...]\\myapp\\library\\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\AbstractCommand.php on line 82\r\n\r\nFatal error: Call to undefined method Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\DiffCommand::getApplication() in [...]\\myapp\\library\\Doctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\AbstractCommand.php on line 82\r\n\r\n\r\nStrange fact is that \r\nDoctrine\\DBAL\\Migrations\\Tools\\Console\\Command\\DiffCommand.php doesn\'t contain any function called getApplication().\r\n\r\nAny ideas?','2011-05-11 17:50:34'),(137,6,'Gediminas','Re: nested set and fixtures',NULL,'if tree listener is attached it should be ok, maybe you can email me, or create a gist of your tree data fixture and entity..','2011-05-11 18:10:00'),(138,1,'Gediminas','Re: Fatal error',NULL,'hi, my tutorial might be outdated. I recommend you to check if the libraries you are using are compatible. Use github to check recent commits, and check how getApplication was changed. Recently in doctrine were some incompatibilities on master branches','2011-05-11 18:14:45'),(139,3,'KissMyFace','Unable to save translations to table',NULL,'Thanks for posting your extensions. I\'m having some trouble using/understanding how to use the translation extension in the following instance - could you give me some pointers?\r\n\r\nI\'m to save the translations to an additional table for each entity - here is an example of my two entities....\r\n\r\nnamespace Product\\Attribute\r\n/**\r\n * @Entity\r\n * @Table(name=\"article_metadata\") \r\n * @gedmo:TranslationEntity(class=\"Product\\Attribute\\Translation\\Metadata\")\r\n */\r\nclass Metadata\r\n{\r\n	/**\r\n	 *  @Id @GeneratedValue @Column(type=\"integer\") \r\n	 */\r\n    private $id;\r\n	\r\n    /** \r\n	 * @Column(name=\"video_code\", type=\"string\") \r\n	 */\r\n    protected $videoCode;\r\n\r\n	/** \r\n	 * @gedmo:Translatable\r\n	 * @Column(name=\"name\", type=\"string\")\r\n	 */\r\n    protected $name;\r\n	\r\n	/** \r\n	 * @gedmo:Translatable\r\n	 * @Column(name=\"description\", type=\"string\") \r\n	 */\r\n    protected $description;\r\n}\r\n\r\n\r\nnamespace Product\\Attribute\\Translation;\r\nuse Gedmo\\Translatable\\Entity\\AbstractTranslation;\r\n/**\r\n * @Table(name=\"article_metadata_translation\")\r\n * \r\n * @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\")\r\n */\r\nclass Metadata extends AbstractTranslation\r\n{\r\n}\r\n\r\nI am storing in `article_metadata` (id (AutoInc, Primary), videocode)\r\nin the translation table `article_metadata_translation` (id (AutoInc, Primary), name, description, locale )\r\n\r\nI am using Doctrine standalone and have added the annotation driver as instructed.\r\n\r\nSQLSTATE[42S22]: Column not found: 1054 Unknown column \'name\' in \'field list\'\r\n\r\nIt looks like it is trying to save the \'name\' attribute into `article_metadata` and not into `article_metadata_translation`.\r\n\r\nI\'m not 100% sure what my table structure should be, and what the configuration of my `article_metadata` entity should be.\r\n\r\nThanks','2011-05-12 13:32:43'),(140,3,'Serge','Error generating entities',NULL,'Hello,\r\n\r\nI\'m trying to use this bundle just like the tutorial.\r\n\r\nWhen I tried to generate my entities with \r\nphp app/console doctrine:generate:entities MyBundleUsingStof\r\n\r\nI get \r\n[Doctrine\\ORM\\Mapping\\MappingException]                                                                                                               \r\n  No identifier/primary key specified for Entity \'Stof\\DoctrineExtensionsBundle\\Entity\\Translation\'. Every Entity must have an identifier/primary key. \r\n\r\nDo you have any idea?\r\n\r\nMaybe it is because I didn\'t right the lines contained in\r\nTranslation metadata Annotation driver mapped into driver chain chapter, because I didn\'t know where to put it.\r\n\r\nThank you in advance\r\n','2011-05-12 14:16:26'),(141,3,'Gediminas','Re: Error generating entities',NULL,'Hi, it is a doctrine bug, which is not fixed yet. It was discussed in symfony-users group. For now I recommend to generate failing entities manually. To separate it from yml configuration for example, you can add annotation driver for different namespace','2011-05-12 15:25:38'),(142,3,'','Re: Re: Error generating entities',NULL,'Hi Gediminas,\r\n\r\nI now see that my concept of how your extension works was mistaken. You are storing field names and content using an EAV type data storage. Is it possible for me to use this to store the information as one field per column or (as I suspect) the amount of work required to do this be pointless? Wouldn\'t storing the data like this be more efficient for retrieval (one row per entity/translation in the translation table).','2011-05-12 16:03:03'),(143,3,'Gediminas','Re: Re: Re: Error generating entities',NULL,'If I understand you correctly, you are asking if it is possible to make all record field translations in one row. Then my answer is yes, you can have a serialized object, doctrine lets you do that easily. But in this case, that will complicate database specific logic, you will not be able to join specific field translations, like TranslationQueryWalker does. In this case you would relly on hydration. Also now TranslationQueryWalker lets your query to order, filter and whatever by a specific translated field. Which would not be possible in serialized list of fields. And I will not consider implementing this in core','2011-05-12 17:58:19'),(144,3,'','Re: Re: Re: Re: Error generating entities',NULL,'Hi,\r\n\r\nI actually want to create one column per field for my translation table (so the translation table will have a different definition for each entity). This would match the rest of my schema.\r\n\r\nI guess what I\'m looking for (do you understand what I mean?) is quite different that what this extension does - however both ways can solve the translation problem.\r\n\r\n-Thanks','2011-05-12 18:32:31'),(145,3,'Gediminas','Re: Re: Re: Re: Re: Error generating entities',NULL,'Yes, it is possible, but I think a performance gain would be only for ODM since ORM databases are row based. And it would also require to make a personalized translation. Which would have to have additional columns named exactly same as the translatable fields. But yes its a way to do it. Maybe you could open an issue in the github, since this idea might not get lost','2011-05-12 19:03:18'),(146,6,'Rajeevan','Maybe an Error on NestedTreeRepository?',NULL,'Okay, First I like the extension as How easy it can be implemented and straight forward approach!\r\n\r\nWhile I was doing some test, I noticed that every time I call \r\n$repo->children( $root1 ); I All the Other children as well ( Because I added All root First and child later in mixed manner)... I played around a little and found that Gedmo\\Tree\\Entity\\Repository\\NestedTreeRepository didn\'t include the ROOT node ID when selecting children x LEFT > lft and RIGHT < rgt.\r\n\r\nI added the following lines to Fix that\r\nLine 222: $root = $meta->getReflectionProperty($config[\'root\'])->getValue($node);\r\n\r\nand after the:\r\n->andWhere(\'node.\' . $config[\'left\'] . \" > {$left}\")\r\n\r\nI added:\r\n->andWhere( \'node.\' . $config[\'root\'] . \" = {$root}\");\r\n\r\nmake sense?','2011-05-13 02:14:58'),(147,6,'Gediminas','Re: Maybe an Error on NestedTreeRepository?',NULL,'thanks for your interest, this was fixed yesterday, just update your source','2011-05-13 09:01:34'),(148,3,'dalibor','update multiple langs at once for same propery',NULL,'HI, I\'m trying this for hours now, and have no idea what am I doing wrong. \r\nI have it all set up, and all is working fine using CI2 and Doctrine2. \r\nNow I\'m trying to create tests, and I\'m using (pretty much) the same config and same bootstrap for doctrine, and in my test cases translatable is not listening to the value in @gedmo:Locale.\r\nIt translates, but only for one default lang I\'ve set in bootstrap. \r\nDo you have some instant idea why all fields are working, but it just doesn\'t see my @gedmo:Locale field in property?\r\nI\'m using plain update (and insert, also not working) like this\r\n\r\n$article = $em->find(\'Entity\\Article\', 1 /*article id*/);\r\n$article->setTitle(\'my title in de\');\r\n$article->setContent(\'my content in de\');\r\n$article->setTranslatableLocale(\'de_de\'); // change locale\r\n$em->persist($article);\r\n$em->flush();\r\n\r\nI know it is up to my bootstrap or something, but I have no idea what it might be, if you have any ideas, please share\r\nThanks in advance,\r\nDalibor','2011-05-13 17:47:44'),(149,3,'Gediminas','Re: update multiple langs at once for same propery',NULL,'Hi, first of all check if your metadata is mapped correctly, using $translationListener->getConfiguration($om, $className); if it not contain element \"locale\", means either you need to clean your cache or your fixture is in same namespace as your original entity without locale mapping, because extensions caches config related to full class name. If that does not solve it, please create a gist, or send me an email with your source of entity end test..','2011-05-13 20:17:42'),(150,3,'Dalibor','Re: Re: update multiple langs at once for same propery',NULL,'<blockquote><p>\r\n        Hi, first of all check if your metadata is mapped correctly, using $translationListener->getConfiguration($om, $className); if it not contain element \"locale\", means either you need to clean your cache or your fixture is in same namespace as your original entity without locale mapping, because extensions caches config related to full class name. If that does not solve it, please create a gist, or send me an email with your source of entity end test..    </p></blockquote>\r\nThanks for the help, I finally figured it out (after over 10h messing around it)... I was using INT for language (locale) and it was not ignored completely by the extension. Funny thing is that at some point it worked, I guess my app was setting (string) $languageId. Also, when I set lang like\r\n$mainObj->setLang((string) $lang_id);\r\nIt works as expected. Is there any way to have locale to be both int and string? Or it can be configurable? For me it is very convenient (and I think faster) to work with languages and locales IDs then their shortcuts. I updated extension, and it now trows exception if it is INT so it helped me track it down. Can I write some feature request somewhere for this? \r\nEEEExcellent extension btw, one of the best out there.\r\nThanks,\r\nDalibor','2011-05-15 12:31:27'),(151,7,'Yacoub O','Dont Forget to',NULL,'Don\'t Forget to add the $env object to the entity manager constructor in your config file.\r\n\r\nIt should look like this ..\r\n\r\n$entitymanager = EntityManager::create($conn, $config, $evm);\r\n','2011-05-16 03:04:57'),(152,3,'KissMyFace','Column not found error with entity',NULL,'Hi Gedimas,\r\n\r\nI\'m still having a bit of trouble. I\'m able to get everything working - but for some reason I am being forced to create columns in my base entity which I don\'t want to have.\r\n\r\nBasically If I want to store 4 fields against the \'metadata\' entity which are going to be translated and stored in the \'metadata_translation\' table - I am being forced to create a column in my \'metadata\' table for each of these fields.\r\n\r\nIs this correct? Now my metadata table has columns with text in them, but I am never using them - only ever pulling the data from \'metadata_translation\'\r\n\r\nI\'ve posted some code - here.. Thanks\r\n\r\n// entity definitions\r\nhttp://pastebin.com/36R0d6wt\r\n\r\n// using entity\r\n$metadata = new Product\\Attribute\\Metadata();\r\n$metadata->setName(\'my english name\');\r\n$em->persist($metadata);\r\n$em->flush();\r\n\r\n//error\r\nSQLSTATE[42S22]: Column not found: 1054 Unknown column \'name\' in \'field list\'   \r\n\r\n// it\'s complaining because it expects a \'name\' column in my \'metadata\' table                                                     \r\n\r\n// if i insert a \'name\' column into my \'metadata\' table then it works.. Any help of advice appreciated\r\n\r\n\r\n','2011-05-16 13:01:54'),(153,3,'Gediminas','Re: Re: Re: update multiple langs at once for same propery',NULL,'Hi, I\'m glad you solve it out. Considering the question about integer for locale:\r\nfirst, performance question, the gain of performance is minimal, comparing to one database query for instance, is the same as making your whole application of integers and defines for them.. IO is the real performace question here, I will never promote the use of integers for web applications, this is not a hardware device..\r\nIf you realy want to make this possible, you will need to extend the listener for validation of the locale, next you will need to make your translation entity, thats it. I\'m sure that it is not worth it..','2011-05-16 13:06:00'),(154,3,'Gediminas','Re: Column not found error with entity',NULL,'Hi, you mean you do not want to have translated columns in your database? etc:\r\n/**\r\n * @gedmo:Translatable\r\n */\r\nprivate $translated;\r\n\r\nyou want this as a virtual field, which would have a translation, but not a phisical field in the database, just in translations table. Am I getting this right?','2011-05-16 13:13:25'),(155,3,'KissMyFace','Re: Re: Column not found error with entity',NULL,'Thanks for the quick reply.\r\n\r\nYes - I only want to store the data in the \'metadata_translation\' table. I want to store the english/french/german text in one table and I don\'t want a physical column in my \'metadata\' table for each field - only a virtual field.\r\n\r\nIs this possible? I need to stop Doctrine from trying to save into the \'metadata\' table at the same time that it is persisting into the \'metadata_translation\' table.\r\n\r\n','2011-05-16 13:21:00'),(156,3,'Gediminas','Re: Re: Re: Column not found error with entity',NULL,'Currently it is not possible, I will think about it more. But so far I can tell that, this functionality will not let to make translated queries. See <strong>Query Hint</strong> since there will be no way to join the translations. I dont see it very efficient','2011-05-16 13:37:00'),(157,3,'Kissmyface','Re: Re: Re: Re: Column not found error with entity',NULL,'O.K, Thanks for the reply and for your great support.\r\n','2011-05-16 13:40:40'),(158,6,'saptaru','How to set Obj as root?',NULL,'Hi,\r\n\r\nI am trying to set an object that is nested as root (level 0). How can I achieve this ?\r\n\r\nThanks in advance !','2011-05-18 17:03:25'),(159,6,'Gediminas','Re: How to set Obj as root?',NULL,'Hi, set parent as null, or do not set parent','2011-05-18 18:26:18'),(160,3,'psycho [at] gmail.com','Symfony2 Bundle entities files names',NULL,'Hello. I\'ve used Symfony2(Beta2) and when i try to create schema i get such error:\r\n[ReflectionException]                                                                                               \r\n  Class Stof\\DoctrineExtensionsBundle\\Entity\\Stof\\DoctrineExtensionsBundle\\Entity\\AbstractTranslation does not exist\r\n\r\nI\'ve tried to find out the reason and it seems the reason is in names of entities xml files.\r\n\r\nbecause in class XmlDriver\r\nin method getAllClassNames\r\nget next code $classes[] = $prefix.\'\\\\\'.str_replace(\'.\', \'\\\\\', $fileName); - here we get double namespace.\r\nAm i right?','2011-05-24 14:06:20'),(161,3,'Gediminas','Re: Symfony2 Bundle entities files names',NULL,'Yes, you are right, http://github.com/stof/DoctrineExtensionsBundle/issues/34 so far this issue still has not been fixed by stof, I do not maintain the bundle of extensions for symfony2','2011-05-24 14:42:11'),(162,6,'psychehe [at] gmail.com','Problem with Annotations',NULL,'Hello. I\'m using symfony2. Now i have problem with Annotation(in Gedmo\\Tree\\Mapping\\Driver\\Annotation)\r\nproblem in method readExtendedMetadata\r\n$classAnnotations = $this->reader->getClassAnnotations($class) - this method returns an array\r\nthen goes condition\r\nif (isset($classAnnotations[self::TREE]))  \r\nbut $classAnnotations has numbers as indexex and isset($classAnnotations[self::TREE]) returns false\r\nbut for example in my case $classAnnotations[0] - has self::TREE type\r\n\r\nor maybe the problem is in $this->reader if it return wrong formated array....','2011-05-24 16:32:48'),(163,6,'Gediminas','Re: Problem with Annotations',NULL,'Hi, the injected annotation reader should be Symfony\\Bundle\\DoctrineBundle\\Annotations\\IndexedReader if it differs doctrine ORM should not work. Maybe you can tell the reason why you use specific annotation reader, and not the orm one?','2011-05-24 18:20:23'),(164,6,'psychehe [at] gmail.com','Re: Re: Problem with Annotations',NULL,'<blockquote><p>\r\n        Hi, the injected annotation reader should be Symfony\\Bundle\\DoctrineBundle\\Annotations\\IndexedReader if it differs doctrine ORM should not work. Maybe you can tell the reason why you use specific annotation reader, and not the orm one?    </p></blockquote>\r\n\r\nActually i use default one .) . Where can i set up it to correct one?','2011-05-24 22:28:57'),(165,6,'Gediminas','Re: Re: Re: Problem with Annotations',NULL,'Use <strong>annotation_reader</strong> service, it uses indexed reader. Or instanciate the class which I mentioned before','2011-05-24 23:18:38'),(166,6,'Gediminas','Re: Re: Re: Re: Problem with Annotations',NULL,'Currently more users reporting this issue and it seems like reader gets overrided in some place in the DIC. This will be fixed in a day in extensions to support single common way for old and new readers','2011-05-25 08:53:11'),(167,3,'M4d3L','Metadata',NULL,'After adding the listener :\r\n\r\n$translatableListener = new \\Gedmo\\Translatable\\TranslationListener();\r\n$translatableListener->setTranslatableLocale(\'en_us\');\r\n$em->getEventManager()->addEventSubscriber($translatableListener);\r\n\r\nWhen I generate my class from YAML, I got error. It trying to load entity not already generated. \r\n\r\n\"Warning: require(/var/www/dev15/models/Entities/Item.php): failed to open stream: No such file or directory in /var/www/dev15/framework/vendors/doctrine/DoctrineORM-2.0.5/Doctrine/Common/ClassLoader.php on line 148\"\r\n\r\nI only have added the chaindriver and the listener. if I comment the listener, all class are generated but any annotation related to gedmo are not added to my generated class.\r\n\r\nhere is my cli-config.php http://paste2.org/p/1436121','2011-05-25 21:51:02'),(168,6,'potsed','Has anyone got this working with xml',NULL,'Hi,\r\n\r\nHas anyone got this working with xml, the framework i am using only allows us to use xml with doctrine. I have not been able to get it working. There was a comment on the blog that it should be easy to do (which also appears to have been removed). If you have got this working with xml please can you outline the steps needed.\r\n\r\nThanks','2011-05-26 04:25:00'),(169,6,'Gediminas','Re: Has anyone got this working with xml',NULL,'Hi, I will add the xml driver this weekend probably, but XSD schema validation will not be hosted yet. You will have to use it as a plain file.\r\nRelated to your problem extensions use their own driver for reading the metadata. In your case if your mapping is in XML - extensions will fallback to annotation driver and read the annotations, try add them :)','2011-05-26 08:50:52'),(170,3,'Gediminas','Re: Metadata',NULL,'Thats, strange, I will test that in a day.','2011-05-26 10:05:46'),(171,4,'Conrad','strange behaviour with sluggable translatable',NULL,'Hi,\r\nI experienced a strange behaviour when using the sluggable extension with translation when the translatable part is identical (using ODM):\r\n\r\nI have a Sport with a translatable+sluggable name, lets say \'Judo\' -> judo has almost the same name in every language which is saved several times as content:\'Judo\', but the slug for this is only saved in english and stays empty for all other languages. When I then change the French version for example to \"Judi\", the translation+slug gets changed, but when I switch back to \'Judo\' only the translated name changes and slug \'Judi\' stays the same..\r\nThis also happens when I rename (and back) the en_us entry.. \r\n\r\nI\'d like to have the translated name as a slug, even if its duplicated.. When I use different translated names like Soccer and FuÃŸball it is working without any issues as expected..\r\n\r\nMaybe I\'m doing something wrong? This is my mapping: http://pastie.org/1975666\r\n\r\nCheers,\r\nConrad','2011-05-26 14:17:22'),(172,4,'Gediminas','Re: strange behaviour with sluggable translatable',NULL,'Hi, thanks for reporting that, this is really an issue. I will update the code in a day.','2011-05-26 20:57:44'),(173,3,'Gediminas','Re: Metadata',NULL,'It was fixed, if you update your extensions, it should work','2011-05-26 23:38:33'),(174,6,'potsed','Re: Re: Has anyone got this working with xml',NULL,'Thanks for the answer.','2011-05-27 04:33:45'),(175,8,'Matthew','Custom table name',NULL,'Can we use our own custom table name to store the log entries? At the moment the entries are stored in the table \"ext_log_entry\" as defined in the LogEntry Entity. But I would like to store the entries in a table called \"audit_logs\". What is the best way to achieve this in my project without changing the Gedmo extension?','2011-05-30 00:27:26'),(176,8,'Gediminas','Re: Custom table name',NULL,'Hi, you have to specify logEntryClass in class annotation, example\r\n@gedmo:Loggable(logEntryClass=\"Entity\\AuditLog\")\r\n\r\nthe AuditLog should extend Gedmo\\Loggable\\Entity\\AbstractLogEntry\r\nyou can use this class for multiple entities or single. Do not forget to add indexes for your log class.','2011-05-30 02:28:59'),(177,1,'Ricardo Oedietram','Great article',NULL,'Thank you very much!\r\n\r\nI have now also doctrine 2.0 running with Zend 1.11 with smarty 3 (previous article)!\r\n\r\nGreat explanation and finally I know the basics of Doctrine.\r\n\r\nKeep up the good work!','2011-05-30 13:47:36'),(178,6,'mungiu','question',NULL,'u still suport this forum, can i ask u a question?','2011-06-01 23:12:50'),(179,6,'Gediminas','Re: question',NULL,'Hi, yes sure','2011-06-02 03:36:34'),(180,6,'mungiu','Re: Re: question',NULL,'can u tell me what version of doctrine u use for live example on tree extension because i use 2.0 and i receive some errors.','2011-06-02 10:24:17'),(181,6,'Gediminas','Re: Re: Re: question',NULL,'Its old version, haven\'t updated sources for a long time. I\'m sure the version you are using is much more stable. What problem do you have? Maybe you can email me, or open an issue on github','2011-06-02 11:58:33'),(182,6,'mungiu','Re: Re: Re: Re: question',NULL,'ok, i will send you tonight when i arrive home from work. tanks for u feedback.','2011-06-02 14:12:32'),(183,6,'mungiu','Re: Re: Re: Re: Re: question',NULL,'how i said:\r\n\r\nMessage: [Syntax Error] line 0, col 100: Error: Expected Literal, got \')\' \r\n#27 D:\\wamp\\www\\itcg1\\library\\Gedmo\\Tree\\Entity\\Repository\\NestedTreeRepository.php(175): Doctrine\\ORM\\AbstractQuery->getSingleScalarResult()\r\n\r\n','2011-06-03 01:11:19'),(184,6,'Gediminas','Re: Re: Re: Re: Re: Re: question',NULL,'Hi it seems that it is uninitialized proxy issue. Quick fix would be to initialize your $node->getId(); for instance. I will prevent that later in the code','2011-06-03 09:20:44'),(185,3,'QuantTrader','Re: Re: Re: Re: Troubles',NULL,'Hi, how have you modified the mapping? I would really appreciate if you share your experience :) Thanks.\r\n\r\n<blockquote><p>\r\n        The configuration for my translatable mapping driver was incorrect. Thanks for you ligthning fast answer!<br>\r\n<br>\r\nI appreciate that.<br>\r\n<br>\r\n<blockquote><p><br>\r\n        First of all, repository @Entity(repositoryClass=\"Gedmo\\Translatable\\Entity\\Repository\\TranslationRepository\") just like in tutorial.<br><br>\r\nSecond, do you have mapping driver for Gedmo\\Translatable\\Entity?<br><br>\r\nThere is no magic here, everything works perfect, its only a matter of your configuration and how you understand it.    </p></blockquote>    </p></blockquote>','2011-06-03 17:45:57'),(186,3,'Gediminas','Re: Re: Re: Re: Re: Troubles',NULL,'Hi, I really do not understand what is your question about? Mapping in extensions are same as in doctrine2 core, you can read a tutorial on doctrine doc. When you can ask something more specific\r\n<blockquote><p>\r\n        Hi, how have you modified the mapping? I would really appreciate if you share your experience :) Thanks.<br>\r\n</p></blockquote>','2011-06-03 17:52:04'),(187,4,'Gediminas','Re: Re: strange behaviour with sluggable translatable',NULL,'Hi, this is partially fixed, and can be fixed only partially. Now if you update your extensions. It will create new translations even if the value is the same but locale differs. But, you must have at least something in the changeset of your entity or document, I mean not importantly translated field but something else. Otherwise the the translatable is not triggered','2011-06-03 22:20:43'),(188,6,'mungiu','Re: Re: Re: Re: Re: Re: Re: question',NULL,'<blockquote><p>\r\n        Hi it seems that it is uninitialized proxy issue. Quick fix would be to initialize your $node->getId(); for instance. I will prevent that later in the code    </p></blockquote>\r\ncan u give me an example in your code? because i didn\'t study very well doctrine?','2011-06-03 23:20:41'),(189,7,'Amit','ODM TimestampableListener not in GIT?',NULL,'Hi,\r\n\r\n I am trying to follow the instructions you have give (thanks for the post) but I cant find ODM/MongoDB/TimestampableListener in GIT? Am I looking at wrong place? I checked master \r\n\r\n// ODM\r\n$timestampableListener = new \\Gedmo\\Timestampable\\ODM\\MongoDB\\TimestampableListener();\r\n ','2011-06-04 13:03:55'),(190,7,'Gediminas','Re: ODM TimestampableListener not in GIT?',NULL,'Hi, Gedmo\\Timestampable\\TimestampableListener will work with ODM and ORM. Same instance of this listener can be hooked to multiple object managers. Same as other extension listeners.','2011-06-04 14:32:07'),(191,7,'Dmitry Bykadorov','Symfony2 integration',NULL,'Can you help with adding timestampable in Symfony2?\r\n\r\nWhere I need to add this code?\r\n\r\n$evm = new \\Doctrine\\Common\\EventManager();\r\n$timestampableListener = new \\Gedmo\\Timestampable\\TimestampableListener();\r\n$evm->addEventSubscriber($timestampableListener);','2011-06-05 18:13:46'),(192,7,'Gediminas','Re: Symfony2 integration',NULL,'In symfony2 there is a bundle for these extensions. Use it: http://github.com/stof/DoctrineExtensionsBundle read a doc first in it on how to configure it.','2011-06-06 00:16:24'),(193,7,'Dmitry Bykadorov','Re: Re: Symfony2 integration',NULL,'<blockquote><p>\r\n        In symfony2 there is a bundle for these extensions. Use it: http://github.com/stof/DoctrineExtensionsBundle read a doc first in it on how to configure it.    </p></blockquote>\r\n\r\nThank you very much! ','2011-06-06 14:38:13'),(194,8,'1ed','Not working example',NULL,'You have to add  \'Versioned\' annotation for loggable properties, like:\r\n\r\n    /**\r\n     * @Column(name=\"title\", type=\"string\", length=8)\r\n     * @gedmo:Versioned\r\n     */\r\n    private $title;\r\n\r\nWithout this the changes on the title field are not logged.','2011-06-07 13:48:23'),(195,8,'Gediminas','Re: Not working example',NULL,'Correct, its not up to date, in library docs its fresh documentation','2011-06-07 15:01:54'),(196,3,'M4d3L','Re: Re: Metadata',NULL,'<blockquote><p>\r\n        It was fixed, if you update your extensions, it should work    </p></blockquote>\r\n\r\nhi. I have updated your lib and the problem is alway there.','2011-06-08 18:41:53'),(197,3,'M4d3L','Re: Re: Metadata',NULL,'I got also this bug after update :\r\n\r\n[Doctrine\\ORM\\Mapping\\MappingException]                                                                                                    \r\n  No identifier/primary key specified for Entity \'Gedmo\\Translatable\\Entity\\Translation\'. Every Entity must have an identifier/primary key. ','2011-06-08 18:46:11'),(198,3,'Gediminas','Re: Re: Re: Metadata',NULL,'Can you give me more details on steps you do?\r\nIt seems like you use not an array cache when you are generating the entities from yaml. Can you try clearing the cache right after the generation from yaml?\r\nIf that does not solve the issue, please send by email or open an issue on github with a test case, or some yaml files which fails.','2011-06-08 19:44:31'),(199,3,'','Re: Re: Re: Re: Metadata',NULL,'ok.\r\n\r\n./doctrine orm:generate-entities --update-entities=\"1\" --generate-methods=\"1\" --generate-annotations=\"1\" --regenerate-entities=\"1\" ../models/\r\n\r\nin my Yaml directory I have put my personalised Entities.Translation.dcm.yml, in my other translatable entities, I put in header\r\n\r\n  gedmo:\r\n    translation:\r\n      locale: localeField\r\n      entity: Entities/Translation\r\n\r\nand In translatable field:\r\n      gedmo:\r\n        - translatable\r\n\r\nwhen I run the command, all Entities/SomeEntities.php are created without any Gedmo annotation.\r\n\r\nSame probleme with Timestampable.\r\n','2011-06-08 20:46:14'),(200,3,'Gediminas','Re: Re: Re: Re: Re: Metadata',NULL,'extensions are not part of doctrine core, and entity generator should not know about them since it treats everything differently. Just disable all extension mapping, when you generate your entities.\r\nAnd regarding the annotations, it will never generate them for extensions, because they are not part of doctrine core.','2011-06-09 11:12:37'),(201,2,'','Re: Re: php.ini',NULL,'Hi,\r\n\r\nSorry for taking too long to reply, this tutorial really works, I just made a simple mistake on php code that\'s why there\'s an error during testing.\r\n\r\nThank you so much, this tutorial really helped and saved my new year :)\r\n\r\nRegards,\r\n\r\nSheryl Villaroman\r\n\r\n<blockquote><p>\r\n        hi, you can try to remove if closure in php_mod.conf:<br>\r\n<strong><ifmodule mod_php5.c=\"\"></strong><br>\r\nor you can try to add a syntax error in this closure to see if it gets read. Or rebuild the php with --with-config-file-path=/phpinidir    </p></blockquote>','2011-06-09 18:36:14'),(202,3,'Nicolas','Problem setting hint',NULL,'Hi, I am trying to get some results ordered by name:\r\n\r\n$dql = \"SELECT f FROM models\\Feat f \"\r\n    . \"WHERE f.name LIKE \'%translated_name%\' \";\r\n    . \"ORDER BY f.name\";\r\n\r\n$query = $this->_em->createQuery($dql);\r\n$query->setHint(\r\n    \\Doctrine\\ORM\\Query::HINT_CUSTOM_OUTPUT_WALKER,\r\n    \'Gedmo\\\\Translatable\\\\Query\\\\TreeWalker\\\\TranslationWalker\'\r\n);\r\n \r\nreturn $query->getResult();\r\n\r\nAnd, I\'m getting this error:\r\n\r\nPDOException [ 42S22 ]: SQLSTATE[42S22]: Column not found: 1054 Unknown column \'t3_.contents_array\' in \'field list\'\r\n\r\nWould you know what could be the issue?','2011-06-10 02:53:40'),(203,3,'Nicolas','Further info',NULL,'I have the translations in separated tables, in this instance feats and feats_translations','2011-06-10 02:57:51'),(204,3,'Nicolas','I solved it',NULL,'It is really strange, I had a translated column \"prerequisite\", and an untranslated column \"prerequisites_array\", and somehow it didn\'t work (not even changing the _array to another stuff like _test)..\r\n\r\nThanks again for this awesome Extension ;)','2011-06-10 03:12:25'),(205,8,'Grayson Koonce','Getting Loggable working with Symfony2',NULL,'Hi, I\'ve written about how to get Sluggable working with Symfony2 via the DoctrineExtrasBundle. Hopefully this helps developers looking to accomplish this. \r\n\r\nhttp://www.developly.com/getting-doctrineextensions-sluggable-working','2011-06-14 09:36:10'),(206,3,'Andreas MÃ¶ller','Translation in separate tables',NULL,'Is it intended that - when using annotations for separate tables - the table \"ext_translations\" still is created?\r\n\r\n\r\nBest regards,\r\n\r\nAndreas','2011-06-14 15:03:39'),(207,3,'Gediminas','Re: Translation in separate tables',NULL,'All depends on mapping driver, if you add Gedmo\\Translatable\\Entity into mapping chain it will always create the table.. You can remove it from mapping in this case and simply use the AbstractTranslation or copy it..','2011-06-14 16:31:51'),(208,3,'Andreas MÃ¶ller','Re: Re: Translation in separate tables',NULL,'<blockquote><p>\r\n        All depends on mapping driver, if you add Gedmo\\Translatable\\Entity into mapping chain it will always create the table.. You can remove it from mapping in this case and simply use the AbstractTranslation or copy it..    </p></blockquote>\r\n\r\nHmmm.\r\n\r\nMy aim is to have the whole thing working as with the the Doctrine1 i18n behaviour - always have separate tables for translatable content, i.e., have translatable columns move to the separate table, which then consists only of the id from the parent table, locale and the translatable columns.\r\n\r\nIs this possible?\r\n\r\nHow?\r\n\r\n\r\nBest regards,\r\n\r\nAndreas ','2011-06-14 18:23:37'),(209,3,'Gediminas','Re: Re: Re: Translation in separate tables',NULL,'Like in example on this tutorial about Translation Entity, but it will still contain object_class field, this may be changed later.','2011-06-14 19:58:43'),(210,7,'Lest','Xml to Generate annotation entitites',NULL,'First, congrat for your great work !\r\nI just implement your extension, with xml configuration. That\'s work very well, but when i generate my entities from the xml configuration, i didn\'t get the \"gedmo\'s specific annotation\":\r\nin xml i have:\r\n<field name=\"createdAt\" type=\"datetime\" column=\"created_at\">\r\n   <gedmo:timestampable on=\"create\"/>\r\n</field>\r\n\r\nbut in php annotation i get:\r\n/**\r\n  * @var datetime $createdAt\r\n  *\r\n  * @Column(name=\"created_at\", type=\"datetime\")\r\n*/\r\nprivate $createdAt;\r\n\r\nI precise i use Doctrine 2.0 with Zend Framework, and i load Doctrine into zf with the Bisna library.\r\nThx for helping','2011-06-15 19:35:54'),(211,7,'Lest','Re: Xml to Generate annotation entitites',NULL,'Oops... xml code was eat Oo\r\n<code>\r\n<field name=\"createdAt\" type=\"datetime\" column=\"created_at\">\r\n   <gedmo:timestampable on=\"create\">\r\n</gedmo:timestampable></field>\r\n</code>\r\n','2011-06-15 19:44:56'),(212,6,'Mungiu','Re: Re: Re: Re: Re: Re: Re: question',NULL,'Please let me know when u repair the code beacuse i didnt succed to make work. tanks.','2011-06-15 22:10:38'),(213,3,'fabian','localeField ',NULL,'Hi, I recive the following error when trying to create an item.\r\n\r\nFatal error: Uncaught exception \'ReflectionException\' with message \'Property localeField does not exist\' in H:\\xxxxxxxxx\\Gedmo\\Translatable\\TranslationListener.php on line 237\r\n\r\n\r\nmy yaml\r\n\r\nEntity\\SiteInformation:\r\n  type: entity\r\n  table: siteinformation\r\n  gedmo:\r\n    translation:\r\n      locale: localeField\r\n  id:\r\n    id:\r\n      type: integer\r\n      generator:\r\n        strategy: AUTO\r\n  fields:\r\n    title:\r\n      type: string\r\n      length: 250\r\n      nullable: true\r\n      gedmo:\r\n        - translatable      \r\n    text:\r\n      type: string\r\n      length: 20      \r\n      nullable: true\r\n      gedmo:\r\n        - translatable      \r\n    created:\r\n      type: datetime\r\n      gedmo:\r\n        timestampable:\r\n          on: create\r\n    updated:\r\n      type: datetime\r\n      gedmo:\r\n        timestampable:\r\n          on: update  \r\n\r\n\r\nmy code\r\n\r\n$ss = new \\Entity\\SiteInformation();\r\n$ss->setTitle(\"Page Title\");\r\n$ss->setText(\"Page Text\");\r\n$em->persist($ss);\r\n$em->flush();\r\n\r\n\r\nthank you\r\n\r\n\r\n\r\n\r\n','2011-06-15 22:45:15'),(214,3,'fabian','Re: localeField ',NULL,'\r\nHello Gediminas, I have resolved the prior issue!\r\n\r\n\r\n\r\n','2011-06-16 00:33:10'),(215,3,'fabian','Translation Entity',NULL,'Hi, I\'am using the Translation Entity and now I have a problem with the following code:\r\n\r\n$ss = $em->find(\'Entity\\SiteInformation\', 3);\r\n$repository = $em->getRepository(\'Gedmo\\Translatable\\Entity\\Translation\');\r\n$translations = $repository->findTranslations($ss);\r\n\r\n$translation returns an empty array!\r\n\r\nAny sugestion on how to resolve this?','2011-06-16 00:38:32'),(216,7,'Gediminas','Re: Re: Xml to Generate annotation entitites',NULL,'Hi, you will not get these annotations, extensions are not a part of doctrine2 core and never will, it cannot hook into entity generator. I\'ll recheck for extension points, but I do not think this will be possible without extending the entity generator command to own one..','2011-06-16 11:06:48'),(217,3,'Gediminas','Re: Translation Entity',NULL,'This is a bug, it fails to get Id from proxy, I\'ll fix it in few days. For now you can just initialize it, by $ss->getId() lets say. Thanks for noticing on that','2011-06-16 11:12:50'),(218,6,'Gediminas','Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'for proxy initialization you can simply call any method on it. like $entity->getTitle(); or $entity->getId(); this will prevent the issue, I forgot about that, hope I\'ll be able to fix it in a day, it has more places where it needs to be changed','2011-06-16 11:16:15'),(219,6,'','Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'the probllem apear when i use $repo = $em->getRepository(\'Entity\\Category\');\r\n \r\n$food = $repo->findOneByTitle(\'Food\');\r\necho $repo->childCount($food);\r\n// prints: 3\r\necho $repo->childCount($food, true/*direct*/);\r\n\r\nnot when i save new row. where and how to call getTitle? in your repository class?\r\n\r\n\r\n<blockquote><p>\r\n        for proxy initialization you can simply call any method on it. like $entity->getTitle(); or $entity->getId(); this will prevent the issue, I forgot about that, hope I\'ll be able to fix it in a day, it has more places where it needs to be changed    </p></blockquote>','2011-06-16 15:43:05'),(220,6,'Gediminas','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'echo $repo->childCount($food, true/*direct*/);\r\n\r\nthis triggers error? maybe its different problem, can you email me your entity code?','2011-06-16 18:57:16'),(221,6,'KissMyFace','Last Update date misleading',NULL,'Hi,\r\n\r\nIn your notice list for this blog you say the last update was \'2011-02-08\' but you have fixed some bugs since then so maybe update this  (or remove it?) - just a suggestion (This confused me as I havn\'t updated from your most recent code and I was seeing a few bugs which you have since fixed.)\r\n\r\nAlso I can see some big isssue here if you try and delete the \'Vegetables\' Category...\r\n\r\nhttp://www.gediminasm.org/test/index\r\n\r\n-Thanks','2011-06-21 16:11:33'),(222,6,'','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'yes exactly that was the code that trigger error. the code is like yours i don\'t do anything else.','2011-06-21 22:44:58'),(223,7,'Lest','Can\'t load it with doctrine 2.1 RC1',NULL,'I try to pass to doctrine 2.1 RC1 and i can\'t load your extension.\r\nI got this error:\r\nMessage: [Semantical Error] The annotation \"@Column\" in property Project\\Entities\\Folders::$name was never imported.\r\n\r\nBtw, i used the Bisna extension to load your extension, so i don\'t know if i used it well, but with the previous doctrine version its load well','2011-06-22 17:13:04'),(224,7,'Gediminas','Re: Can\'t load it with doctrine 2.1 RC1',NULL,'Hi, annotation reader has changed in 2.1 of doctrine. https://github.com/doctrine/doctrine2/blob/master/UPGRADE_TO_2_1\r\nYou should modify the bootstrap of doctrine with some extra code. I\'ll update the docs soon','2011-06-22 18:35:18'),(225,3,'Gediminas','Re: Re: Translation Entity',NULL,'It should be fixed on master branch of extensions','2011-06-23 13:22:19'),(226,6,'mungiu','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'can you tell me at elast what version of doctrien do you use?','2011-06-27 13:46:22'),(227,6,'Gediminas','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'<blockquote><p>\r\n        can you tell me at elast what version of doctrien do you use?    </p></blockquote>\r\n\r\nI tested both, 2.1 beta and 2.0 with new annotation mapping, and currently annotation mapping support is being improved, and it will be merged to master branch. I would advise you to use doctrine2.1 and extensions on master branch since all new updates will follow to master only except bug fixes. For annotation mapping read more on doc/annotations.md .Next thing I will do will be some framework setups and basic examples like in this blog in separate repository. For zend framework 1 and symfony2 at the start. If I do not answer your question please send me an email so I can answer that faster','2011-06-27 14:46:45'),(228,3,'KissMyFace','Delete Cascade',NULL,'hi Gediminas,\r\n\r\nSorry to bother you again. Should the translations be deleted when I delete my entity? I\'m finding that the delete does not cascade into the translations table...','2011-06-27 16:21:48'),(229,3,'','Re: Delete Cascade',NULL,'Sorry - It cascades when I use the entity manager directly like this.\r\n\r\n$this->remove($category);\r\n$this->flush();\r\n\r\nBut it doesn\'t work when I use the query builder to build DQL.\r\n\r\n$qb->delete(\'Category\', \'c\')\r\n       ->where(\'c.id = 1\');\r\n$qb->getQuery()->execute();\r\n\r\nI\'ll raise the issue on Github\r\n\r\n<blockquote><p>\r\n        hi Gediminas,<br>\r\n<br>\r\nSorry to bother you again. Should the translations be deleted when I delete my entity? I\'m finding that the delete does not cascade into the translations table...    </p></blockquote>','2011-06-27 17:04:21'),(230,6,'','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'So u say that with doctrine 2.0 your example is working?','2011-06-27 21:28:56'),(231,6,'Gediminas','Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: question',NULL,'Yes, if you use doctrine2.0.x branch you can use Gedmo\\Version::checkORMDependencies(); to test if components are compatible. If you do have a problem or stuck somethere, send my an email with your config and entity','2011-06-28 15:41:10'),(232,6,'dragos','table',NULL,'pelase tell me how is the table structure for your model. i try this:\r\nCREATE TABLE IF NOT EXISTS `category` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `title` varchar(100) NOT NULL,\r\n  `lft` int(11) NOT NULL,\r\n  `lvl` int(11) NOT NULL,\r\n  `rgt` int(11) NOT NULL,\r\n  `root` int(11) NOT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;\r\n\r\nbut receive: Message: SQLSTATE[42S22]: Column not found: 1054 Unknown column \'parent_id\' in \'field list\' ','2011-06-28 22:59:24'),(233,3,'Kris','Re: Re: localeField ',NULL,'<blockquote><p>\r\n        <br>\r\nHello Gediminas, I have resolved the prior issue!<br>\r\n<br>\r\n<br>\r\n<br>\r\n    </p></blockquote>\r\nPlease ... How?','2011-06-30 11:36:10'),(234,3,'Gediminas','Re: Re: Re: localeField ',NULL,'Yes, please, can you fork a repository and submit a PR to master branch? or post a gist','2011-06-30 20:56:55'),(235,6,'dragos','Re: table',NULL,'please can you responde me i wrote u here and email.','2011-07-01 23:02:02'),(236,6,'Gediminas','Re: Re: table',NULL,'webmaster@i-sore.ro email does not respond\r\nif you use doctrine, you need to use the doctrine console, command orm:schema-tool:create read the manual, it will create all tables. You do not need and you should not create it manually','2011-07-02 00:50:24'),(237,3,'Oscar B.','Translation for an entity and its associated entities.',NULL,'Hi. First of all, congratulations for this great work.\r\n\r\nI want to get translated records for b where:\r\n\r\ndql = select a, b from EntityA join a.EntityB b;\r\n\r\nright now what I\'m doing is:\r\n\r\nforeach ($EntiyA as $a)\r\n{\r\n    $a->setTranslatableLocale(\'es\');\r\n     $em->refresh($a);\r\n        foreach($a->getEntityB as $b)\r\n        {\r\n            $b->setTranslatableLocale(\'es\');\r\n            $em->refresh($b);\r\n         }\r\n}\r\n\r\nAnd if it were a deeper level, I would have to include another foreach :S\r\n\r\nIs this the only way to do it?\r\n\r\nBest regards!','2011-07-02 23:32:45'),(238,3,'Oscar B.','Solved my issue.',NULL,'Hi ! I have solved my issue. Didn\'t paid enough attention to the TranslatableListener, sorry for wasting pixels :(.\r\n\r\nNow I have a doubt. Before implementing Translatable feature, I had one query to fetch an array of entities that made only one db query; now Doctrine makes almost 4 db queries for each record :S (my dql query has 3 joins)\r\n\r\nIs this a normal behaviour?\r\n\r\nRegards and thanks again!','2011-07-03 11:05:34'),(239,3,'Gediminas','Re: Solved my issue.',NULL,'Use <a href=\"http://www.gediminasm.org/article/translatable-behavior-extension-for-doctrine-2#orm-query-hint\">query hint</a> for that. I think it will really suit all your needs. Have fun, if you have more questions just ask','2011-07-03 18:01:13'),(240,6,'','Re: Re: Re: table',NULL,'can you provide schema for only this table i can\'t make it working the console anymore. i need only this table for the moment. pls.','2011-07-03 23:54:39'),(241,6,'','Re: Re: Re: Re: table',NULL,'tank you i make it working in the last tanks for all the feedback.','2011-07-04 00:13:24'),(242,6,'','Re: Re: Re: Re: Re: table',NULL,'But how i can get all value in an array or something beacause if i print findAll method have Allowed memory size.','2011-07-04 00:43:19'),(243,6,'dantan','Render Tree',NULL,'Thx for the classes.\r\nI am working with doctrine2.0.x branch. Your example code with translations does not work for me. Translations are ignored. Not much of a problem.\r\n\r\nCould you provide some code from your working example on how you render the full tree?','2011-07-04 15:13:39'),(244,6,'Gediminas','Re: Render Tree',NULL,'for tree building use recursion, in my blog its:\r\nprivate function _makeTree($nodes, $repo) {\r\n        $html = $this->view->getHelper(\'html\');\r\n        $result = \'&lt;ul>\';\r\n        foreach ($nodes as $node) {\r\n            $linkUp = $html->link(\'Up\', \'/test/move-node/id/\' . $node->getId() . \'/type/up\');\r\n            $linkDown = $html->link(\'Down\', \'/test/move-node/id/\' . $node->getId() . \'/type/down\');\r\n            $result .= \'&lt;li>\' . $node->getTitle() . \'&nbsp;&nbsp;&nbsp;\' . $linkUp . \'&nbsp;\' . $linkDown;\r\n            if ($repo->childCount($node, true)) {\r\n                $result .= $this->_makeTree(\r\n                    $repo->children($node, true),\r\n                    $repo\r\n                );\r\n            }\r\n            $result .= \'&lt;/li>\';\r\n        }  \r\n        $result .= \'&lt;/ul>\';\r\n        return $result;\r\n    }\r\n\r\nLater I provide a helper to build it more efficiently','2011-07-05 00:37:34'),(245,6,'','Re: Re: Render Tree',NULL,'thx, this helps - i am still trying to get a multidimensional array that I will later output as json to feed jstree.','2011-07-05 10:30:59'),(246,6,'dragos','Re: Re: Render Tree',NULL,'i still don\'t get it i try this function i call it echo $this->_makeTree($repo->findOneByTitle(\'Food\'), $repo); but nothing happed, i can\'t iterate $repo->findOneByTitle(\'Food\'), but when i call getTitle Food is there, what is missing?','2011-07-05 22:52:43'),(247,7,'Gordon Franke','Update Post',NULL,'please update the post to use the new annotation syntax\r\n\r\n@ORM\\Column\r\n@Gedmo\\*\r\n\r\nthx for the nice bundle','2011-07-06 09:57:04'),(248,6,'anardil','Help Error',NULL,'I got this error\r\nCatchable fatal error: Argument 1 passed to Gedmo\\Mapping\\MappedEventSubscriber::loadMetadataForObjectClass() must be an instance of Doctrine\\Common\\Persistence\\ObjectManager, instance of Doctrine\\ORM\\EntityManager given,\r\n\r\nI got :\r\nCommon 2.0.2\r\nORM 2.0.6\r\nDBAL 2.0.6\r\n\r\nI don\'t know why ?\r\nPlease help me, your job looks great :).\r\n','2011-07-06 15:10:36'),(249,6,'Gediminas','Re: Help Error',NULL,'hi checkout extensions at 2.0.x branch name is: \"doctrine2.0.x\"\r\n\r\nor download it here: https://github.com/l3pp4rd/DoctrineExtensions/tree/doctrine2.0.x','2011-07-06 15:46:42'),(250,3,'M4d3L','Timestampable',NULL,'When we have Timestampable field and use $hydrationMode = \\Doctrine\\ORM\\Query::HYDRATE_ARRAY,\r\n\r\nTimestampable return an object else of an array. is it possible to fix this?\r\n\r\nthank.','2011-07-11 19:41:08'),(251,3,'Gediminas','Re: Timestampable',NULL,'Its not a place to ask this kind of question :) use doctrine-users gmail group. I think you will get a better answer there. It always hydrate Datetime object no matter if you use timestampable or not, you can use your own hydrator, or your own column type, or simply in your entity instead of returning it as object you can return formatted value','2011-07-11 20:15:42'),(252,3,'Silex','Multiple fallbacks',NULL,'I\'m wondering if there\'s currently an easy way to have a fallback that depends of the language : for example fr_CA (Canadian French) would fallback to fr_FR (French) instead of the default locale.','2011-07-16 01:49:52'),(253,3,'Gediminas','Re: Multiple fallbacks',NULL,'In this case I would recommend to use query hint. http://gist.github.com/1086164 you can achieve this behaviour using the example on this gist. Maybe later I will make an another hint for query to set the default locale (fallback locale), for now use listener instance','2011-07-16 11:40:13'),(254,6,'PK','Exception',NULL,'Hy, i try the basic usage example, but it doesn\'t work. Doctrine thrown an exception: \r\nMessage: SQLSTATE[23000]: Integrity constraint violation: 1048 Column \'lft\' cannot be null \r\nCan you give me some advice?\r\n\r\nAnd of course, thank you very much this extension!\r\n(Sorry for my english :-))\r\n\r\nPK','2011-07-16 12:32:25'),(255,6,'Gediminas','Re: Exception',NULL,'You do not have TreeListener attached to your event manager, or clear APC cache. your welcome','2011-07-16 16:52:42'),(256,3,'maverickus','Error after adding event manager',NULL,'I added event manager to initiating entiny manager.\r\nAnd then i\'m getting the error after running this code:\r\n\r\n$measureValue = new Trading_Terms_Translations\\Entity\\SpecMeasureValue();\r\n$measureValue->setName(\'Test in en\');\r\n$doctrEntityManager->persist($measureValue);\r\n$doctrEntityManager->flush();\r\n\r\nFatal error: Uncaught exception \'Doctrine\\Common\\Annotations\\AnnotationException\' with message \'[Semantical Error] The annotation \"@Table\" in class Trading_Terms_Translations\\Entity\\SpecMeasureValue was never imported.\' in /usr/local/share/pear/Doctrine/Common/Annotations/AnnotationException.php on line 52\r\n\r\nWould you know what could be the issue?\r\n','2011-07-28 10:45:54'),(257,3,'maverickus','Error after adding event manager',NULL,'but before entity was working and adding data to DB','2011-07-28 10:49:48'),(258,3,'maverickus','Re: Error after adding event manager',NULL,'All trace looks so\r\n1	0.0011	730056	{main}( )	../index.php:0\r\n2	0.0871	12034160	include( \'/usr/home/vshatkovskiy/tsms-modules/trunk/modules/trading_terms_translations/controllers/list.php\' )	../index.php:129\r\n3	0.0897	12072944	Doctrine\\ORM\\EntityManager->persist( )	../list.php:25\r\n4	0.0897	12072944	Doctrine\\ORM\\UnitOfWork->persist( )	../EntityManager.php:464\r\n5	0.0897	12073160	Doctrine\\ORM\\UnitOfWork->doPersist( )	../UnitOfWork.php:1215\r\n6	0.0898	12073504	Doctrine\\ORM\\EntityManager->getClassMetadata( )	../UnitOfWork.php:1236\r\n7	0.0898	12073504	Doctrine\\ORM\\Mapping\\ClassMetadataFactory->getMetadataFor( )	../EntityManager.php:257\r\n8	0.0898	12073552	Doctrine\\ORM\\Mapping\\ClassMetadataFactory->loadMetadata( )	../ClassMetadataFactory.php:170\r\n9	0.1130	12796520	Doctrine\\Common\\EventManager->dispatchEvent( )	../ClassMetadataFactory.php:313\r\n10	0.1130	12796568	Gedmo\\Translatable\\TranslationListener->loadClassMetadata( )	../EventManager.php:64\r\n11	0.1147	12936928	Gedmo\\Mapping\\MappedEventSubscriber->loadMetadataForObjectClass( )	../TranslationListener.php:144\r\n12	0.1171	13085264	Gedmo\\Mapping\\ExtensionMetadataFactory->getExtensionMetadata( )	../MappedEventSubscriber.php:174\r\n13	0.1172	13085696	Gedmo\\Mapping\\Driver\\Chain->readExtendedMetadata( )	../ExtensionMetadataFactory.php:98\r\n14	0.1172	13085800	Gedmo\\Translatable\\Mapping\\Driver\\Annotation->readExtendedMetadata( )	../Chain.php:59\r\n15	0.1172	13085912	Doctrine\\Common\\Annotations\\CachedReader->getClassAnnotation( )	../Annotation.php:81\r\n16	0.1172	13085912	Doctrine\\Common\\Annotations\\CachedReader->getClassAnnotations( )	../CachedReader.php:89\r\n17	0.1173	13086088	Doctrine\\Common\\Annotations\\AnnotationReader->getClassAnnotations( )	../CachedReader.php:80\r\n18	0.1208	13097856	Doctrine\\Common\\Annotations\\DocParser->parse( )	../AnnotationReader.php:227\r\n19	0.1214	13105752	Doctrine\\Common\\Annotations\\DocParser->Annotations( )	../DocParser.php:182\r\n20	0.1214	13106016	Doctrine\\Common\\Annotations\\DocParser->Annotation( )	../DocParser.php:302','2011-07-28 10:57:45'),(259,3,'maverickus','Re: Re: Error after adding event manager',NULL,'this trouble is fixed','2011-07-28 15:28:53'),(260,3,'Gediminas','Re: Re: Re: Error after adding event manager',NULL,'Hi, next time check unit tests, there are the most examples you may possibly need','2011-07-28 17:04:51'),(263,3,'Dalibor Farny','using fallback',NULL,'Hello Gediminas, thank You for great job on doing these extensions, I use them all together ;-)\r\n\r\nI would like to ask.. Is there a way to check whether the entity is currently using translation from global locale or fallback locale?\r\n\r\nI need to display:\r\n\"entityName\" (for en_GB) or\r\n\"[fallback!!!]entityName\" for other untranslated languages to notice about translating this..','2011-08-09 11:24:04'),(264,6,'AH','Re: Re: Exception',NULL,'<blockquote><p>\r\n        You do not have TreeListener attached to your event manager, or clear APC cache. your welcome    </p></blockquote>\r\nSorry, I get the same error, the TreeListener is attach to the event manager and I clear the APC cache and try to use the ArrayCache instead of ApcCache, I got the same result.\r\nCan you help me to find an issue ?\r\n\r\nMy config :\r\nDoctrine Common : 2.1.0\r\nDoctrine DBAL : 2.1.0\r\nDoctrine ORM : 2.1.0\r\n\r\nThx\r\n','2011-08-09 14:54:22'),(265,4,'Dalibor Farny','missing slugs',NULL,'Hello, I have similar problem like Conrad, see that code:\r\n\r\nname:\r\n      gedmo:\r\n        - translatable\r\n        - sluggable\r\n    slug:\r\n      gedmo:\r\n        - translatable\r\n        slug:\r\n          updatable: false\r\n\r\n$category = new category;\r\n$category -> setLocale(\'en_GB\'); \r\n$category->setName(\'test en_GB\');\r\n$this->em->persist($category);\r\n$this->em->flush();   \r\n		\r\n$this->em->refresh($category); \r\n		\r\n$category2 = $this->em->find(\'category\',$category->getId());\r\n$category2 -> setLocale(\'cs_CZ\');\r\n$category2 -> setName(\'test cs_CZ\');\r\n$this->em->flush(); \r\n\r\n\r\nI would expect these records in database:\r\nname \"test en_GB\"\r\nslug \"test-en-gb\"\r\nname \"test cs_CZ\"\r\nslug \"test-cs-cz\"\r\n\r\nbut it produces this:\r\nname \"test en_GB\"\r\nslug \"test-en-gb\"\r\nname \"test cs_CZ\"\r\nslug \"test-en-gb\"\r\n','2011-08-09 18:24:45'),(266,7,'tobi','maybe this helps someone',NULL,'i just update to 2.1.0 today and had some problems to get this running again:\r\n\r\nmy old class looked like this:\r\n<?php\r\nnamespace MyProject;\r\nuse MyProject\\Base;\r\n\r\nabstract class Common extends Base {\r\n    /**\r\n     * @gedmo:Timestampable(on=\"create\")\r\n     * @Column(name=\"created_at\",type=\"datetime\", length=30, nullable=true)\r\n     */\r\n    protected $createdAt;\r\n....\r\n\r\nafter some digging and i found out that it works again if i change it to:\r\n\r\n\r\n<?php\r\nnamespace MyProject;\r\nuse MyProject\\Base,\r\n      Gedmo\\Mapping\\Annotation\\Timestampable;\r\n\r\nabstract class Common extends Base {\r\n    /**\r\n     * @Timestampable(on=\"create\")\r\n     * @Column(name=\"created_at\",type=\"datetime\", length=30, nullable=true)\r\n     */\r\n    protected $createdAt;\r\n....\r\n\r\nmaybe this helps someone,\r\n\r\nworth reading: http://www.doctrine-project.org/docs/common/2.1/en/reference/annotations.html\r\n','2011-08-09 19:55:24'),(267,6,'Gediminas','Re: Re: Re: Exception',NULL,'Hi can you make a paste, or gist of your entity mapping and bootstrap of doctrine if its not symfony2. <a href=\"http://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md\">doc/tree.md</a> is more up to date, maybe you do not use new annotation mapping.','2011-08-09 22:32:36'),(268,4,'Gediminas','Re: missing slugs',NULL,'slug:\r\nupdatable: false\r\n\r\nyou set the slug to skip updates. So it does not appear in the changeset for translatable either. Result is expected, change updatable to true','2011-08-09 22:36:38'),(269,3,'Gediminas','Re: using fallback',NULL,'Hi, thanks, I see what you mean. Currently it is not implemented, but it is possible to make something like that. Because there is hydrator for query hint, and when postLoad for single object is triggered it also knows when it uses fallback. But so far I haven\'t thought about it and do not know whether it is efficient to make something like that, or if it is possible without issuing extra query. You can submit a feature request https://github.com/l3pp4rd/DoctrineExtensions/issues?sort=created&direction=desc&state=open','2011-08-09 22:44:56'),(270,4,'Dalibor Farny','Re: Re: missing slugs',NULL,'<blockquote><p>\r\n        slug:<br>\r\nupdatable: false<br>\r\n<br>\r\nyou set the slug to skip updates. So it does not appear in the changeset for translatable either. Result is expected, change updatable to true    </p></blockquote>\r\n\r\nThx for response..\r\n\r\nI understand, but when I set the slug to translatable, I expected gedmo to translate it ;-) Would it be difficult to change behaviour of the gedmo to translate slug and then not update it (updatable false)? When I set updatable true, the slug will change whenever I change the name, that is not the way I want to go..\r\n\r\nThank You for your time,\r\n\r\nDalibor','2011-08-10 09:36:10'),(271,6,'AH','Re: Re: Re: Re: Exception',NULL,'Oh Good ! It\'s working now with the new annotation mapping.\r\n\r\nI use the doctrine sandbox for my test.\r\n\r\nThanks for your help and your work on this extension.','2011-08-10 12:41:13'),(272,4,'Dalibor Farny','missing slugs',NULL,'I solved it for my needs this way:\r\n\r\nI updated SluggableListener on line 131:\r\n- if ($slugField[\'updatable\']) {\r\n+ if ($slugField[\'updatable\'] || !mb_strlen($meta->getReflectionProperty($slugField[\'slug\'])->getValue($object))) {\r\n\r\n\r\nIt check whether the slug is updatable or the slug field is empty (it shouldn\'t be in any case) and if so, it let the slug to be generated..\r\n\r\nThe only problem could be if You want to force the slug field to be empty - it will generate new slug. But I think if You need that, something in your app is wrong ;-)\r\n\r\nIt doesn\'t work when translationFallback is set to true - it loads the slug from other locales and doesnt change it.. I think the behaviour of the translationfallback is weird - it should load the translation all in one locale and let the missing fields empty..\r\n\r\nThank You for great extensions and well commented code, it really helped me..\r\n\r\nDalibor','2011-08-10 13:09:02'),(279,3,'Michael','Changing TranslationEntity for documents',NULL,'Thanks for the awesome extensions! I was wondering what the syntax would be for storing translations in a separate document (rather than entity). I\'m using Symfony2 and MongoDB but this doesn\'t seem to work:\r\n\r\n@Gedmo\\TranslationEntity(class=\"My\\FooBundle\\Document\\BarTranslation\")\r\n\r\nWith BarTranslation.php as:\r\n\r\nuse Gedmo\\Translatable\\Document\\AbstractTranslation;\r\n\r\n/**\r\n * @MongoDB\\Document(db=\"foo\", collection=\"bar_translation\")\r\n */\r\nclass BarTranslation extends AbstractTranslation\r\n{\r\n}','2011-08-14 11:27:17'),(280,3,'Michael','Re: Changing TranslationEntity for documents',NULL,'Solved! apparently the @Gedmo\\TranslationEntity definition has to appear above the class and not on the field..\r\n\r\n\r\n<blockquote><p>\r\n        Thanks for the awesome extensions! I was wondering what the syntax would be for storing translations in a separate document (rather than entity). I\'m using Symfony2 and MongoDB but this doesn\'t seem to work:<br>\r\n<br>\r\n@Gedmo\\TranslationEntity(class=\"My\\FooBundle\\Document\\BarTranslation\")<br>\r\n<br>\r\nWith BarTranslation.php as:<br>\r\n<br>\r\nuse Gedmo\\Translatable\\Document\\AbstractTranslation;<br>\r\n<br>\r\n/**<br>\r\n * @MongoDB\\Document(db=\"foo\", collection=\"bar_translation\")<br>\r\n */<br>\r\nclass BarTranslation extends AbstractTranslation<br>\r\n{<br>\r\n}    </p></blockquote>','2011-08-14 11:37:11'),(281,6,'Michael','Are documents supported?',NULL,'Hi guys, I\'m using Symfony2 & MongoDB - are documents/ODM supported for trees?','2011-08-14 12:17:30'),(290,6,'Gediminas','Re: Are documents supported?',NULL,'hi Michael\r\n\r\nThere was a work going on for that, but still not yet stable. You can try it here http://github.com/Funsational/DoctrineExtensions/tree/feature/tree-odm-support-path','2011-08-15 11:53:27'),(296,6,'Masich Ivan','How I can make root as NULL?',NULL,'When parent is not set I get several trees and when I order all data by lft i get wrong ordered items for example: http://pastebin.com/RgtKgnPR I got items ordered in 1, 2, 3 but I want to take it in 1, 3, 2 because I want have only one tree which root is NULL.\r\n\r\nHow I can make this? Sorry for my bad english.','2011-08-16 15:39:00'),(304,6,'Gediminas','Re: How I can make root as NULL?',NULL,'Hi, do not use @treeroot annotation, it separates each base tree as different tree, or use sortable extension additionally','2011-08-17 20:40:13'),(308,6,'Masich Ivan','Re: Re: How I can make root as NULL?',NULL,'Thanks a lot for help ;)','2011-08-19 08:14:31'),(348,6,'anardil','move node',NULL,'Hi,\r\n\r\nI use a plugin jquery \"jstree\" to display categories. This plugin can move with drag&drop, so i can easily move a category in a different category parent or a different position.\r\n\r\nI\'ve got a question, for example:\r\nI\'ve got this : \r\n-- Vegitables\r\n- Onions\r\n- Carrots\r\n- Cabbages\r\n- Potatoes\r\n\r\nI want to move the category \"Potatoes\" in the second position, but I dont know how to do that ?\r\n\r\nCan you help me please?','2011-08-30 11:04:22'),(349,5,'','Re: Module Names in template paths ',NULL,'<blockquote><p>\r\n        I\'ve tried your approach and can\'t find how to include module names in template paths such as default/index/index.tpl  <br>\r\nWithout this it seems I\'m stuck with a flat directory structure.<br>\r\n<br>\r\nAlso, I can\'t figure out how to change the default template paths to something like /skins/default/module/controller/action.tpl    </p></blockquote>','2011-08-30 12:42:56'),(350,6,'Gediminas','Re: move node',NULL,'Hi, you can do it in few ways:\r\n$treeRepository->persistAsNextSiblingOf($potatoes, $onions);\r\nOR\r\n$treeRepository->persistAsPrevSiblingOf($potatoes, $carrots);\r\n$em->flush();\r\nAnother way using a position move\r\n$treeRepository->moveUp($potatoes, 2/*position steps*/);\r\n','2011-08-31 07:41:46'),(356,3,'Dmitry','Locale fallback',NULL,'How I can load default translation (for default culture/locale) when target translation missed?\r\n\r\nE.g. I have blog post (title/body) in english (default culture), but on russian translated only title. In this case I need to load russian title and english body. \r\n\r\nThis is possible in \"background\"?','2011-09-03 16:30:22'),(357,3,'Gediminas','Re: Locale fallback',NULL,'Hi, yes, then you set the default locale, it always leaves original record value for this locale, translation fallback also must be set to true. In this case if it does not find ru it will load default record value, which would be en','2011-09-03 20:19:53'),(359,3,'Dmitry','Re: Re: Locale fallback',NULL,'<blockquote><p>\r\n        Hi, yes, then you set the default locale, it always leaves original record value for this locale, translation fallback also must be set to true. In this case if it does not find ru it will load default record value, which would be en    </p></blockquote>\r\n\r\nYes, this works! )\r\n\r\nI StofDoctrineExtensionsBundle need to allow locale fallback:\r\n\r\nstof_doctrine_extensions:\r\n    default_locale: %locale%\r\n    translation_fallback: true\r\n\r\nThanks!','2011-09-04 10:27:27'),(360,7,'iki','Timestampable not working',NULL,'I have a problem with Timestampable. I was using Doctrine 2.0.x, than upgraded to 2.1.x. Now doctrine works (saves entities to db), but the EventListeners seems to be broken. \r\n\r\nMaybe, it could be problem with namespace, my Entity looks like this (I\'m not using namespaces, because of some other session problems):\r\n\r\n<?php\r\n/**\r\n * @Table(name=\"user\")\r\n * @Entity\r\n */\r\nclass App_Entity_User{\r\n	/**\r\n	 * @Id\r\n	 * @Column(name=\"id\", type=\"integer\")\r\n	 * @GeneratedValue\r\n	 */\r\n	private $id;\r\n\r\n	/**\r\n	 * @Column(name=\"login\", type=\"string\", length=50, unique=true)\r\n	 */\r\n	private $login;\r\n\r\n	/**\r\n	 * @Column(type=\"datetime\", nullable=true)\r\n	 * @Gedmo\\Mapping\\Annotation\\Timestampable(on=\"update\")\r\n	 */\r\n	private $updated;\r\n\r\n\r\nWhen I dump EventManager it shows:\r\n\r\nobject(Doctrine\\Common\\EventManager)#81 (1) {\r\n  [\"_listeners\":\"Doctrine\\Common\\EventManager\":private] => array(4) {\r\n    [\"postConnect\"] => array(1) {\r\n      [\"0000000071a978d3000000006fbeef71\"] => object(Doctrine\\DBAL\\Event\\Listeners\\MysqlSessionInit)#102 (2) {\r\n        [\"_charset\":\"Doctrine\\DBAL\\Event\\Listeners\\MysqlSessionInit\":private] => string(4) \"utf8\"\r\n        [\"_collation\":\"Doctrine\\DBAL\\Event\\Listeners\\MysqlSessionInit\":private] => string(13) \"utf8_czech_ci\"\r\n      }\r\n    }\r\n    [\"prePersist\"] => array(1) {\r\n      [\"0000000071a978c5000000006fbeef71\"] => object(Gedmo\\Timestampable\\TimestampableListener)#112 (5) {\r\n        [\"configurations\":protected] => array(0) {\r\n        }\r\n        [\"extensionMetadataFactory\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"adapters\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"annotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n        [\"defaultAnnotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n      }\r\n    }\r\n    [\"onFlush\"] => array(1) {\r\n      [\"0000000071a978c5000000006fbeef71\"] => object(Gedmo\\Timestampable\\TimestampableListener)#112 (5) {\r\n        [\"configurations\":protected] => array(0) {\r\n        }\r\n        [\"extensionMetadataFactory\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"adapters\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"annotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n        [\"defaultAnnotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n      }\r\n    }\r\n    [\"loadClassMetadata\"] => array(1) {\r\n      [\"0000000071a978c5000000006fbeef71\"] => object(Gedmo\\Timestampable\\TimestampableListener)#112 (5) {\r\n        [\"configurations\":protected] => array(0) {\r\n        }\r\n        [\"extensionMetadataFactory\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"adapters\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => array(0) {\r\n        }\r\n        [\"annotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n        [\"defaultAnnotationReader\":\"Gedmo\\Mapping\\MappedEventSubscriber\":private] => NULL\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nHas anyone some idea, why it doesn\'t work? Thx..\r\n','2011-09-06 15:39:43'),(361,4,'Dmitry','updatable=true VS updatable=\"true\"',NULL,'Just a little question:\r\n\r\nSeems like updatable=true not equal to updatable=\"true\" (for me works updatable=true form). This is bug or not?','2011-09-07 09:57:45'),(362,7,'Gediminas','Re: Timestampable not working',NULL,'you can force annotation reader to listener $timestampableListener->setAnnotationReader($myCustomReader);\r\n\r\nthis would solve the problem if it does not work out of the box, because doctrine2.1 is using namespaced annotations like @Doctrine\\ORM\\Mapping\\Annotations\\Column\r\nif you have problems setting the reader for listeners email me','2011-09-07 10:31:24'),(363,4,'Gediminas','Re: updatable=true VS updatable=\"true\"',NULL,'no, its not a bug, since annotation reader reads it like that, string must be quoted \"\", and integer, float and boolean not. because for instance I can make it like $updateble = (is_bool($value) && $value) or ($value == \'true\') or (intval($value) === 1)\r\n\r\nbut for all annotations these additional checks had to be done, you do not write in php: $myBoolean = \"true\"; right?','2011-09-07 10:40:25'),(364,6,'Daniel','bug in NestedTreeRepository',NULL,'Hello, I\'m using your code and it\'s wonderful, but I think I have spotted a bug in NestedTreeRepository.php\r\n\r\nin line 872: $nodes = self::childrenQuery($node, $direct, \'root\' , \'ASC\')->getArrayResult();\r\n\r\nt should be:  $nodes = self::childrenQuery($node, $direct)->getArrayResult();\r\n\r\nOtherwise the tree is not well rendered.\r\n\r\nThank you!','2011-09-07 19:39:01'),(365,6,'jonathan','broken tree',NULL,'Hi,\r\ni imported a CSV file into my database with only parent_id, id and title available.\r\ntherefore all the values like lft lvl rgt root are 0.\r\n\r\nhow can i get doctrine to reapair my tree and fill these fields with the correct values?','2011-09-07 21:30:26'),(366,6,'Gediminas','Re: bug in NestedTreeRepository',NULL,'hi, thanks\r\nI\'ll check the code as soon as I can, but anyone is very welcome to contribute in github','2011-09-07 22:49:09'),(367,6,'Gediminas','Re: broken tree',NULL,'Hi, currently recovery functionality is not implemented. You will have to write a php script to reinsert parent and childs recursively and later sort the tree or reorder or determine sorting during the inserts.','2011-09-07 22:53:28'),(368,3,'Tim','Troubles with the default trans value and the original value (MongoDB)',NULL,'Hello everyone.\r\n\r\nI am using this extension with MongoDB, and nearly everything works fine so far, except of one thing  that drives me crazy. \r\n\r\nThis is my current config for the extension at the moment:\r\n\r\nstof_doctrine_extensions:\r\n    default_locale: en_US\r\n    translation_fallback: true\r\n    mongodb:\r\n        default:\r\n            translatable: true\r\n\r\nparameters:\r\n    avaiable_locales: [en_US, de_DE, es_ES, it_IT, fr_FR ]\r\n\r\n\r\nHe is generating translation entries for all available locales, also for the default locale (en_US). Thats fine so far with me, but the problem I have, is that any language value can not be the same string than the original value after changing it the first time. If the original value is \"Football\" and I try to change the en_US value also back to \"Football\" he keeps the old value, if I call it \"Football test\" he is saving it.\r\n\r\nThis looks like a bug to me, because the original value is not used as default language, this would be en_US in this case. I would be happy if the original value gets updated when the default value (en_US) gets changed and if another language has the same string than the default the translation entry should get deleted.\r\n\r\n','2011-09-08 18:29:44'),(369,6,'r4cker','Symfony2 integration',NULL,'Hi, \r\nAny example with Symfony cause I am lost. Didn\'t made it to make it work :(','2011-09-10 02:05:53'),(370,6,'Gediminas','Re: Symfony2 integration',NULL,'Hi, you should use http://github.com/stof/StofDoctrineExtensionsBundle and if you have any problems ask in symfony2 dev google group. It should be really simple with this bundle, read its docs first','2011-09-10 12:39:40'),(371,5,'Gediminas','Re: Re: Module Names in template paths ',NULL,'hi, its all in the Ext_View_Smarty class, line 290 you can add customized paths. but module paths should work out of the box if you followed the tutorial right','2011-09-10 12:42:54'),(372,3,'Gediminas','Re: Troubles with the default trans value and the original value (MongoDB)',NULL,'I gues translatable is not the best joice for ODM since it does not create an embeded document. Or a column as a translation in a diferent locale, you see documents can extend columns easily, ORM does not','2011-09-10 12:45:58'),(373,6,'r4cker','Re: Re: Symfony2 integration',NULL,'<blockquote><p>\r\n        Hi, you should use http://github.com/stof/StofDoctrineExtensionsBundle and if you have any problems ask in symfony2 dev google group. It should be really simple with this bundle, read its docs first    </p></blockquote>\r\n\r\nI already did it :)\r\nAnyway, I found an interesting post that help me a lot : \r\n\r\nhttp://www.developpez.net/forums/d1127872/php/bibliotheques-frameworks/symfony2/extension-doctrine-tree-crud/\r\n\r\nIt\'s in french, but entity code is given for Symfony.\r\n\r\nThanks','2011-09-10 15:29:08'),(376,4,'anardil','I don\'t want \"slug\" field',NULL,'Hi,\r\n\r\nMy field is called \"ref_url\".\r\nCan I do that ?\r\n\r\n    /**\r\n     * @gedmo:Slug\r\n     * @String\r\n     */\r\n    private $ref_url;\r\n\r\nI don\'t want rename my field \"slug\", is is possible ?\r\n\r\nThx','2011-09-13 10:30:18'),(377,4,'Gediminas','Re: I don\'t want \"slug\" field',NULL,'yes its possible\r\n/**\r\n* @gedmo:Sluggable(slugField=\"ref_url\")\r\n* @String\r\n*/\r\nprivate $title;\r\n\r\nif you use doctrine2.1 @Gedmo\\Mapping\\Annotation\\Sluggable(slugField=\"ref_url\")','2011-09-14 15:05:50'),(378,4,'Kyudo','Generate slug for existing Entities in db',NULL,'Hello,\r\n\r\nPlz i need help, how i can generate slug for existing entities in db, without doing any updates in the sluggable fiels?\r\n\r\nthx a lot for your help','2011-09-19 12:18:22'),(379,7,'yogi70','Re: Re: Re: Symfony2 integration',NULL,'Looks like the github link for symfony has changed to\r\n\r\nhttps://github.com/stof/StofDoctrineExtensionsBundle','2011-09-26 13:46:44'),(380,5,'Mario','I can\'t make it work : ViewRenderer initialization failed',NULL,'I am trying your class but I keep getting errrors\r\n\r\nPHP Fatal error:  Uncaught exception \'Zend_Controller_Action_Exception\' with message \'ViewRenderer initialization failed: retrieved view base path is empty\' in /usr/local/zend/share/ZendFramework/library/Zend/Controller/Action/Helper/ViewRenderer.php:475','2011-09-30 02:46:12'),(381,4,'David','uniqueBy',NULL,'Hello,\r\n\r\nIs there support for the uniqueBy option?\r\n\r\nI need the slug to be unique based on two fields. I tried to do it this way:\r\n\r\n@Gedmo\\Slug(uniqueBy={\"id\", \"name\"})\r\n\r\nBut I get this error:\r\n[BadMethodCallException]                                                    \r\n Unknown property \'uniqueBy\' on annotation \'Gedmo\\Mapping\\Annotation\\Slug\'.','2011-09-30 19:13:07'),(382,3,'murze','storing translations in a different table',NULL,'How can I store a translation in a different table?\r\n\r\nhttp://stackoverflow.com/questions/7633734/how-to-store-a-translation-in-a-different-table-using-doctrine-2-gedmo-translat','2011-10-03 14:19:33'),(383,5,'Paul M','Default templates on new modules',NULL,'Hey there, great post thanks.\r\n\r\nIs there any way we can work this so that if templates aren\'t specified in a new modules structure that the default templates are used instead?\r\n\r\nThanks\r\n\r\nPaul','2011-10-06 18:07:12'),(384,5,'Gediminas','Re: Default templates on new modules',NULL,'hi, you can simply add static template paths. like in line 294 Ext_View_Smarty','2011-10-07 08:30:13'),(385,4,'hi','Re: uniqueBy',NULL,'its unique by fields you are slugging:\r\n@Gedmo\\Slug(fields={\'id\', \'name\'}) it will always make slug unique unless you set unique=false','2011-10-07 08:33:24'),(386,7,'Risehowl','XML Mapping for MongoDB',NULL,'First all: great work.\r\nAnd my question: Why the XML driver don\'t have support for MongoDB mapping?\r\nThanks','2011-10-12 17:05:05'),(387,7,'Gediminas','Re: XML Mapping for MongoDB',NULL,'hey, mostly because noone contributes for it, my recent projects do not include doctrine, so I do not have much time to make all that goodness :)','2011-10-13 13:16:58'),(388,4,'Satin','Prepending somthing to a slug',NULL,'Hi,\r\n\r\nI am generating a slug based on two fields using one field in slug handler and the other one as it is , which is generated as somthing/yes-its-a-slug\r\n\r\nHow can i modify the annotation to generate /somthing/yes-its-a-slug prepending a \"/\" ?? \r\n\r\n\r\nreally bugging me !! :S\r\n\r\n/**\r\n     * @gedmo\\Slug(handlers={\"/\"},{\r\n     *      @gedmo\\SlugHandler(class=\"Gedmo\\Sluggable\\Handler\\RelativeSlugHandler\", options={\r\n     *          @gedmo\\SlugHandlerOption(name=\"relationField\", value=\"someEntity\"),\r\n     *          @gedmo\\SlugHandlerOption(name=\"relationSlugField\", value=\"2ndField\"),\r\n     *          @gedmo\\SlugHandlerOption(name=\"separator\", value=\"/\")\r\n     *      })\r\n     * }, fields={\"1stField\"})\r\n     * @orm\\Column(type=\"string\", length=\"255\")\r\n     */','2011-10-19 13:47:21'),(389,4,'Satin','corrected code',NULL,'/**<br>\r\n     * @gedmo\\Slug(handlers={<br>\r\n     *      @gedmo\\SlugHandler(class=\"Gedmo\\Sluggable\\Handler\\RelativeSlugHandler\", options={<br>\r\n     *          @gedmo\\SlugHandlerOption(name=\"relationField\", value=\"someEntity\"),<br>\r\n     *          @gedmo\\SlugHandlerOption(name=\"relationSlugField\", value=\"2ndField\"),<br>\r\n     *          @gedmo\\SlugHandlerOption(name=\"separator\", value=\"/\")<br>\r\n     *      })<br>\r\n     * }, fields={\"1stField\"})<br>\r\n     * @orm\\Column(type=\"string\", length=\"255\")<br>\r\n     */    </p></blockquote>','2011-10-19 13:53:26'),(390,4,'Gediminas','Re: corrected code',NULL,'Hi, sluggable does not do sufixes or prefixes, this is just too much use cases. To handle such behavior you can have for instance a method:\r\n\r\ngetSlugAsUnixPath() { return \'/\'.this->slug; } is it too hard? behavior will not cover prefixes or sufixes. Or you can add additional slug handler which would modify slug once more before flushing','2011-10-19 23:14:36'),(391,4,'Satin','Re: Re: corrected code',NULL,'Main problem was that the value was directly being used from the database so change in getGuid() was of no use. i will try to use one more handler .\r\n\r\nThanks ','2011-10-20 08:59:29'),(392,4,'Viszinisa','uniqueBy',NULL,'From description I understand that this one doesn\'t support uniqueBy.\r\nIf I understand correctly then previous Doctrine version had smth like that.\r\nIs this right?\r\n\r\n','2011-10-22 01:59:09'),(393,4,'Gediminas','Re: uniqueBy',NULL,'yes it does not. I havent used d1 and I\'m not familiar with that functionality it provided. its about specifying one field which would increase index if not unique, others simply concatenated. Then I will not implement it. You can use slug handlers for that','2011-10-22 09:30:59'),(394,7,'Prolic','Zend_Date',NULL,'Hi Gediminas,\r\n\r\nfirst of all, thank\'s for your good work!\r\nOne thing I like to mention: It would be very cool, if your timestampable behavoiur extension would also work together with the mapping type ZendDateType (written by Benjamin Eberlei).\r\nThe valid types in Gedmo\\Timestampable\\Mapping\\Driver\\Annotation is a private property, so I can\'t reuse your class by subclassing. Perhabs I would make this extension by my own and send you a pull request. Just let me know. (contact: github.com/prolic)','2011-10-25 15:16:58'),(395,6,'r4cker','Re: How do I specify that the object does not have parents?',NULL,'<blockquote><p>\r\n        How do I specify that the object does not have parents?<br>\r\n$ page-> setParent (false); not working<br>\r\nThank you    </p></blockquote>\r\n\r\nFor those who are interested of setting the parent node to null, your ave to modify a bit the entity : \r\n----------------------------------\r\n /**\r\n     * @Gedmo\\TreeParent\r\n     * @ORM\\ManyToOne(targetEntity=\"Task\", inversedBy=\"children\")\r\n     * @ORM\\JoinColumn(name=\"parent_id\", referencedColumnName=\"id\", onDelete=\"SET NULL\", nullable=true)\r\n     */\r\n    private $parent;\r\n//add the nullable property to the column\r\n\r\npublic function setParent(\\Jal\\ProjectBundle\\Entity\\Task $parent=null)\r\n    {\r\n        $this->parent = $parent;\r\n    }\r\n//set default value to null\r\n-----------------------------\r\n\r\nIt works fine for me now :)','2011-10-25 23:31:41'),(396,3,'Dalibor','upgrading from 2.0.x to latest 2.1 - question',NULL,'Hi, great extension, using it quite a lot. I\'m currently using doctrine 2.0.5(this is listed in ORM folder/version.php) with this extension 2.0.x and I\'m having some quite strange bug, when I delete some entity, sometimes it would delete translation for some other entry (so far it seems like it uses random choice). \r\nAnyway, I would like to upgrade this extension to latest stable, and I noticed comment on 2011-10-08\r\n\"Thanks to @acasademont Translatable now does not store translations for default locale. It is always left as original record value. So be sure you do not change your default locale per project or per data migration. This way it is more rational and unnecessary to store it additionaly in translation table.\r\n\"\r\nSo I was wondering, if my client that is using current version of my code wants to change default locale, how should I approach this?\r\n\r\nThanks in advance, excellent code!!\r\nDaki','2011-11-02 00:36:33'),(397,3,'Gediminas','Re: upgrading from 2.0.x to latest 2.1 - question',NULL,'Hi, translatable now does not store default locale in extra translation record. If you do want to change default locale, you would need some kind of migration script, which indeed would be very simple.\r\nMaybe I\'ll add it in extensions one day. Default locale should be in general unchangable per project','2011-11-02 10:05:40'),(398,3,'Dalibor','Re: Re: upgrading from 2.0.x to latest 2.1 - question',NULL,'<blockquote><p>\r\n        Hi, translatable now does not store default locale in extra translation record. If you do want to change default locale, you would need some kind of migration script, which indeed would be very simple.<br>\r\nMaybe I\'ll add it in extensions one day. Default locale should be in general unchangable per project    </p></blockquote>\r\nThanks, that is how I understood it. I agree that default locale shouldn\'t change, and I\'m happy that it doesn\'t store extra translations, but if client demands changing default language (and it happened to me on few websites) I would have to do it :(\r\nCan you please describe what would migration script look like? Just in plain algorithm or in few words, or how it is most convenient for you to describe it.\r\n\r\nThanks again!','2011-11-02 12:33:59'),(399,3,'Gediminas','Re: Re: Re: upgrading from 2.0.x to latest 2.1 - question',NULL,'For that you can use DBAL connection only. Select all entities which are being translated. interate them and take translated field value, and create a translation record for that locale and value in translation table. It general it is very simple. Just add translations in translation table which was default. Older version 2.0.x already has it.','2011-11-02 14:12:23'),(400,6,'cmdr','install',NULL,'Hi\r\n\r\nI am not able to install extension, I need help\r\n\r\nAt soon as I put theses tags in my config.xml file\r\n<!-- app/config.xml -->\r\n<container xmlns:stof_doctrine_extensions=\"http://symfony.com/schema/dic/stof_doctrine_extensions\">\r\n    <stof_doctrine_extensions:config default-locale=\"en_US\">\r\n        <stof_doctrine_extensions:orm>\r\n            <stof_doctrine_extensions:entity-manager id=\"default\" />\r\n        </stof_doctrine_extensions:orm>\r\n        <stof_doctrine_extensions:mongodb>\r\n            <stof_doctrine_extensions:document-manager id=\"default\" />\r\n        </stof_doctrine_extensions:mongodb>\r\n    </stof_doctrine_extensions:config>\r\n</container>\r\n\r\nI get this error\r\nInvalidArgumentException: There is no extension able to load the configuration for \"stof_doctrine_extensions:config\"','2011-11-05 17:00:49'),(401,6,'Gediminas','Re: install',NULL,'hi, you need to read <a href=\"https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst\">documentation</a> on the <a href=\"https://github.com/stof/StofDoctrineExtensionsBundle\">stof bundle</a> ','2011-11-05 17:57:50'),(402,4,'\'smo','Editable slugs',NULL,'Hello, \r\n\r\nI need some slugs that works the WordPress way :\r\n\r\n* it\'s unique\r\n* it\'s generated from title\r\n* it isn\'t updated when the title changes\r\n* user can type the slug he wants when needed in a text input\r\n* if user clears the slug in the text input then it\'s re-generated from title\r\n\r\nI\'ve tried many things but didn\'t get everything to work (especially to preserve the uniqueness of the slug when updated by hand), could you give me some pointers on how to do this ? Do I need to create a handler for this ?\r\n\r\nI share a pastie with what I\'ve tried so far :\r\nhttp://pastie.org/private/lx7oit9h8bajyodxugjrjg','2011-11-07 11:57:41'),(403,4,'Gediminas','Re: Editable slugs',NULL,'Hi I would recommend to implement additional slug handler to work with your case. I will not support such cases in core','2011-11-07 18:00:06'),(404,7,'Jakob','use Imports',NULL,'In newer doctrine versions use imports are required. Can you pleae update your article to make gedmo working with them too? ','2011-11-12 18:39:44'),(405,7,'Gediminas','Re: use Imports',NULL,'you should use documentation in <a href=\"https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/timestampable.md\">repository</a>. I slowly refactor this blog but I do not give much time for that','2011-11-13 13:03:42'),(406,3,'FMaz','setLocale() ??',NULL,'Where does the setLocale() method is supposed to come from ?\r\nI get an underfined method error, and looking at the example, I can\'t figure out where it should come from...','2011-11-17 15:39:54'),(407,3,'Gediminas','Re: setLocale() ??',NULL,'Hi. on the entity theres setTranslatableLocale. it is used to override current global locale. But standard way is to set locale in the session and set it to translationlistener for each request','2011-11-17 22:37:52'),(408,5,'gecata83','Re: error',NULL,'<blockquote><p>\r\n        Fatal error: Call to a member function getDefaultModule() on a non-object in myapp\\library\\Zend\\Application\\Bootstrap\\Bootstrap.php on line 89?<br>\r\n    </p></blockquote>\r\n$this->getApplication()->setOptions($this->getOptions())->bootstrap(\'frontController\');','2011-11-22 09:16:45'),(409,5,'Lev','Application path issues',NULL,'Hi\r\n    I tried this  and it works fine for me.Thank you.But i am facing one issue when i upload it in to a linux hosting server.It is working fine in localhost but throwing an error on server\r\n\"Fatal error: Class \'Ext_View_Smarty\' not found in  Bootstrap.php\"\r\nit seems like some issues in application path. can anybody help me to solve this. In the server, my directory structure is like this \"\r\nmyserver.com/staging/clientname/myproject\"','2011-11-23 06:28:18'),(410,5,'Gediminas','Re: Application path issues',NULL,'Hi in that case there might be two reasons, or both:\r\n1) include path is not added, pointing to your application. but less possible zend app should do it in index.php.\r\n2) you should register autoload prefix <strong>Ext</strong> like:\r\n; --- ini config file ---\r\nautoloaderNamespaces.extension[] = \"Ext_\"\r\n\r\nif you use zf2 you should register this prefix anyway for this file to be autoloaded. or for quick hack simply include it in your index.php :) or you can rename it of course','2011-11-24 09:40:57'),(411,5,'','Re: Re: Application path issues',NULL,'Hi Gediminas,\r\n          Thank you for helping.I checked everything and could not find any issues in the index.php and application.ini. I am giving my  index.php and application.ini contents here.Please look at the settings and help me if i have to do anything on this.( my zend libraries are located on \"projectfolder/library/Zend\")\r\n\r\napplication.ini\r\n----------------\r\nphpSettings.display_startup_errors = 1\r\nphpSettings.display_errors = 1\r\nincludePaths.library = APPLICATION_PATH \"/../library\"\r\nbootstrap.path = APPLICATION_PATH \"/Bootstrap.php\"\r\nbootstrap.class = \"Bootstrap\"\r\nappnamespace = \"Application\"\r\nresources.frontController.controllerDirectory = APPLICATION_PATH \"/controllers\"\r\nresources.frontController.params.displayExceptions = 1\r\nbootstrap.css = APPLICATION_PATH \"/public/css\"\r\nresources.layout.layout = \"layout\"\r\nresources.layout.nolayout = \"nolayout\"\r\n\r\nresources.view[] =\r\n\r\n; --- Autoloading Prefixes ---\r\nautoloaderNamespaces.extension[] = \"Ext_\"\r\n; --- Smarty ---\r\n\r\nsmarty.caching = 0\r\nsmarty.cache_lifetime = 0 ;set in minuts\r\nsmarty.template_dir = APPLICATION_PATH \"/scripts/\"\r\nsmarty.compile_dir = APPLICATION_PATH \"/tmp/smarty_compile/\"\r\nsmarty.config_dir = \"\"\r\nsmarty.cache_dir = APPLICATION_PATH \"/tmp/smarty_cache/\"\r\nsmarty.left_delimiter = \"{\"\r\nsmarty.right_delimiter = \"}\"\r\n.\r\n.\r\n.\r\n.\r\n.\r\n.\r\n\r\npublic/index.php\r\n-------------------------\r\n/ Define path to application directory\r\ndefined(\'APPLICATION_PATH\')\r\n    || define(\'APPLICATION_PATH\', realpath(dirname(__FILE__) . \'/../application\'));\r\n\r\n// Define application environment\r\ndefined(\'APPLICATION_ENV\')\r\n    || define(\'APPLICATION_ENV\', (getenv(\'APPLICATION_ENV\') ? getenv(\'APPLICATION_ENV\') : \'production\'));\r\n\r\n// Ensure library/ is on include_path\r\nset_include_path(implode(PATH_SEPARATOR, array(\r\n    realpath(APPLICATION_PATH . \'/../library\'),\r\n    get_include_path(),\r\n)));\r\n\r\n/** Zend_Application */\r\nrequire_once \'Zend/Application.php\';\r\n\r\n// Create application, bootstrap, and run\r\n$application = new Zend_Application(\r\n    APPLICATION_ENV,\r\n    APPLICATION_PATH . \'/configs/application.ini\'\r\n);\r\n\r\n$application->bootstrap()\r\n            ->run();\r\n\r\n\r\nServer Directory structure to host the application\r\n----------------------------------------\r\nwww.myserver.com/staging/clientname/myproject/\r\n','2011-11-24 14:30:38'),(412,5,'','Re: Re: Re: Application path issues',NULL,'Hi Gediminas\r\n\r\nI found the bug. My smarty library structure was \"Ext/view/Smarty.php\" instead of \"Ext/View/Smarty.php. I renamed \"view\" folder to \"View\" (capital V) then it works fine.Thank you for your help','2011-11-24 15:17:51'),(413,5,'Gediminas','Re: Re: Re: Re: Application path issues',NULL,'Yes, its one thing you should be familliar with in linux first of all. glad you sorted it out','2011-11-24 22:32:26'),(414,6,'trondal','Multiple trees question',NULL,'If I insert two trees( one node only in each tree), could I then expect that each tree has a left = 1 and right = 2, or would the second tree\'s left value start with 3?\r\n\r\nIf it starts with 3, is there a way to \'start over\' with the increments on each tree?','2011-12-01 12:56:28'),(415,6,'Gediminas','Re: Multiple trees question',NULL,'Hi, if you use @Gedmo\\TreeRoot in that case it will start all root nodes with left 1, right 2. If you do not add the root field. It will start from 3','2011-12-01 22:51:55'),(416,6,'trondal','Re: Re: Multiple trees question',NULL,'<blockquote><p>\r\n        Hi, if you use @Gedmo\\TreeRoot in that case it will start all root nodes with left 1, right 2. If you do not add the root field. It will start from 3    </p></blockquote>\r\n\r\nThanks for the quick answer! Made my day.','2011-12-02 10:29:20'),(417,6,'pelse','multiple roots',NULL,'Hi,\r\nhow do i use the multiple roots feature.\r\nDo i need any JoinTable.\r\nDo i have to set any annotation like hasManyRoots?\r\n\r\nI have grab deep in the code of this bundle, but i can`t find anything.\r\n\r\nThanks. ','2011-12-07 15:22:42'),(418,3,'Justinas','why the need for 2 tables to hold translations?',NULL,'im using the TranslationEntity tu store translations in a separate table for column slug, and i see that doctrine generates sql for two tables. Why the need for ext_translations, what\'s its purpose?\r\n\r\nand why did you change the structure of translation storage compared to doctrine 1 i18n behaviour, it used to put all translated columns in a separate table where one row represented translation for one language, and now we have multiple rows for the same language as i see it. Won\'t this be slower?\r\n\r\nCREATE TABLE route_translations (id INT AUTO_INCREMENT NOT NULL, locale VARCHAR(8) NOT NULL, object_class VARCHAR(255) NOT NULL, field VARCHAR(32) NOT NULL, foreign_key VARCHAR(64) NOT NULL, content LONGTEXT DEFAULT NULL, lang VARCHAR(2) DEFAULT NULL, slug VARCHAR(255) DEFAULT NULL, INDEX route_translation_idx (locale, object_class, foreign_key, field), PRIMARY KEY(id)) ENGINE = InnoDB;\r\nCREATE TABLE ext_translations (id INT AUTO_INCREMENT NOT NULL, locale VARCHAR(8) NOT NULL, object_class VARCHAR(255) NOT NULL, field VARCHAR(32) NOT NULL, foreign_key VARCHAR(64) NOT NULL, content LONGTEXT DEFAULT NULL, INDEX translations_lookup_idx (locale, object_class, foreign_key), UNIQUE INDEX lookup_unique_idx (locale, object_class, foreign_key, field), PRIMARY KEY(id)) ENGINE = InnoDB;\r\n','2011-12-07 16:44:08'),(419,6,'Gediminas','Re: multiple roots',NULL,'all documentation is here https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md\r\n\r\nyou need to use @Gedmo\\TreeRoot annotation on an integer column','2011-12-08 11:22:08'),(420,6,'pelse','Re: Re: multiple roots',NULL,'<blockquote><p>\r\n        all documentation is here https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md<br>\r\n<br>\r\nyou need to use @Gedmo\\TreeRoot annotation on an integer column    </p></blockquote>\r\n\r\nI allready read the documentation, but i canÂ´t find anything about multiroot.\r\n\r\nI need to set/add many parents to one node. So one node can be a tree of many roots.\r\n\r\nMaybe iÂ´m off the track?','2011-12-08 12:25:42'),(421,3,'Diego','Ignore default Language',NULL,'Hi, I wonder if there\'s any way not bring the default value of the entity?\r\n\r\nFor example, my \"default_language\" is: \'en_US\' and I have my site also in \"es_AR\" but I have products only in English and other only in Spanish.\r\n\r\nUsing the hint:\r\n$ query-> setHint (\r\n     \\ Doctrine \\ ORM \\ Query:: HINT_CUSTOM_OUTPUT_WALKER,\r\n     \'Gedmo \\ \\ Translatable \\ \\ Query \\ \\ TreeWalker \\ \\ TranslationWalker\'\r\n);\r\n\r\nWhen making a query with this \"hint\" brings all the products and I just want those who are the selected language.\r\n\r\ncan you help?\r\n \r\nsorry for my poor English','2011-12-08 15:26:10'),(422,3,'Gediminas','Re: why the need for 2 tables to hold translations?',NULL,'Hey Justinas, If you do not want ext_translations, theres only one way to avoid it, by skipping registration of mapping driver for that entity specifically.\r\nI personally haven\'t used i18n of doctrine1 and I do not know how it was working. Theres a translator extension also which is more specific for your use case. Also you can contribute for it in future','2011-12-08 23:09:51'),(423,3,'Gediminas','Re: Ignore default Language',NULL,'guess it was solved <a href=\"https://github.com/l3pp4rd/DoctrineExtensions/issues/200#issuecomment-3069880\">here on github</a>','2011-12-08 23:12:15'),(424,1,'muhammad','thankyou',NULL,'cheers 0=)','2011-12-11 13:06:03'),(425,3,'Krzysztof','Which columns are translated?',NULL,'How to extract data which columns are translated. I am working on an automatic form generator, which uses information from: \"getClassMetadata (\'models \\ \\ Curators\')\". Unfortunately there are no indications that the column is subject to translation. Help!','2011-12-15 16:15:01'),(426,3,'Gediminas','Re: Which columns are translated?',NULL,'Hi, To find out which columns are translatable, you can use $translationListener->getConfiguration($em, $metadata->name);\r\nconfiguration will contain the list of fields if there are any, seems someone implemented something <a href=\"https://github.com/idealtech/IdealTechBreadGeneratorBundle\">similar</a>','2011-12-15 21:14:36'),(427,6,'John Doe','Tree behaviour error',NULL,'Hi,\r\n\r\nwhen trying to get an entity the tree behaviour always gives this fatal error: \"This repository can be attached only to ORM tree listener\". What am I doing wrong?','2011-12-16 13:52:06'),(428,6,'Gediminas','Re: Tree behaviour error',NULL,'Hi, this exception is thrown when theres no tree listener connected and Gedmo\\Tree\\Entity\\Repository is being used. maybe you running a console command which does initialize entity manager without listeners','2011-12-18 00:04:08'),(429,6,'freekmurze','installation',NULL,'Hi, i\'m having trouble installing the tree-behaviour. I\'m not sure if I\'ve installed it correctly? Could somebody please take a look?\r\n\r\nMore info on stack overflow: http://stackoverflow.com/questions/8562726/how-to-install-the-gedmo-extensions-in-doctrine2\r\n\r\nThanks!','2011-12-19 18:03:00'),(430,6,'Gediminas','Re: installation',NULL,'replied on stackoverflow','2011-12-20 11:02:36'),(431,6,'John Doe','Delete a node and it\'s children',NULL,'Great work on this behaviour! \r\nWhen I delete a node from the tree the default behaviour is that the children are reparented.\r\nWhat is the best way to remove a node including all it\'s children?','2011-12-20 13:18:43'),(432,6,'Gediminas','Re: Delete a node and it\'s children',NULL,'thanks, to remove all branch use $entityManager->remove($node); then flush()','2011-12-20 23:32:35'),(433,4,'Sam','API change?',NULL,'The code above suggests that it\'s necessary to put gedmo: [sluggable] into the relevant sections of the YAML mapping file. This doesn\'t seem to be the case â€“ looking at the mapping driver file, you need to do fields: [title] in the Slug\'s options. Is this a change, or have I got confused about what I\'m doing?','2011-12-23 12:32:09'),(434,4,'Gediminas','Re: API change?',NULL,'Hi, yes there was a change, read documentation on <a href=\"https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/sluggable.md\">github</a> I\'m working to update this blog to recent version','2011-12-23 15:41:21'),(435,2,'','Re: Re: Re: php.ini',NULL,'Thanks, it worked a treat !! :)','2011-12-31 14:59:51');
/*!40000 ALTER TABLE `comments` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ext_translations`
--

DROP TABLE IF EXISTS `ext_translations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ext_translations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `locale` varchar(8) NOT NULL,
  `entity` varchar(255) NOT NULL,
  `field` varchar(32) NOT NULL,
  `foreign_key` varchar(64) NOT NULL,
  `content` longtext,
  PRIMARY KEY (`id`),
  KEY `lookup_idx` (`locale`,`entity`,`foreign_key`,`field`)
) ENGINE=InnoDB AUTO_INCREMENT=49 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ext_translations`
--

LOCK TABLES `ext_translations` WRITE;
/*!40000 ALTER TABLE `ext_translations` DISABLE KEYS */;
INSERT INTO `ext_translations` (`id`, `locale`, `entity`, `field`, `foreign_key`, `content`) VALUES (4,'en','Entities\\Category','title','2','Autos'),(5,'en','Entities\\Category','description','2','Autos'),(6,'en','Entities\\Category','slug','2','autos'),(37,'de','Entities\\Category','title','2','Autos'),(38,'de','Entities\\Category','description','2','Autos'),(39,'de','Entities\\Category','slug','2','autos'),(46,'en','Entities\\Category','title','1','Lebensmittel'),(47,'en','Entities\\Category','description','1','Lebensmittel'),(48,'en','Entities\\Category','slug','1','lebensmittel');
/*!40000 ALTER TABLE `ext_translations` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `languages`
--

DROP TABLE IF EXISTS `languages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `languages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(16) CHARACTER SET latin1 NOT NULL,
  `language` varchar(16) CHARACTER SET latin1 NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `languages`
--

LOCK TABLES `languages` WRITE;
/*!40000 ALTER TABLE `languages` DISABLE KEYS */;
INSERT INTO `languages` (`id`, `title`, `language`) VALUES (1,'English','en'),(2,'Deutsch','de'),(3,'hh','hh');
/*!40000 ALTER TABLE `languages` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `roles`
--

DROP TABLE IF EXISTS `roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `roles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `roles_name_uniq` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `roles`
--

LOCK TABLES `roles` WRITE;
/*!40000 ALTER TABLE `roles` DISABLE KEYS */;
INSERT INTO `roles` (`id`, `name`) VALUES (2,'admin'),(1,'guest'),(3,'member');
/*!40000 ALTER TABLE `roles` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `settings`
--

DROP TABLE IF EXISTS `settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `settings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  `value` longtext NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `settings_name_uniq` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `settings`
--

LOCK TABLES `settings` WRITE;
/*!40000 ALTER TABLE `settings` DISABLE KEYS */;
INSERT INTO `settings` (`id`, `name`, `value`) VALUES (1,'regenerated','2012-01-02');
/*!40000 ALTER TABLE `settings` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `test_categories`
--

DROP TABLE IF EXISTS `test_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `test_categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(64) NOT NULL,
  `description` longtext,
  `slug` varchar(64) NOT NULL,
  `parent_id` int(11) DEFAULT NULL,
  `lft` int(11) NOT NULL,
  `rgt` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `test_categories_parent_id_idx` (`parent_id`),
  CONSTRAINT `test_categories_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `test_categories` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `test_categories`
--

LOCK TABLES `test_categories` WRITE;
/*!40000 ALTER TABLE `test_categories` DISABLE KEYS */;
INSERT INTO `test_categories` (`id`, `title`, `description`, `slug`, `parent_id`, `lft`, `rgt`) VALUES (1,'Lebensmittel','Lebensmittel','lebensmittel',2,-7,0),(2,'Cars','Cars','cars',NULL,-8,-7);
/*!40000 ALTER TABLE `test_categories` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role_id` int(11) DEFAULT NULL,
  `password` varchar(32) NOT NULL,
  `email` varchar(255) NOT NULL,
  `firstname` varchar(32) NOT NULL,
  `lastname` varchar(32) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `users_email_uniq` (`email`),
  KEY `role_id` (`role_id`),
  CONSTRAINT `users_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `users`
--

LOCK TABLES `users` WRITE;
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` (`id`, `role_id`, `password`, `email`, `firstname`, `lastname`) VALUES (1,2,'5040ab2aecf8faaffdfe9e21ae3f0e59','gedas@mjk.lt','Gedas','...');
/*!40000 ALTER TABLE `users` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2012-01-02 19:41:42
